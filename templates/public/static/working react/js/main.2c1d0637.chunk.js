(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,n){"use strict";var a=n(2),r=n(3),o=n(7),i=n(6),c=n(8),s=n(0),l=n.n(s),u=n(13),p=n(9),m=n(22),d=n(39),b=(n(498),function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=[];return(this.props.scenarios||p.a.askToChangeScenario.scenario).forEach(function(n){t.push(l.a.createElement(d.a,{onClick:function(){return e.props.askToChangeScenario(n.id)}},n.name))}),l.a.createElement("div",{className:"MainMenu"},l.a.createElement(m.a,null,this.props.textToShow||this.props.children),l.a.createElement("div",null,t))}}]),t}(s.Component));t.a=Object(u.connect)(function(e){return{scenario:e.scenario}},function(e){return{askToChangeScenario:function(t){e({type:p.a.askToChangeScenario.type,scenario:t})}}})(b)},126:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a={currentScenario:{type:n(24).a.get().apis.generalManagerHRI.currentScenario.reduxKey,scenario:"SCENARIO"}}},127:function(e,t,n){"use strict";var a=n(2),r=n(3),o=n(7),i=n(6),c=n(8),s=n(0),l=n.n(s),u=n(39),p=n(9),m=n(13),d=(n(485),n(19)),b=n.n(d),h=b.a.shape({name:b.a.string.isRequired,drinkName:b.a.number.isRequired}),f=(b.a.string.isRequired,b.a.string,b.a.arrayOf(b.a.string),b.a.shape({who:h.isRequired,to:h.isRequired}),b.a.string,b.a.number,n(22)),v=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e,t=this,n=this.props.textToShow||"Hello, what is your name ?";return this.props.names&&this.props.names.length>0&&(e=this.props.names),l.a.createElement("div",null,l.a.createElement(f.a,null,n),l.a.createElement("div",{className:"names"},e.map(function(e){return l.a.createElement(u.b,{onClick:function(){return t.props.sendName(t.props.dispatch,e)}},e)})))}}]),t}(s.Component),g=Object(m.connect)(function(e){return{sendName:function(e,t){e({type:p.a.dataJs.type,dataType:p.a.dataJs.dataType.name,data:t})}}})(v),O=n(10),y=(n(486),function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={value:""},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"deleteNumber",value:function(){this.setState(function(e){return Object(O.a)({},e,{value:e.value.slice(0,-1)})})}},{key:"addNumber",value:function(e){this.state.value.length<3&&this.setState(function(t){var n=Number.parseInt(t.value+e.toString());return Object(O.a)({},t,{value:n.toString()})})}},{key:"render",value:function(){for(var e=this,t=this.props.textToShow||"Hello X, how old are you ?",n=[],a=function(t){n.push(l.a.createElement("button",{className:"btn btn-classic",onClick:function(){return e.addNumber(t)}},t))},r=1;r<10;r++)a(r);var o=this.state.value.length>0?this.state.value:"0";return l.a.createElement("div",null,l.a.createElement(f.a,null,t),l.a.createElement("div",{id:"ages"},l.a.createElement("p",{className:"value"},o),l.a.createElement("div",{id:"digits"},n,l.a.createElement("button",{className:"btn no",onClick:function(){return e.deleteNumber()}},"DEL"),l.a.createElement("button",{className:"btn btn-classic",onClick:function(){return e.addNumber(0)}},"0"),l.a.createElement("button",{className:"btn ok",onClick:function(){return e.props.sendName(e.props.dispatch,Number.parseInt(e.state.value))}},"OK"))))}}]),t}(s.Component)),j=Object(m.connect)(function(e){return{sendName:function(e,t){e({type:p.a.dataJs.type,dataType:p.a.dataJs.dataType.age,data:t})}}})(y),S=(n(487),n(488),function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e="Drink "+this.props.size;return l.a.createElement("img",{className:e,src:this.props.pathOnTablet,alt:this.props.name})}}]),t}(s.Component));S.drinksNameToPathMap={};var k=S,E=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e,t=this,n=this.props.textToShow||"Hello X, what is your prefered drinks ?";this.props.drinks&&this.props.drinks.length>0&&(e=this.props.drinks);var a=[];return e.forEach(function(e){a.push(l.a.createElement("div",null,l.a.createElement(u.b,{image:l.a.createElement(k,{name:e.name,pathOnTablet:e.pathOnTablet}),onClick:function(){return t.props.sendName(t.props.dispatch,e.name)}},e.name)))}),l.a.createElement("div",{id:"AskDrink"},l.a.createElement(f.a,null,n),l.a.createElement("div",{className:"drinks"},a))}}]),t}(s.Component),w=Object(m.connect)(function(e){return{sendName:function(e,t){e({type:p.a.dataJs.type,dataType:p.a.dataJs.dataType.drink,data:t})}}})(E),C=(n(489),function(e){function t(e){var n;return Object(a.a)(this,t),n=Object(o.a)(this,Object(i.a)(t).call(this,e)),console.log("PROPS : ",e),n.state={name:e.name,drinkObj:e.drinkObj},console.warn("Guest.state",n.state),n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=void 0!==this.props.drinkObj?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{className:"guestDrink"},this.state.name," likes: ",this.state.drinkObj.name," "),l.a.createElement(k,{size:"lg",name:this.state.drinkObj.name,pathOnTablet:this.state.drinkObj.pathOnTablet})):null;return l.a.createElement("div",{className:"Guest"},l.a.createElement("img",{src:this.props.guestPhotoPath,alt:this.state.name}),e)}}]),t}(l.a.Component));n(490);var T=function(e){function t(e){var n;return Object(a.a)(this,t),n=Object(o.a)(this,Object(i.a)(t).call(this,e)),console.log("Present People ",e),n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.viewOk()}},{key:"render",value:function(){var e;if(void 0!==this.props.people.to.length){var t=[];console.log("People TO array : ",this.props.people.to),this.props.people.to.forEach(function(e){console.log("39",e),t.push(l.a.createElement(C,{name:e}))}),e=l.a.createElement("div",null,t)}return l.a.createElement("div",{className:"PresentPerson"},l.a.createElement(C,{drinkObj:this.props.people.who.drink,name:this.props.people.who.name}),e)}}]),t}(s.Component),N=(Object(m.connect)(function(e){return{}},function(e){return{viewOk:function(){e({type:p.a.dataJs.type,data:{status:200}})}}})(T),n(491),n(52)),M=(n(492),n(222)),L=n.n(M),A=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).subButton=l.a.createRef(),n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.inter)}},{key:"componentDidMount",value:function(){var e=this,n=document.querySelector("canvas#canvasOK"),a=n.getContext("2d");n.height=N.findDOMNode(this).clientHeight,n.width=N.findDOMNode(this).clientWidth,a.moveTo(n.width/2,n.height/2);var r=0;this.inter=setInterval(function(){r>2*Math.PI?(clearInterval(e.inter),L.a.Simulate.click(N.findDOMNode(e.subButton))):t.drawToXY(n,n.width*Math.cos(r)+n.height/2,n.height*Math.sin(r)+n.height/2),r+=.005},1e3*this.props.timeout/628)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"AutoValidationButton"},l.a.createElement(u.a,{color:this.props.color,onClick:this.props.onClick,ref:function(t){return e.subButton=t}},l.a.createElement("span",null,this.props.children),l.a.createElement("canvas",{id:"canvasOK"})))}}],[{key:"drawToXY",value:function(e,t,n){var a=e.getContext("2d");a.beginPath(),a.moveTo(e.width/2,e.height/2),a.lineTo(t,n),a.strokeStyle="rgb(244,248,255)",a.stroke()}}]),t}(s.Component),V=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.textToShow||"Are you sure that you want X?";return l.a.createElement("div",{className:"Confirm"},l.a.createElement(f.a,null,t),l.a.createElement("div",{className:"choices"},l.a.createElement(u.a,{onClick:function(){return e.props.handleNoClick(e.props.dispatch)},color:"no"},"No"),l.a.createElement(A,{onClick:function(){return e.props.handleYesClick(e.props.dispatch)},color:"ok",timeout:10},"Yes")))}}]),t}(s.Component),x=Object(m.connect)(function(e){return{handleNoClick:function(e){e({type:p.a.dataJs.type,dataType:p.a.dataJs.dataType.confirm,data:!1})},handleYesClick:function(e){e({type:p.a.dataJs.type,dataType:p.a.dataJs.dataType.confirm,data:!0})}}})(V),P=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,"Il me faut du coca, ...")}}]),t}(s.Component),D=(n(494),n(495),function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=null,t=null,n=null,a=null,r=null,o=null;if(this.props.title&&(n=l.a.createElement(f.a,null,this.props.title)),this.props.image&&(t=l.a.createElement("img",{src:this.props.image.pathOnTablet,alt:this.props.image.alternative})),this.props.video&&(e=l.a.createElement("img",{src:this.props.video.pathOnTablet,alt:this.props.video.alternative})),this.props.content&&(o=this.props.content),(this.props.video||this.props.image)&&(r=l.a.createElement("div",{className:"media"},t,e)),this.props.list){var i=[];this.props.list.forEach(function(e){i.push(l.a.createElement("li",null,e))}),a=l.a.createElement("ol",null,i)}return this.props.noContainer?l.a.createElement(l.a.Fragment,null,n,r,o,a):l.a.createElement("div",{className:"Generic"},n,r,o,a)}}]),t}(s.Component)),I=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.viewOk()}},{key:"render",value:function(){this.props.textToShow;return l.a.createElement("div",{className:"Goto"},l.a.createElement(D,{image:this.props.location,title:this.props.textToShow}))}}]),t}(s.Component),R=Object(m.connect)(function(e){return{}},function(e){return{viewOk:function(){e({type:p.a.dataJs.type,data:{status:200}})}}})(I),H=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null)}}]),t}(s.Component),J=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null)}}]),t}(s.Component),B=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.viewOk()}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(f.a,null,this.props.textToShow))}}]),t}(s.Component),F=Object(m.connect)(function(e){return{}},function(e){return{viewOk:function(){e({type:p.a.dataJs.type,data:{status:200}})}}})(B);n(496);var _=function(e){return l.a.createElement("img",{className:"Location",src:e.obj.pathOnTablet,alt:e.obj.name})},W=(n(497),function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.viewOk()}},{key:"render",value:function(){var e=this.props.textToShow||"Please follow me";return console.log("AskToFollow props",this.props),l.a.createElement("div",{className:"AskToFollow"},l.a.createElement(f.a,null,e),l.a.createElement(_,{obj:this.props.location}))}}]),t}(s.Component)),K=Object(m.connect)(function(e){return{}},function(e){return{viewOk:function(){e({type:p.a.dataJs.type,data:{status:200}})}}})(W),q=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null)}}]),t}(s.Component),G=n(101),U=n(223),Y=(n(591),function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={remainingTime:n.props.time,elapsedTime:0},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this,n=setInterval(function(){t.setState(function(e){return Object(O.a)({},e,{remainingTime:e.remainingTime-1,elapsedTime:e.elapsedTime+1})},function(){0===t.state.remainingTime&&(clearInterval(n),e.props.viewOk())})},1e3)}},{key:"render",value:function(){var e=this.props.textToShow;""===e&&(e="I'm waiting for ");var t={labels:["",""],datasets:[{data:[this.props.time-this.state.elapsedTime,this.state.elapsedTime],backgroundColor:["#12c4ff","rgba(54,162,235,0)"]}]},n=l.a.createElement(U.a,{data:t,options:{elements:{arc:{borderWidth:0}},legend:{display:!1},tooltips:{enabled:!1},responsive:!0,scales:{xAxes:[{display:!1}],yAxes:[{display:!1}]}}});return l.a.createElement("div",{id:"Wait"},l.a.createElement(f.a,null,e),l.a.createElement("div",{id:"chart"},l.a.createElement("span",{className:"timer"},this.state.remainingTime),n))}}]),t}(s.Component)),X=Object(m.connect)(function(e){return{}},function(e){return{viewOk:function(){e({type:p.a.dataJs.type,data:{status:200}})}}})(Y),Q=(n(592),function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"AskOpenDoor"},l.a.createElement(f.a,null,this.props.textToShow.title),l.a.createElement("div",null,l.a.createElement("ul",{className:"description"},this.props.textToShow.description.map(function(e){return l.a.createElement("li",null,e)})),l.a.createElement("div",null,l.a.createElement(u.a,{onClick:this.props.handleClick},"Next"))))}}]),t}(s.Component)),z=Object(m.connect)(function(){return{}},function(e){return{handleClick:function(){e({type:p.a.dataJs.type,data:{}})}}})(Q),Z=(n(593),function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.textToShow||"[PLACEHOLDER] I'm waiting for a human";return l.a.createElement("div",{className:"CallHuman"},l.a.createElement(f.a,null,e),l.a.createElement(u.a,{onClick:this.props.humanIsHere},"I'm here"),l.a.createElement(X,{time:this.props.time}))}}]),t}(s.Component)),$=Object(m.connect)(function(e){return{}},function(e){return{humanIsHere:function(){e({type:p.a.dataJs.type,data:{}})}}})(Z),ee=(n(594),function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e,t=this.props.textToShow||{title:"Please reproduce the videos",description:["A","B","C","D"]},n=l.a.createElement("video",{autoPlay:!0,loop:!0,muted:!0,src:this.props.video.pathOnTablet});switch(this.props.video.format){case"16/9":e=l.a.createElement("div",{className:"ShowVideo large"},l.a.createElement(f.a,null,t.title),l.a.createElement(u.a,{onClick:this.props.viewOk},"I'm done"),l.a.createElement("div",{className:"bottom"},l.a.createElement("div",{className:"video large"},n),l.a.createElement("ol",{className:"description",id:"steps"},t.description.map(function(e){return l.a.createElement("li",null,e)}))));break;case"4/3":e=l.a.createElement("div",{className:"ShowVideo tail"},l.a.createElement("div",{className:"video tail"},n),l.a.createElement("div",{className:"text tall"},l.a.createElement(f.a,null,t.title),l.a.createElement(u.a,{onClick:this.props.viewOk},"I'm done"),l.a.createElement("ol",{className:"description",id:"steps"},t.description.map(function(e){return l.a.createElement("li",null,e)}))))}return e}}]),t}(s.Component)),te=Object(m.connect)(function(e){return{}},function(e){return{viewOk:function(){e({type:p.a.dataJs.type,data:{status:200}})}}})(ee);n.d(t,"b",function(){return ne}),n.d(t,"a",function(){return re});var ne=function(e){return ae[e]||G.a},ae={askName:g,askDrink:w,askAge:j,confirm:x,detailDrinks:P,presentPerson:T,goTo:R,generic:D,findAvailableDrinks:H,findWhoWantsDrinks:J,serveDrinks:q,seatGuest:F,askToFollow:K,mainMenu:G.a,wait:X,askOpenDoor:z,callHuman:$,showVideo:te},re=function(){return Object.keys(ae)}},14:function(e,t,n){"use strict";var a=n(42),r=n.n(a),o=n(59),i=n(2),c=n(3),s=n(5),l=n(36),u=n(26),p=n(219),m=n(27),d=n(24),b=function(){function e(t,n){Object(i.a)(this,e),Object.defineProperty(this,f,{writable:!0,value:void 0}),Object.defineProperty(this,v,{writable:!0,value:void 0}),Object(s.a)(this,f)[f]=t,Object(s.a)(this,v)[v]=n,Object(s.a)(e,h)[h]=this}return Object(c.a)(e,[{key:"listen",value:function(t,n){var a=this;return new Promise(function(r){return Object(s.a)(a,v)[v].subscriber(t).then(function(a){a.signal.connect(function(e){n(JSON.parse(e))}),e.logger.event("Listen at",t),r()})})}},{key:"setALValue",value:function(t,n){n=e.toJson(n),e.logger.event("Set ALValue on "+t,n),Object(s.a)(this,v)[v].insertData(t,n)}},{key:"getAlValue",value:function(){var t=Object(o.a)(r.a.mark(function t(n){var a,o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(s.a)(this,v)[v].getData(n),t.next=3,a;case 3:return o=t.sent,e.logger.event("getAlValue from ".concat(n),o),t.abrupt("return",a);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"raise",value:function(t,n){return n=e.toJson(n),t.includes("R2019/Global/LmLogger")?e.logger.log("Send on ".concat(t),n,!1):n.includes("eartbeat")?e.logger.heartbeat("Send on ".concat(t),n,!0):e.logger.event("Send on ".concat(t),n,!0),Object(s.a)(this,v)[v].raiseEvent(t,n)}}],[{key:"getInstanceSync",value:function(){return Object(s.a)(e,h)[h]}},{key:"toJson",value:function(e){return JSON.stringify(e)}},{key:"createInstance",value:function(){return new Promise(function(t){if(!p.naoqiIsPresent)return t(new g);QiSession(function(){var n=Object(o.a)(r.a.mark(function n(a){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.service("ALMemory").then(function(){var n=Object(o.a)(r.a.mark(function n(o){var i;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=new e(a,o),Object(s.a)(e,h)[h]=i,e.logger.log("QiWrapper : ",i),n.abrupt("return",t(i));case 4:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}());case 2:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}())})}},{key:"listen",value:function(t,n){return e.getInstanceSync().listen(t,n)}},{key:"setALValue",value:function(t,n){d.a.get().imPepper&&e.getInstanceSync().setALValue(t,n)}},{key:"getALValue",value:function(t){return e.getInstanceSync().getAlValue(t)}},{key:"raise",value:function(t,n){return d.a.get().imPepper?e.getInstanceSync().raise(t,n):Promise.resolve()}},{key:"instance",set:function(t){Object(s.a)(e,h)[h]=t}}]),e}(),h=Object(l.a)("instance"),f=Object(l.a)("session"),v=Object(l.a)("AlMemory");Object.defineProperty(b,h,{writable:!0,value:void 0}),b.logger=new m.a(u.QiWrapper,"QiWrapper");var g=function(){function e(t){Object(i.a)(this,e),Object.defineProperty(this,O,{writable:!0,value:void 0}),b.instance=this,Object(s.a)(this,O)[O]=new WebSocket(t,"json")}return Object(c.a)(e,[{key:"raise",value:function(t,n){e.warningMessage()}},{key:"listen",value:function(t,n){e.warningMessage()}},{key:"setALValue",value:function(t,n){e.warningMessage()}},{key:"getAlValue",value:function(t,n){e.warningMessage()}}],[{key:"warningMessage",value:function(){}}]),e}(),O=Object(l.a)("client");t.a=b},219:function(e){e.exports={naoqiIsPresent:!0}},22:function(e,t,n){"use strict";var a=n(2),r=n(3),o=n(7),i=n(6),c=n(8),s=n(0),l=n.n(s),u=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("h2",{className:"ComponentTitle"},this.props.children)}}]),t}(s.Component);t.a=u},225:function(e,t,n){e.exports=n.p+"static/media/internetError.d78a4b0b.svg"},226:function(e,t,n){e.exports=n.p+"static/media/muteMicro.34690a2b.svg"},227:function(e,t,n){e.exports=n.p+"static/media/pcProblem.55978f42.svg"},228:function(e,t,n){e.exports=n(229)},229:function(e,t,n){"use strict";n.r(t);n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(107),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(266),n(267),n(138),n(268),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(306),n(307),n(308),n(309),n(310),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(189),n(326),n(327),n(328),n(329),n(190),n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(338),n(339),n(340),n(341),n(342),n(343),n(346),n(347),n(348),n(349),n(350),n(351),n(352),n(353),n(354),n(355),n(356),n(357),n(358),n(359),n(360),n(361),n(362),n(363),n(364),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(372),n(373),n(374),n(375),n(376),n(149),n(377),n(378),n(379),n(380),n(381),n(382),n(383),n(384),n(385),n(386),n(387),n(388),n(389),n(390),n(391),n(393),n(394),n(395),n(396),n(397),n(398),n(399),n(400),n(401),n(402),n(403),n(404),n(405),n(406),n(407),n(408),n(409),n(410),n(411),n(412),n(414),n(415),n(416),n(418),n(419),n(420),n(421),n(422),n(423),n(424),n(425),n(426),n(427),n(428),n(429),n(430),n(431),n(432),n(433),n(434),n(435),n(436),n(437),n(438),n(439),n(440),n(441),n(442),n(443),n(444),n(445),n(446),n(447),n(448),n(449),n(450),n(451),n(452),n(453),n(454),n(455),n(456),n(457),n(458),n(459),n(460),n(461),n(462),n(464),n(465),n(466),n(467),n(469),n(203),n(470);var a=n(42),r=n.n(a),o=n(59),i=n(0),c=n.n(i),s=n(52),l=n.n(s),u=(n(478),n(14)),p=n(24);function m(){return(m=Object(o.a)(r.a.mark(function e(){var t,a,o,i,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.createInstance();case 2:return t=e.sent,e.next=5,p.a.setConfigFromALMemory();case 5:n(479).default.initBridge(t),a=n(604).default,o=n(13).Provider,i=n(44).default,s=n(605).default,l.a.render(c.a.createElement(o,{store:i()},c.a.createElement(a,null),c.a.createElement(s,null)),document.getElementById("root"));case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}(function(){return m.apply(this,arguments)})().then(function(){console.log("App Loaded");var e=p.a.get().apis.tabletLM;u.a.raise(e.tabletOperational.ALMemory,{time:Date.now()})})},24:function(e,t,n){"use strict";var a=n(42),r=n.n(a),o=n(59),i=n(2),c=n(3),s=n(5),l=n(36),u=n(14),p=n(27),m=function e(t){"string"!==typeof t&&Object.keys(t).forEach(function(n){e(t[n])});Object.freeze(t)},d=n(0),b=n.n(d),h=n(52),f=n.n(h);n.d(t,"a",function(){return v});var v=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,null,[{key:"init",value:function(){var t=navigator.userAgent;["Chrome/44.0.2403.157","Chrome/39.0.2171.71"].forEach(function(n){Object(s.a)(e,S)[S]=Object(s.a)(e,S)[S]||t.includes(n)}),console.log("init done",Object(s.a)(e,S)[S])}},{key:"setConfigFromALMemory",value:function(){var t=Object(o.a)(r.a.mark(function t(){var n,a,o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.init(),t.prev=1,t.t0=JSON,t.next=5,u.a.getALValue("R2019/Api/Common");case 5:return t.t1=t.sent,t.t2=t.t0.parse.call(t.t0,t.t1),Object(s.a)(e,j)[j]={common:t.t2,tabletLM:null,generalManagerHRI:null},t.t3=JSON,t.next=11,u.a.getALValue(Object(s.a)(e,j)[j].common.AL_VALUE.apis.tabletLM);case 11:return t.t4=t.sent,Object(s.a)(e,j)[j].tabletLM=t.t3.parse.call(t.t3,t.t4),t.t5=JSON,t.next=16,u.a.getALValue(Object(s.a)(e,j)[j].common.AL_VALUE.apis.generalManagerHRI);case 16:return t.t6=t.sent,Object(s.a)(e,j)[j].generalManagerHRI=t.t5.parse.call(t.t5,t.t6),t.t7=JSON,t.next=21,u.a.getALValue(Object(s.a)(e,j)[j].common.AL_VALUE.images);case 21:return t.t8=t.sent,Object(s.a)(e,y)[y]=t.t7.parse.call(t.t7,t.t8),t.t9=JSON,t.next=26,u.a.getALValue(Object(s.a)(e,j)[j].common.AL_VALUE.locations);case 26:return t.t10=t.sent,Object(s.a)(e,O)[O]=t.t9.parse.call(t.t9,t.t10),t.t11=JSON,t.next=31,u.a.getALValue(Object(s.a)(e,j)[j].common.AL_VALUE.videos);case 31:t.t12=t.sent,n=t.t11.parse.call(t.t11,t.t12),Object(s.a)(e,g)[g]={},n.forEach(function(t){Object(s.a)(e,g)[g][t.id]=t.pathOnTablet}),a=e.get(),m(a),e.logger.log("ConfigWrapper logged from Naoqi",a),t.next=46;break;case 40:t.prev=40,t.t13=t.catch(1),console.error("Error in ConfigWrapper",t.t13),o={backgroundColor:"#FFF",color:"#F00",display:"block",position:"absolute",top:0,left:0},f.a.render(b.a.createElement("p",{style:o},"Error while initialising ALMemory (Config) : can't read Common API in ALMemories, make sure that Local manager is started"),document.querySelector("body")),console.log("Done");case 46:case"end":return t.stop()}},t,null,[[1,40]])}));return function(){return t.apply(this,arguments)}}()},{key:"get",value:function(){return{locations:Object(s.a)(e,O)[O],videos:Object(s.a)(e,g)[g],images:Object(s.a)(e,y)[y],imPepper:Object(s.a)(e,S)[S],apis:{common:Object(s.a)(e,j)[j].common,tabletLM:Object(s.a)(e,j)[j].tabletLM,generalManagerHRI:Object(s.a)(e,j)[j].generalManagerHRI}}}}]),e}(),g=Object(l.a)("_videos"),O=Object(l.a)("_locations"),y=Object(l.a)("_images"),j=Object(l.a)("_apis"),S=Object(l.a)("_imPepper");Object.defineProperty(v,g,{writable:!0,value:void 0}),Object.defineProperty(v,O,{writable:!0,value:void 0}),Object.defineProperty(v,y,{writable:!0,value:void 0}),Object.defineProperty(v,j,{writable:!0,value:void 0}),Object.defineProperty(v,S,{writable:!0,value:!1}),v.logger=new p.a(!0,"ConfigWrapper")},26:function(e){e.exports={QiWrapper:!1,ALMemoryBridge:!0,reduxKey:!1,reducer:{time:!1,com:!1,view:!1},TimeBoard:!1,Step:!1,ViewManager:!1,App:!1,Toolbar:!1,ProgressBar:!1,Timer:!1}},27:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(2),r=n(3),o=n(5),i=n(36),c=n(14),s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Object(a.a)(this,e),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),t&&""!==n&&console.info("Logging on "+n),Object(o.a)(this,l)[l]=t,Object(o.a)(this,u)[u]=n}return Object(r.a)(e,[{key:"debug",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(o.a)(this,l)[l]&&(console.debug("".concat(Object(o.a)(this,u)[u],": ").concat(e),t),this.sendToLm(n,e,t,2))}},{key:"log",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(o.a)(this,l)[l]&&(console.log("".concat(Object(o.a)(this,u)[u],": ").concat(e),t),this.sendToLm(n,e,t,3))}},{key:"sendToLm",value:function(e,t,n,a){e&&c.a.raise("R2019/Global/LmLogger",{message:"".concat(t," ").concat(n),application:"".concat(Object(o.a)(this,u)[u]),level:a})}},{key:"warn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(o.a)(this,l)[l]&&(console.warn("".concat(Object(o.a)(this,u)[u],": ").concat(e),t),this.sendToLm(n,e,t,4))}},{key:"error",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(o.a)(this,l)[l]&&(console.error("".concat(Object(o.a)(this,u)[u],": ").concat(e),t),this.sendToLm(n,e,t,5))}},{key:"event",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(o.a)(this,l)[l]&&(console.info("".concat(Object(o.a)(this,u)[u],": ").concat(e),t),this.sendToLm(n,e,t,1))}},{key:"cricical",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(o.a)(this,l)[l]&&(console.error("".concat(Object(o.a)(this,u)[u],": ").concat(e),t),this.sendToLm(n,e,t,6))}},{key:"heartbeat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(o.a)(this,l)[l]&&(console.info("".concat(Object(o.a)(this,u)[u],": ").concat(e),t),this.sendToLm(n,e,t,0))}},{key:"time",value:function(e){Object(o.a)(this,l)[l]&&console.time(e)}},{key:"timeEnd",value:function(e){Object(o.a)(this,l)[l]&&console.timeEnd(e)}}]),e}(),l=Object(i.a)("state"),u=Object(i.a)("label")},28:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(24).a.get().apis.generalManagerHRI,r={passSecond:{type:"PASS_A_SECOND",globalElapsedTime:0},currentStep:{type:a.currentStep.reduxKey},stepSkipped:{type:a.stepSkipped.reduxKey},stepCompleted:{type:a.stepCompleted.reduxKey},timerState:{type:a.timerState.reduxKey,state:a.timerState.state},resetStepsProgression:{type:"R2019/Timeboard/ResetStepsProgression"},replaceAllSteps:{type:"REPLACE_ALL_STEPS",steps:["Steps"]}}},33:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(10),r=n(24).a.get().apis.common,o={toolbarState:{type:r.toolbarState.reduxKey,state:{ok:r.toolbarState.state.ok,error:r.toolbarState.state.error},system:Object(a.a)({},r.toolbarState.system)}}},39:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var a=n(2),r=n(3),o=n(7),i=n(6),c=n(8),s=n(0),l=n.n(s),u=n(13);var p=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.color||"classic",t=this.props.image||"";return l.a.createElement("button",{onClick:this.props.onClick,className:"btn btn-".concat(e)},t,l.a.createElement("p",null,'"',this.props.children,'"'))}}]),t}(s.Component);t.b=Object(u.connect)(function(e){return{}})(p)},44:function(e,t,n){"use strict";n.r(t);var a=n(65),r=n(220),o=n(10),i=n(48),c=n(27),s=n(26),l={currentView:null,currentData:{textToShow:null,choices:[]},componentVisibility:{timeBoard:i.a.setComponentVisibility.state.visible}},u=new c.a(s.reducer.view,"ViewReducer"),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.a.changeView.type:e=Object(o.a)({},e,{currentView:t.view,currentData:t.data});break;case i.a.setComponentVisibility.type:var n=i.a.setComponentVisibility.component.timeBoard;if([n].includes(t.component)){var a=i.a.setComponentVisibility.state;[a.hidden,a.visible].includes(t.state)?t.component===n&&(e=Object(o.a)({},e,{componentVisibility:Object(o.a)({},e.componentVisibility,{timeBoard:t.state})})):u.warn("setComponentVisibility","unknown component visibility state")}else u.warn("setComponentVisibility","unknown component")}return e},m=n(9),d=n(14),b=n(24),h=b.a.get().apis,f=h.generalManagerHRI,v=h.common,g=h.tabletLM,O={lastLocalManagerHeartbeat:null,lastGeneralManagerHeartbeat:null,delayWithPepper:0},y=new c.a(s.reducer.com,"ComReducer"),j=[];Object.keys(m.a).forEach(function(e){return j.push(m.a[e].type)});var S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;if(j.includes(t.type))switch(t.type){case m.a.stepReceived.type:d.a.raise(f.stepReceived.ALMemory,null);break;case m.a.jsHeartbeat.type:d.a.raise(v.jsHeartbeat.ALMemory,Date.now());break;case m.a.dataJs.type:var n=g.dataJs.ALMemory;d.a.raise(n,{dataType:t.dataType,data:t.data,actionId:t.actionId});break;case m.a.extHeartbeat.type:null===e.lastLocalManagerHeartbeat&&void 0!==t.time.lm&&(e.delayWithPepper=Math.floor(Date.now()/1e3)-t.time.lm),e=Object(o.a)({},e,{lastGeneralManagerHeartbeat:t.time.gm,lastLocalManagerHeartbeat:t.time.lm});var a=Date.now()/1e3,r=a-e.lastLocalManagerHeartbeat-e.delayWithPepper,i="No heartbeats from LocalManager since "+r;r>10?y.error(i):r>5&&y.warn(i);var c=a-e.lastGeneralManagerHeartbeat,s="No heartbeats from LocalManager since "+c;c>10?y.error(s):c>5&&y.warn(s),y.debug(a);break;case m.a.askToChangeScenario.type:d.a.raise(f.askToChangeScenario.ALMemory,{scenario:t.scenario})}return e},k=n(125),E=n(33),w={internet:E.a.toolbarState.state.ok,pcConnection:E.a.toolbarState.state.ok,micro:E.a.toolbarState.state.ok,canMove:E.a.toolbarState.state.ok},C=[];Object.keys(E.a).forEach(function(e){return C.push(E.a[e].type)});var T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;if(C.includes(t.type)&&t.type===E.a.toolbarState.type)for(var n=t.state,a=E.a.toolbarState.system,r=0,i=Object.keys(a);r<i.length;r++){var c=i[r];a[c]===t.system&&(e=Object(o.a)({},e,Object(k.a)({},c,n)))}return e},N=n(49),M=n(28),L=n(2),A=n(3),V=n(5),x=n(36),P=function(){function e(){Object(L.a)(this,e)}return Object(A.a)(e,null,[{key:"stopTimer",value:function(){clearInterval(Object(V.a)(e,I)[I]),Object(V.a)(e,I)[I]=void 0}},{key:"startTimer",value:function(){void 0===Object(V.a)(e,I)[I]&&(Object(V.a)(e,D)[D]=Date.now(),Object(V.a)(e,R)[R]=Date.now(),Object(V.a)(e,I)[I]=setInterval(function(){var t=Date.now();z({type:M.a.passSecond.type,globalElapsedTime:e.getElapsedTime(Object(V.a)(e,D)[D],t),timeFromLastEvent:e.getElapsedTime(Object(V.a)(e,R)[R],t)}),e.logger.log(Object(V.a)(e,R)[R]),Object(V.a)(e,R)[R]=t,e.logger.log(Object(V.a)(e,R)[R])},1e3))}},{key:"getElapsedTime",value:function(e,t){return(t-e)/1e3}}]),e}(),D=Object(x.a)("startTime"),I=Object(x.a)("intervalId"),R=Object(x.a)("lastTime");Object.defineProperty(P,D,{writable:!0,value:void 0}),Object.defineProperty(P,I,{writable:!0,value:void 0}),Object.defineProperty(P,R,{writable:!0,value:void 0}),P.logger=new c.a(s.Timer,"Timer");var H=new c.a(s.reducer.time,"TimeReducer"),J=b.a.get().apis.generalManagerHRI,B=function(e,t){e=Object(o.a)({},e);var n=0;return Object.keys(t).forEach(function(a){var r;e.todoSteps.push(Object(o.a)({},{name:(r=t[a]).name,eta:r.eta,id:r.id},{order:n++}))}),e.allSteps=Object(N.a)(e.todoSteps),console.warn("State after init",e),e},F={currentStep:null,todoSteps:[],doneSteps:[],skippedSteps:[],allSteps:[],globalElapsedTime:0,stepElapsedTime:0,haveToReset:!1};function _(){return e=F,JSON.parse(JSON.stringify(e));var e}var W=B(_(),[]),K=[];Object.keys(M.a).forEach(function(e){K.push(M.a[e].type)});var q=function(){var e,t,n,a,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,i=arguments.length>1?arguments[1]:void 0,c=Object(o.a)({},r);if(K.includes(i.type))switch(i.type){case M.a.passSecond.type:void 0!==i.globalElapsedTime&&void 0!==i.timeFromLastEvent?(H.log(M.a.passSecond.type,i.globalElapsedTime),c=Object(o.a)({},c,{globalElapsedTime:i.globalElapsedTime,stepElapsedTime:c.stepElapsedTime+i.timeFromLastEvent})):H.warn(M.a.passSecond.type,"Care no action.globalElapsedTime");break;case M.a.resetStepsProgression.type:c.haveToReset=i.state;break;case M.a.currentStep.type:if(void 0!==i.index){console.log("HEY 1");var s=r.allSteps[i.index];e=c.todoSteps.findIndex(function(e){return e.id===s.id}),console.log("HEY 2",e),c.stepElapsedTime=0;var l=(n=Object(N.a)(r.todoSteps)).splice(e,1)[0];c=Object(o.a)({},c,{currentStep:Object(o.a)({},l),todoSteps:n}),console.warn("HEY 4",c)}else H.warn(M.a.currentStep.type,"Care try to currentStep with an undefined step");break;case M.a.stepCompleted.type:t=Object(N.a)(c.doneSteps),n=Object(N.a)(c.todoSteps),a=c.currentStep,i.indexes.forEach(function(e){var r=c.allSteps[e];c.currentStep.id===r.id&&(a=null);var o=n.findIndex(function(e){return e.id===r.id});o>-1&&n.splice(o,1),t.push(r)}),c=Object(o.a)({},c,{currentStep:a,todoSteps:n,doneSteps:t});break;case M.a.stepSkipped.type:t=Object(N.a)(c.doneSteps),a=c.currentStep,i.indexes.forEach(function(e){var n=c.allSteps[e];c.currentStep.id===n.id&&(a=null),t.push(c.allSteps[e])}),c=Object(o.a)({},c,{currentStep:a,doneSteps:t});break;case M.a.timerState.type:var u=J.timerState.state,p=u.on,m=u.off;if([p,m].includes(i.state))switch(i.state){case p:P.startTimer();break;case m:P.stopTimer()}else H.warn("ToggleTimer","Unknown ALMstate for timerState");break;case M.a.replaceAllSteps.type:H.debug("You are un replaceAllSteps reducer",i),void 0!==i.steps.length&&(H.debug("replace B",c),c=B(_(),i.steps),H.debug("replace A",c),console.warn(2,c,i.steps))}return c},G=n(126),U={current:{name:"None"}},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;return t.type===G.a.currentScenario.type&&(e=Object(o.a)({},e,{current:{name:t.scenarioName}})),e},X=n(161);n.d(t,"dispatch",function(){return z}),n.d(t,"store",function(){return Q});var Q,z=null;t.default=function(){if(void 0===Q){var e;if(s.redux){var t=Object(r.createLogger)({level:"info",diff:!1,duration:!0});e=Object(a.createStore)(Object(a.combineReducers)({view:p,toolbar:T,com:S,time:q,scenario:Y}),{},Object(X.composeWithDevTools)(Object(a.applyMiddleware)(t)))}else e=Object(a.createStore)(Object(a.combineReducers)({view:p,toolbar:T,com:S,time:q,scenario:Y}),{},Object(X.composeWithDevTools)());z=e.dispatch,Q=e}return Q}},478:function(e,t,n){},479:function(e,t,n){"use strict";n.r(t),n.d(t,"getScenarioSteps",function(){return j}),n.d(t,"getStepByName",function(){return S}),n.d(t,"default",function(){return k});var a=n(42),r=n.n(a),o=n(59),i=n(2),c=n(44),s=n(26),l=n(48),u=n(24),p=n(14),m=n(28),d=n(27),b=n(33),h=n(126),f=n(9),v=u.a.get().apis,g=v.tabletLM,O=v.common,y=v.generalManagerHRI,j=function(){return c.store.getState().scenario.current.steps},S=function(e){var t=j();return t[t.findIndex(function(t){return t.name=e})]},k=function e(){Object(i.a)(this,e)};k.logger=new d.a(s.ALMemoryBridge,"AlMemoryBridge"),k.initBridge=function(){var e=O.toolbarState;Promise.all([p.a.listen(e.ALMemory,k.handleToolbarChange(e)),p.a.listen(y.currentStep.ALMemory,k.handleChangeCurrentStep()),p.a.listen(y.stepCompleted.ALMemory,k.handleStepCompleted()),p.a.listen(y.stepSkipped.ALMemory,k.handleSetStepSkipped()),p.a.listen(y.timerState.ALMemory,k.handleToggleTimer()),p.a.listen(y.currentScenario.ALMemory,k.handleChangeCurrentScenario()),p.a.listen(g.currentView.ALMemory,k.handleChangeCurrentView()),p.a.listen(y.resetSteps.ALMemory,k.handleResetSteps())]).then(function(){setInterval(Object(o.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.raise(O.jsHeartbeat.ALMemory,{time:Date.now()});case 2:return e.t0=c.dispatch,e.t1=f.a.extHeartbeat.type,e.t2=JSON,e.next=7,p.a.getALValue(O.localManagerHeartbeat.ALMemory);case 7:e.t3=e.sent,e.t4=e.t2.parse.call(e.t2,e.t3).time,e.t5={lm:e.t4},e.t6={type:e.t1,time:e.t5},(0,e.t0)(e.t6);case 12:case"end":return e.stop()}},e)})),1e3)})},k.handleChangeCurrentView=function(){return function(e){k.logger.log("handleChangeCurrentView",e),void 0===e.view&&void 0===e.data||Object(c.dispatch)({type:l.a.changeView.type,view:e.view,data:e.data})}},k.handleChangeCurrentScenario=function(){return function(e){k.logger.log("handleChangeCurrentScenario",e),Object(c.dispatch)({type:h.a.currentScenario.type,scenarioName:e.scenarioName}),Object(c.dispatch)({type:m.a.replaceAllSteps.type,steps:e.stepsList})}},k.handleToggleTimer=function(){return function(e){[m.a.timerState.state.on,m.a.timerState.state.off].includes(e.state)?Object(c.dispatch)({type:m.a.timerState.type,state:e.state}):k.logger.warn("Unknown mode for timerState")}},k.handleSetStepSkipped=function(){return function(e){k.logger.log("handleSetStepSkipped",e),Object(c.dispatch)({type:m.a.stepSkipped.type,indexes:e.indexes})}},k.handleStepCompleted=function(){return function(e){k.logger.log("handleStepCompleted",e),Object(c.dispatch)({type:m.a.stepCompleted.type,indexes:e.indexes})}},k.handleChangeCurrentStep=function(){return function(e){k.logger.log("handleStepCompleted",e),Object(c.dispatch)({type:m.a.currentStep.type,index:e.index})}},k.handleToolbarChange=function(e){return function(t){if(k.logger.log("handleToolbarChange",t),[e.state.ok,e.state.error].includes(t.state)){var n=[];Object.keys(e.system).forEach(function(e){n.push(O.toolbarState.system[e])}),n.includes(t.system)?Object(c.dispatch)({type:b.a.toolbarState.type,system:t.system,state:t.state}):k.logger.warn("Listen toolbarState","Unknown data.system")}else k.logger.warn("Listen toolbarState","Unknown data.state")}},k.handleResetSteps=function(){return function(e){k.logger.log("handleResetSteps",e),Object(c.dispatch)({type:m.a.resetStepsProgression.type,state:!0})}}},48:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a={changeView:{type:n(24).a.get().apis.tabletLM.currentView.reduxKey},setComponentVisibility:{type:"SET_COMPONENT_VISIBILITY",component:{timeBoard:"TIMEBOARD"},state:{visible:"VISIBLE",hidden:"HIDE"}}}},484:function(e,t,n){},485:function(e,t,n){},486:function(e,t,n){},487:function(e,t,n){},488:function(e,t,n){},489:function(e,t,n){},490:function(e,t,n){},491:function(e,t,n){},492:function(e,t,n){},494:function(e,t,n){},495:function(e,t,n){},496:function(e,t,n){},497:function(e,t,n){},498:function(e,t,n){},591:function(e,t,n){},592:function(e,t,n){},593:function(e,t,n){},594:function(e,t,n){},595:function(e,t,n){},596:function(e,t,n){},597:function(e,t,n){},598:function(e,t,n){},599:function(e,t,n){},600:function(e,t,n){},601:function(e,t,n){},602:function(e,t,n){},603:function(e,t,n){},604:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(3),o=n(7),i=n(6),c=n(8),s=n(0),l=n.n(s),u=n(10),p=n(13),m=n(27),d=n(26),b=(n(484),n(127)),h=n(101);var f=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={currentView:n.props.view.currentView,currentScenario:n.props.scenario.current,currentData:n.props.view.currentData},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidCatch",value:function(e,t){console.error("Error in ViewManager",e,t)}},{key:"render",value:function(){var e;e=null===this.state.currentView?l.a.createElement(h.a,null,"Please click on the scenario"):l.a.createElement(Object(b.b)(this.state.currentView),Object(u.a)({},this.state.currentData)),t.logger.log("render",e);var n="ViewManager";return n+=this.props.className?this.props.className:"",l.a.createElement("div",{className:n},e)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.view.currentView!==t.currentView||e.view.currentData!==t.currentData?{currentView:e.view.currentView,currentData:e.view.currentData}:e.scenario.current!==t.currentScenario?{currentScenario:e.scenario.current}:null}}]),t}(s.Component);f.logger=new m.a(d.ViewManager,"ViewManager");var v=Object(p.connect)(function(e){return{view:e.view,scenario:e.scenario}})(f),g=n(49),O=(n(595),n(596),{r:102,g:226,b:23}),y=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).changeCurrentValue=function(e){n.setState(function(t){return Object(u.a)({},t,{current:e})},function(){return t.logger.log("changeCurrentValue : New state : ",n.state)})},n.state={max:e.max,current:e.current,color:Object(u.a)({},O)},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=0;this.state.current>=0&&this.state.max>0&&(e=Math.round(this.state.current/this.state.max*100));var n=this.state.color,a=Math.round(255/this.state.max);e>70&&e<=100&&t.addToColor(n,"r",a),e>100&&t.removeToColor(n,"g",a);var r={width:"".concat(e=e<100?e:100,"%"),backgroundColor:t.convertToHex(n)},o="ProgressBar";return this.props.className&&(o+=" ".concat(this.props.className)),l.a.createElement("div",{className:o,style:r})}}],[{key:"addToColor",value:function(e,t,n){void 0!==e[t]&&(e[t]=e[t]+n<255?e[t]+n:255)}},{key:"removeToColor",value:function(e,t,n){void 0!==e[t]&&(e[t]=e[t]-n>0?e[t]-n:0)}},{key:"convertToHex",value:function(e){function t(e){var t=e.toString(16);return 1===t.length&&(t="0"+t),t}return"#".concat(t(e.r)).concat(t(e.g)).concat(t(e.b))}}]),t}(s.Component);y.defaultProps={current:-1},y.logger=new m.a(d.ProgressBar,"ProgressBar");var j=y,S=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={id:e.step.id,order:e.step.order,currentTime:e.time.stepElapsedTime,progressBarRef:l.a.createRef(),progressBarKey:Date.now(),resetFunc:n.reset},t.logger.log("Constructor : time :",e.time),t.logger.log("Constructor : state :",n.state),n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"reset",value:function(){return Object(u.a)({},this.state,{progressBarKey:Date.now(),currentTime:0})}},{key:"render",value:function(){var e=void 0!==this.state.currentTime?this.state.currentTime:0,n="Step ".concat(this.props.step.status),a=Math.round(this.props.step.eta-e);return t.logger.log("Render ETA",this.props.step.eta),l.a.createElement("div",{className:n},l.a.createElement("p",null,this.props.step.name," ")," ",l.a.createElement("span",{className:"eta"},a,"s"),l.a.createElement(j,{ref:this.state.progressBarRef,current:e,key:this.state.progressBarKey,max:this.props.step.eta}))}}],[{key:"getDerivedStateFromProps",value:function(e,n){return!0===e.time.haveToReset&&n.resetFunc(),e.time.currentStep&&e.time.currentStep.order===n.order?(n.progressBarRef.current&&(t.logger.log("Time",e.time),n.progressBarRef.current.changeCurrentValue(e.time.stepElapsedTime)),Object(u.a)({},n,{currentTime:e.time.stepElapsedTime})):null}}]),t}(s.Component);S.Status={done:"done",todo:"todo",current:"current",skipped:"skipped"},S.defaultProps={},S.logger=new m.a(d.Step,"Step");var k=Object(p.connect)(function(e){return{time:e.time}})(S),E=(n(597),n(48)),w=n(22),C=n(44),T=n(28);var N=function(e){function t(e){var n;Object(a.a)(this,t),n=Object(o.a)(this,Object(i.a)(t).call(this,e)),t.logger.log("constructor",n.props);var r=t.createStepFromProps(e);return n.state={sortedSteps:r,globalElapsedTime:e.time.globalElapsedTime,doneSteps:Object(g.a)(e.time.doneSteps),skippedSteps:Object(g.a)(e.time.skippedSteps),todoSteps:Object(g.a)(e.time.todoSteps),visible:e.view.componentVisibility.timeBoard,parentDiv:null},t.logger.log("constructor",n.state),n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){console.log(t.stepsElems)}},{key:"render",value:function(){var e="TimeBoard ";e+=this.props.className?this.props.className:"",this.state.parentDiv&&(this.state.visible===E.a.setComponentVisibility.state.hidden?this.state.parentDiv.classList.add("hidden"):this.state.parentDiv.classList.remove("hidden"));var n=[];return t.stepsElems.length=0,this.state.sortedSteps.forEach(function(e,t){n.push(l.a.createElement(k,{step:e,key:t}))}),n.length>0?l.a.createElement("div",{className:e},l.a.createElement(w.a,null,"Steps"),l.a.createElement("div",{id:"steps"},n)):l.a.createElement("div",{className:e+" hidden"})}}],[{key:"compareSteps",value:function(e,t){if(e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(void 0!==e[n]&&void 0!==t[n]&&e[n].status!==t[n].status)return!0;return!1}},{key:"getDerivedStateFromProps",value:function(e,n){if(!0===e.time.haveToReset&&Object(C.dispatch)({type:T.a.resetStepsProgression.type,state:!1}),n.visible!==e.view.componentVisibility.timeBoard)return{visible:e.view.componentVisibility.timeBoard===E.a.setComponentVisibility.state.visible};var a=t.createStepFromProps(e);if(t.compareSteps(a,n.sortedSteps)){var r=e.time.doneSteps.length;if(r>3){var o=document.querySelector(".Step");console.log("Scrolling to ",r-3,(r-3)*o.clientHeight),document.querySelector("div#steps").scrollTop=(r-3)*o.clientHeight}return{sortedSteps:t.createStepFromProps(e),globalElapsedTime:e.time.globalElapsedTime,doneSteps:Object(g.a)(e.time.doneSteps),skippedSteps:Object(g.a)(e.time.skippedSteps),todoSteps:Object(g.a)(e.time.todoSteps)}}return null}},{key:"createStepFromProps",value:function(e){var t=[];return e.time.doneSteps.forEach(function(e){t.push(Object(u.a)({},e,{status:k.Status.done}))}),null!==e.time.currentStep&&t.push(Object(u.a)({},e.time.currentStep,{status:k.Status.current})),e.time.todoSteps.forEach(function(e){t.push(Object(u.a)({},e,{status:k.Status.todo}))}),e.time.skippedSteps.forEach(function(e){t.push(Object(u.a)({},e,{status:k.Status.skipped}))}),t.sort(function(e,t){return e.order<t.order?-1:1})}}]),t}(s.Component);N.logger=new m.a(d.TimeBoard,"TimeBoard"),N.stepsElems=[];var M=Object(p.connect)(function(e){return{time:e.time,view:e.view}})(N),L=(n(598),n(599),function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e="Icon";return this.props.animation&&(e+=" animated"),l.a.createElement("img",{className:e,src:this.props.image,alt:this.props.description,title:this.props.copyright})}}]),t}(s.Component)),A=(n(600),n(225)),V=n.n(A),x=n(226),P=n.n(x),D=n(227),I=n.n(D),R=n(33),H=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={infos:e.toolbar},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){t.logger.log("Render",this.props);var e="Toolbar";e+=this.props.className?this.props.className:"";var n=[];return this.state.infos.internet===R.a.toolbarState.state.error&&n.push(l.a.createElement(L,{image:V.a,description:"An error occured with the internet connection",animation:!1,copyright:"Icons made by surang from https://www.flaticon.com/",key:0})),this.state.infos.micro===R.a.toolbarState.state.error&&n.push(l.a.createElement(L,{image:P.a,description:"Pepper can't hear you",animation:!0,copyright:"Icons made by Smashicons from https://www.flaticon.com/",key:1})),this.state.infos.pcConnection===R.a.toolbarState.state.error&&n.push(l.a.createElement(L,{image:I.a,description:"Pepper can't connect to the laptop",animation:!1,copyright:"Icons made by monkik from https://www.flaticon.com/",key:2})),n.length>0?l.a.createElement("div",{className:e},l.a.createElement("div",{id:"icons"},n)):null}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.toolbar!==t.infos?Object(u.a)({},t,{infos:e.toolbar}):null}}]),t}(s.Component);H.logger=new m.a(d.Toolbar,"Toolbar");var J=Object(p.connect)(function(e){return{toolbar:e.toolbar}})(H),B=n(24),F=(n(601),(B.a.get()||[]).images),_=(s.Component,function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).nbClickForDebug=0,n.state={scenario:n.props.scenario.current},n.askForDebug=function(){n.nbClickForDebug++,n.nbClickForDebug>10&&(document.querySelector("div.scenarioTitle").style.color="#F00",document.ontouchmove=function(){})},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){document.ontouchmove=function(e){e.preventDefault()}}},{key:"render",value:function(){var e;return e=void 0!==this.state.scenario?this.state.scenario.name:"No scenario loaded",l.a.createElement("div",{className:"App"},l.a.createElement("div",{className:"component leftPart"},l.a.createElement(M,null)),l.a.createElement("div",{id:"rightPart"},l.a.createElement("div",{id:"header"},l.a.createElement("div",{className:"component scenarioTitle",onClick:this.askForDebug},l.a.createElement("h1",null,e)),l.a.createElement("div",{className:"component"},l.a.createElement(J,null)),l.a.createElement("div",{className:"component logos"})),l.a.createElement("div",{className:"component main"},l.a.createElement(v,null))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.scenario.current!==t.scenario?{scenario:e.scenario.current}:null}}]),t}(s.Component));_.logger=new m.a(d.App,"App");t.default=Object(p.connect)(function(e){return{scenario:e.scenario}})(_)},605:function(e,t,n){"use strict";n.r(t);var a=n(10),r=n(2),o=n(3),i=n(7),c=n(6),s=n(8),l=n(0),u=n.n(l),p=n(13),m=n(33),d=n(48),b=n(9),h=(n(602),n(24)),f=n(14),v=n(127),g=(n(603),h.a.get().apis.tabletLM),O=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(i.a)(this,Object(c.a)(t).call(this,e))).handleSelectChange=function(e){e.persist(),n.setState(function(t){return Object(a.a)({},t,{currentViewSelected:e.target.value})})},n.handleJsonChange=function(e){e.persist(),n.setState(function(t){return Object(a.a)({},t,{currentJson:e.target.value})})},n.handleSubmit=function(e){e.preventDefault();var t=n.state.currentJson.replaceAll("[\n\t]","");f.a.raise(g.currentView.ALMemory,{data:JSON.parse(t),view:n.state.currentViewSelected})},n.state={currentViewSelected:null,currentJson:JSON.stringify({textToShow:"",imagePath:"",choices:[],people:{who:{drinkName:"",name:""},to:{drinkName:"",name:""}},location:"",video:"",time:0},null,4)},n}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=[];return Object(v.a)().forEach(function(e){t.push(u.a.createElement("option",{value:e},e))}),u.a.createElement("div",{id:"ViewSimulator"},u.a.createElement("form",{action:"",onSubmit:function(t){return e.handleSubmit(t)}},u.a.createElement("div",null,u.a.createElement("label",{htmlFor:"select"},"Select a view"),u.a.createElement("select",{value:this.state.currentViewSelected,id:"select",onChange:function(t){return e.handleSelectChange(t)}},t)),u.a.createElement("div",null,u.a.createElement("label",{htmlFor:"textArea"},"Write Data in JSON"),u.a.createElement("textarea",{id:"textArea",onChange:function(t){return e.handleJsonChange(t)},value:this.state.currentJson})),u.a.createElement("button",{className:"btn-info",type:"submit"},"Change View")))}}]),t}(l.Component),y=n(22),j=h.a.get(),S=j.apis,k=S.common,E=S.tabletLM,w=S.generalManagerHRI,C=j.drinks,T=j.locations,N=(j.names,j.videos);var M=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(i.a)(this,Object(c.a)(t).call(this,e))).handleImageClick=function(){},n.handleVideoClick=function(){},n.handleVideoInputChange=function(e){console.log(e.target.value),n.setState(function(e){return Object(a.a)({},e)})},n.handleImageInputChange=function(e){},n.state={currentStep:null,currentScenario:n.props.scenario.current,imagePath:"",videoPath:""},n}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=[];t.push(C,T);var n=[];t.forEach(function(e){void 0!==e&&n.push(u.a.createElement("option",{value:e.pathOnTablet},e.obj))});var a=[];new Array(N).forEach(function(e){void 0!==e&&a.push(u.a.createElement("option",{value:e.pathOnTablet},e.obj))});var r=m.a.toolbarState.state;return u.a.createElement("div",{className:"Debug"},u.a.createElement(y.a,null,"Debug"),u.a.createElement("div",{id:"redux"},u.a.createElement("h2",null,"REDUX"),u.a.createElement("div",{id:"changeView"},u.a.createElement("h3",null,"View"),u.a.createElement(O,null),u.a.createElement("h4",null,"changeView"),u.a.createElement("h4",null,"Component visibility"),u.a.createElement("button",{onClick:function(){return e.props.toggleTimeBoardVisibilty(e.props.view.componentVisibility.timeBoard)},className:"btn btn-info"},"Toggle timeBoard Visibility")),u.a.createElement("div",{id:"toolbar"},u.a.createElement("h3",null,"Toolbar"),u.a.createElement("button",{className:"btn btn-info",onClick:function(){return e.props.toolbarState(m.a.toolbarState.system.canMove,e.props.toolbar.canMove===r.ok?r.error:r.ok)}},"Can Move"),u.a.createElement("button",{className:"btn btn-info",onClick:function(){return e.props.toolbarState(m.a.toolbarState.system.micro,e.props.toolbar.micro===r.ok?r.error:r.ok)}},"Micro"),u.a.createElement("button",{className:"btn btn-info",onClick:function(){return e.props.toolbarState(m.a.toolbarState.system.internet,e.props.toolbar.internet===r.ok?r.error:r.ok)}},"Internet"),u.a.createElement("button",{className:"btn btn-info",onClick:function(){return e.props.toolbarState(m.a.toolbarState.system.pcConnection,e.props.toolbar.pcConnection===r.ok?r.error:r.ok)}},"Pc Connection")),u.a.createElement("div",{id:"communication"},u.a.createElement("h3",null,"Communication"),u.a.createElement("button",{className:"btn btn-info",onClick:function(){return e.props.jsHeartbeat()}},"Heartbeats"),u.a.createElement("div",{id:"taskRecieved"},u.a.createElement("button",{className:"btn btn-info",onClick:function(){e.props.setStepRecieved()}},"Step recieved"))),u.a.createElement("div",{id:"time"},u.a.createElement("h3",null,"Time"),u.a.createElement("button",{className:"btn btn-danger",onClick:function(){return e.props.timeToggleTimer(w.timerState.state.on)}},"Start timer"),u.a.createElement("button",{className:"btn btn-danger",onClick:function(){return e.props.timeToggleTimer(w.timerState.state.off)}},"Stop timer"))),u.a.createElement("div",{id:"steps"},u.a.createElement("button",{className:"btn btn-info",onClick:function(){return e.props.timeStepSkipped(e.state.currentStep)}},"Pass step"),u.a.createElement("button",{className:"btn btn-info",onClick:function(){return e.props.timeStepComplete()}},"Complete Step"),u.a.createElement("button",{className:"btn btn-info",onClick:function(){return e.props.timeStepChangeCurrent(e.state.currentStep)}},"Change current step")),u.a.createElement("button",{className:"btn btn-info",onClick:this.props.gotoMainMenu},"Go to Main Menu"),u.a.createElement("div",{className:"Video"},u.a.createElement("h3",null,"Video"),u.a.createElement("select",{name:"",id:"",onChange:this.handleVideoInputChange},a),u.a.createElement("video",{src:this.state.videoPath})),u.a.createElement("div",{className:"Image"},u.a.createElement("h3",null,"Image"),u.a.createElement("select",{name:"",id:"",onChange:this.handleVideoInputChange},n),u.a.createElement("img",{src:this.state.imagePath,alt:""})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.currentScenario!==e.currentScenario?{currentScenario:e.currentScenario}:null}}]),t}(l.Component);t.default=Object(p.connect)(function(e){return{toolbar:e.toolbar,view:e.view,scenario:e.scenario}},function(e){return{changeView:function(e){f.a.raise(E.currentView.ALMemory,{view:e})},toggleTimeBoardVisibilty:function(t){var n=d.a.setComponentVisibility;t=t===n.state.visible?n.state.hidden:n.state.visible,e({type:n.type,state:t,component:n.component.timeBoard})},toolbarState:function(e,t){f.a.raise(k.toolbarState.ALMemory,{system:e,state:t})},jsHeartbeat:function(){e({type:b.a.jsHeartbeat.type})},stepCompleted:function(){f.a.raise(w.stepCompleted.ALMemory,{step:null})},setStepRecieved:function(){e({type:b.a.setStepRecieved.type})},timeToggleTimer:function(e){f.a.raise(w.timerState.ALMemory,{state:e})},gotoMainMenu:function(){f.a.raise(w.currentScenario.ALMemory,{scenario:"mainMenu"}),f.a.raise(E.changeCurrentView.ALMemory,{view:"mainMenu"})},timeStepComplete:function(){f.a.raise(w.stepCompleted.ALMemory,{step:null})},timeStepSkipped:function(e){f.a.raise(w.stepSkipped.ALMemory,{stepId:e})},timeStepChangeCurrent:function(e){f.a.raise(w.currentStep.ALMemory,{stepId:e})}}})(M)},9:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(24).a.get().apis,r=a.generalManagerHRI,o=a.common,i=a.tabletLM,c={stepReceived:{type:r.stepReceived.reduxKey},stepCompleted:{type:r.stepCompleted.reduxKey},jsHeartbeat:{type:o.jsHeartbeat.reduxKey,time:"__timestamp"},dataJs:{type:i.dataJs.reduxKey,dataType:i.dataJs.dataType,data:""},extHeartbeat:{type:"COM/EXT_HEARTBEAT",time:{gm:"_gmTimestamp",lm:"_lmTimestamp"}},askToChangeScenario:{type:r.askToChangeScenario.reduxKey,scenario:[{id:"receptionist",name:"Receptionist"},{id:"take_out_the_garbage",name:"Take out the garbage"},{id:"inspection",name:"Inspection"}]}}}},[[228,1,2]]]);
//# sourceMappingURL=main.2c1d0637.chunk.js.map