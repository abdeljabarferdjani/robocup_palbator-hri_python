(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(28).a.get().apis,r=n.generalManagerHRI,o=n.common,i=n.tabletLM,c={stepReceived:{type:r.stepReceived.reduxKey},stepCompleted:{type:r.stepCompleted.reduxKey},jsHeartbeat:{type:o.jsHeartbeat.reduxKey,time:"__timestamp"},dataJs:{type:i.dataJs.reduxKey,dataType:i.dataJs.dataType,data:""},extHeartbeat:{type:"COM/EXT_HEARTBEAT",time:{gm:"_gmTimestamp",lm:"_lmTimestamp"}},askToChangeScenario:{type:r.askToChangeScenario.reduxKey,scenario:[{id:"receptionist",name:"Receptionist"},{id:"take_out_the_garbage",name:"Take out the garbage"},{id:"inspection",name:"Inspection"}]}}},125:function(e,t,a){"use strict";var n=a(3),r=a(4),o=a(6),i=a(5),c=a(7),s=a(0),l=a.n(s),u=a(37),p=a(10),m=a(13),d=(a(482),a(18)),b=a.n(d),h=b.a.shape({name:b.a.string.isRequired,drinkName:b.a.number.isRequired}),v=(b.a.string.isRequired,b.a.string,b.a.arrayOf(b.a.string),b.a.shape({who:h.isRequired,to:h.isRequired}),b.a.string,b.a.number,a(21)),f=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e,t=this,a=this.props.textToShow||"Hello, what is your name ?";return this.props.names&&this.props.names.length>0&&(e=this.props.names),l.a.createElement("div",null,l.a.createElement(v.a,null,a),l.a.createElement("div",{className:"names"},e.map(function(e){return l.a.createElement(u.b,{onClick:function(){return t.props.sendName(t.props.dispatch,e)}},e)})))}}]),t}(s.Component),g=Object(m.connect)(function(e){return{sendName:function(e,t){e({type:p.a.dataJs.type,dataType:p.a.dataJs.dataType.name,data:t})}}})(f),O=a(8),y=(a(483),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={value:""},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"deleteNumber",value:function(){this.setState(function(e){return Object(O.a)({},e,{value:e.value.slice(0,-1)})})}},{key:"addNumber",value:function(e){this.state.value.length<3&&this.setState(function(t){var a=Number.parseInt(t.value+e.toString());return Object(O.a)({},t,{value:a.toString()})})}},{key:"render",value:function(){for(var e=this,t=this.props.textToShow||"Hello X, how old are you ?",a=[],n=function(t){a.push(l.a.createElement("button",{className:"btn btn-classic",onClick:function(){return e.addNumber(t)}},t))},r=1;r<10;r++)n(r);var o=this.state.value.length>0?this.state.value:"0";return l.a.createElement("div",null,l.a.createElement(v.a,null,t),l.a.createElement("div",{id:"ages"},l.a.createElement("p",{className:"value"},o),l.a.createElement("div",{id:"digits"},a,l.a.createElement("button",{className:"btn no",onClick:function(){return e.deleteNumber()}},"DEL"),l.a.createElement("button",{className:"btn btn-classic",onClick:function(){return e.addNumber(0)}},"0"),l.a.createElement("button",{className:"btn ok",onClick:function(){return e.props.sendName(e.props.dispatch,Number.parseInt(e.state.value))}},"OK"))))}}]),t}(s.Component)),j=Object(m.connect)(function(e){return{sendName:function(e,t){e({type:p.a.dataJs.type,dataType:p.a.dataJs.dataType.age,data:t})}}})(y),E=(a(484),a(485),function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e="Drink "+this.props.size;return l.a.createElement("img",{className:e,src:this.props.pathOnTablet,alt:this.props.name})}}]),t}(s.Component));E.drinksNameToPathMap={};var k=E,S=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e,t=this,a=this.props.textToShow||"Hello X, what is your prefered drinks ?";this.props.drinks&&this.props.drinks.length>0&&(e=this.props.drinks);var n=[];return e.forEach(function(e){n.push(l.a.createElement("div",null,l.a.createElement(u.b,{image:l.a.createElement(k,{name:e.name,pathOnTablet:e.pathOnTablet}),onClick:function(){return t.props.sendName(t.props.dispatch,e.name)}},e.name)))}),l.a.createElement("div",{id:"AskDrink"},l.a.createElement(v.a,null,a),l.a.createElement("div",{className:"drinks"},n))}}]),t}(s.Component),T=Object(m.connect)(function(e){return{sendName:function(e,t){e({type:p.a.dataJs.type,dataType:p.a.dataJs.dataType.drink,data:t})}}})(S),C=(a(486),function(e){function t(e){var a;return Object(n.a)(this,t),a=Object(o.a)(this,Object(i.a)(t).call(this,e)),console.log("PROPS : ",e),a.state={name:e.name,drinkObj:e.drinkObj},console.warn("Guest.state",a.state),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=void 0!==this.props.drinkObj?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{className:"guestDrink"},this.state.name," likes: ",this.state.drinkObj.name," "),l.a.createElement(k,{size:"lg",name:this.state.drinkObj.name,pathOnTablet:this.state.drinkObj.pathOnTablet})):null;return l.a.createElement("div",{className:"Guest"},l.a.createElement("img",{src:this.props.guestPhotoPath,alt:this.state.name}),e)}}]),t}(l.a.Component));a(487);var w=function(e){function t(e){var a;return Object(n.a)(this,t),a=Object(o.a)(this,Object(i.a)(t).call(this,e)),console.log("Present People ",e),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.viewOk()}},{key:"render",value:function(){var e;if(void 0!==this.props.people.to.length){var t=[];console.log("People TO array : ",this.props.people.to),this.props.people.to.forEach(function(e){console.log("39",e),t.push(l.a.createElement(C,{name:e}))}),e=l.a.createElement("div",null,t)}return l.a.createElement("div",{className:"PresentPerson"},l.a.createElement(C,{drinkObj:this.props.people.who.drink,name:this.props.people.who.name}),e)}}]),t}(s.Component),N=(Object(m.connect)(function(e){return{}},function(e){return{viewOk:function(){e({type:p.a.dataJs.type,data:{status:200}})}}})(w),a(488),a(49)),M=(a(489),a(219)),A=a.n(M),R=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).subButton=l.a.createRef(),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.inter)}},{key:"componentDidMount",value:function(){var e=this,a=document.querySelector("canvas#canvasOK"),n=a.getContext("2d");a.height=N.findDOMNode(this).clientHeight,a.width=N.findDOMNode(this).clientWidth,n.moveTo(a.width/2,a.height/2);var r=0;this.inter=setInterval(function(){r>2*Math.PI?(clearInterval(e.inter),A.a.Simulate.click(N.findDOMNode(e.subButton))):t.drawToXY(a,a.width*Math.cos(r)+a.height/2,a.height*Math.sin(r)+a.height/2),r+=.005},1e3*this.props.timeout/628)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"AutoValidationButton"},l.a.createElement(u.a,{color:this.props.color,onClick:this.props.onClick,ref:function(t){return e.subButton=t}},l.a.createElement("span",null,this.props.children),l.a.createElement("canvas",{id:"canvasOK"})))}}],[{key:"drawToXY",value:function(e,t,a){var n=e.getContext("2d");n.beginPath(),n.moveTo(e.width/2,e.height/2),n.lineTo(t,a),n.strokeStyle="rgb(244,248,255)",n.stroke()}}]),t}(s.Component),L=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.textToShow||"Are you sure that you want X?";return l.a.createElement("div",{className:"Confirm"},l.a.createElement(v.a,null,t),l.a.createElement("div",{className:"choices"},l.a.createElement(u.a,{onClick:function(){return e.props.handleNoClick(e.props.dispatch)},color:"no"},"No"),l.a.createElement(R,{onClick:function(){return e.props.handleYesClick(e.props.dispatch)},color:"ok",timeout:10},"Yes")))}}]),t}(s.Component),D=Object(m.connect)(function(e){return{handleNoClick:function(e){e({type:p.a.dataJs.type,dataType:p.a.dataJs.dataType.confirm,data:!1})},handleYesClick:function(e){e({type:p.a.dataJs.type,dataType:p.a.dataJs.dataType.confirm,data:!0})}}})(L),I=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,"Il me faut du coca, ...")}}]),t}(s.Component),x=(a(491),a(492),function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=null,t=null,a=null,n=null,r=null,o=null;if(this.props.title&&(a=l.a.createElement(v.a,null,this.props.title)),this.props.image&&(t=l.a.createElement("img",{src:this.props.image.pathOnTablet,alt:this.props.image.alternative})),this.props.video&&(e=l.a.createElement("img",{src:this.props.video.pathOnTablet,alt:this.props.video.alternative})),this.props.content&&(o=this.props.content),(this.props.video||this.props.image)&&(r=l.a.createElement("div",{className:"media"},t,e)),this.props.list){var i=[];this.props.list.forEach(function(e){i.push(l.a.createElement("li",null,e))}),n=l.a.createElement("ol",null,i)}return this.props.noContainer?l.a.createElement(l.a.Fragment,null,a,r,o,n):l.a.createElement("div",{className:"Generic"},a,r,o,n)}}]),t}(s.Component)),P=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.viewOk()}},{key:"render",value:function(){this.props.textToShow;return l.a.createElement("div",{className:"Goto"},l.a.createElement(x,{image:this.props.location,title:this.props.textToShow}))}}]),t}(s.Component),V=Object(m.connect)(function(e){return{}},function(e){return{viewOk:function(){e({type:p.a.dataJs.type,data:{status:200}})}}})(P),H=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null)}}]),t}(s.Component),_=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null)}}]),t}(s.Component),B=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.viewOk()}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(v.a,null,this.props.textToShow))}}]),t}(s.Component),G=Object(m.connect)(function(e){return{}},function(e){return{viewOk:function(){e({type:p.a.dataJs.type,data:{status:200}})}}})(B);a(493);var J=function(e){return l.a.createElement("img",{className:"Location",src:e.obj.pathOnTablet,alt:e.obj.name})},F=(a(494),function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.viewOk()}},{key:"render",value:function(){var e=this.props.textToShow||"Please follow me";return console.log("AskToFollow props",this.props),l.a.createElement("div",{className:"AskToFollow"},l.a.createElement(v.a,null,e),l.a.createElement(J,{obj:this.props.location}))}}]),t}(s.Component)),K=Object(m.connect)(function(e){return{}},function(e){return{viewOk:function(){e({type:p.a.dataJs.type,data:{status:200}})}}})(F),W=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null)}}]),t}(s.Component),q=a(99),Y=a(220),X=(a(588),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={remainingTime:a.props.time,elapsedTime:0},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this,a=setInterval(function(){t.setState(function(e){return Object(O.a)({},e,{remainingTime:e.remainingTime-1,elapsedTime:e.elapsedTime+1})},function(){0===t.state.remainingTime&&(clearInterval(a),e.props.viewOk())})},1e3)}},{key:"render",value:function(){var e=this.props.textToShow;""===e&&(e="I'm waiting for ");var t={labels:["",""],datasets:[{data:[this.props.time-this.state.elapsedTime,this.state.elapsedTime],backgroundColor:["#12c4ff","rgba(54,162,235,0)"]}]},a=l.a.createElement(Y.a,{data:t,options:{elements:{arc:{borderWidth:0}},legend:{display:!1},tooltips:{enabled:!1},responsive:!0,scales:{xAxes:[{display:!1}],yAxes:[{display:!1}]}}});return l.a.createElement("div",{id:"Wait"},l.a.createElement(v.a,null,e),l.a.createElement("div",{id:"chart"},l.a.createElement("span",{className:"timer"},this.state.remainingTime),a))}}]),t}(s.Component)),U=Object(m.connect)(function(e){return{}},function(e){return{viewOk:function(){e({type:p.a.dataJs.type,data:{status:200}})}}})(X),z=(a(589),function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"AskOpenDoor"},l.a.createElement(v.a,null,this.props.textToShow.title),l.a.createElement("div",null,l.a.createElement("ul",{className:"description"},this.props.textToShow.description.map(function(e){return l.a.createElement("li",null,e)})),l.a.createElement("div",null,l.a.createElement(u.a,{onClick:this.props.handleClick},"Next"))))}}]),t}(s.Component)),Z=Object(m.connect)(function(){return{}},function(e){return{handleClick:function(){e({type:p.a.dataJs.type,data:{}})}}})(z),Q=(a(590),function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.textToShow||"[PLACEHOLDER] I'm waiting for a human";return l.a.createElement("div",{className:"CallHuman"},l.a.createElement(v.a,null,e),l.a.createElement(u.a,{onClick:this.props.humanIsHere},"I'm here"),l.a.createElement(U,{time:this.props.time}))}}]),t}(s.Component)),$=Object(m.connect)(function(e){return{}},function(e){return{humanIsHere:function(){e({type:p.a.dataJs.type,data:{}})}}})(Q),ee=(a(591),function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e,t=this.props.textToShow||{title:"Please reproduce the videos",description:["A","B","C","D"]},a=l.a.createElement("video",{autoPlay:!0,loop:!0,muted:!0,src:this.props.video.pathOnTablet});switch(this.props.video.format){case"16/9":e=l.a.createElement("div",{className:"ShowVideo large"},l.a.createElement(v.a,null,t.title),l.a.createElement(u.a,{onClick:this.props.viewOk},"I'm done"),l.a.createElement("div",{className:"bottom"},l.a.createElement("div",{className:"video large"},a),l.a.createElement("ol",{className:"description",id:"steps"},t.description.map(function(e){return l.a.createElement("li",null,e)}))));break;case"4/3":e=l.a.createElement("div",{className:"ShowVideo tail"},l.a.createElement("div",{className:"video tail"},a),l.a.createElement("div",{className:"text tall"},l.a.createElement(v.a,null,t.title),l.a.createElement(u.a,{onClick:this.props.viewOk},"I'm done"),l.a.createElement("ol",{className:"description",id:"steps"},t.description.map(function(e){return l.a.createElement("li",null,e)}))))}return e}}]),t}(s.Component)),te=Object(m.connect)(function(e){return{}},function(e){return{viewOk:function(){e({type:p.a.dataJs.type,data:{status:200}})}}})(ee);a.d(t,"b",function(){return ae}),a.d(t,"a",function(){return re});var ae=function(e){return ne[e]||q.a},ne={askName:g,askDrink:T,askAge:j,confirm:D,detailDrinks:I,presentPerson:w,goTo:V,generic:x,findAvailableDrinks:H,findWhoWantsDrinks:_,serveDrinks:W,seatGuest:G,askToFollow:K,mainMenu:q.a,wait:U,askOpenDoor:Z,callHuman:$,showVideo:te},re=function(){return Object.keys(ne)}},159:function(e,t,a){"use strict";a.r(t);var n=a(63),r=a(222),o=a(8),i=a(50),c=a(26),s=a(27),l={currentView:null,currentData:{textToShow:null,choices:[]},componentVisibility:{timeBoard:i.a.setComponentVisibility.state.visible}},u=new c.a(s.reducer.view,"ViewReducer"),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.a.changeView.type:e=Object(o.a)({},e,{currentView:t.view,currentData:t.data});break;case i.a.setComponentVisibility.type:var a=i.a.setComponentVisibility.component.timeBoard;if([a].includes(t.component)){var n=i.a.setComponentVisibility.state;[n.hidden,n.visible].includes(t.state)?t.component===a&&(e=Object(o.a)({},e,{componentVisibility:Object(o.a)({},e.componentVisibility,{timeBoard:t.state})})):u.warn("setComponentVisibility","unknown component visibility state")}else u.warn("setComponentVisibility","unknown component")}return e},m=a(10),d=a(34),b=a.n(d),h=a(28),v=h.a.get().apis,f=v.generalManagerHRI,g=v.common,O=v.tabletLM,y={lastLocalManagerHeartbeat:null,lastGeneralManagerHeartbeat:null,delayWithPepper:0},j=new c.a(s.reducer.com,"ComReducer"),E=[];Object.keys(m.a).forEach(function(e){return E.push(m.a[e].type)});var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;if(E.includes(t.type))switch(t.type){case m.a.stepReceived.type:b.a.raise(f.stepReceived.ALMemory,null);break;case m.a.jsHeartbeat.type:b.a.raise(g.jsHeartbeat.ALMemory,Date.now());break;case m.a.dataJs.type:var a=O.dataJs.ALMemory;b.a.raise(a,{dataType:t.dataType,data:t.data,actionId:t.actionId});break;case m.a.extHeartbeat.type:null===e.lastLocalManagerHeartbeat&&void 0!==t.time.lm&&(e.delayWithPepper=Math.floor(Date.now()/1e3)-t.time.lm),e=Object(o.a)({},e,{lastGeneralManagerHeartbeat:t.time.gm,lastLocalManagerHeartbeat:t.time.lm});var n=Date.now()/1e3,r=n-e.lastLocalManagerHeartbeat-e.delayWithPepper,i="No heartbeats from LocalManager since "+r;r>10?j.error(i):r>5&&j.warn(i);var c=n-e.lastGeneralManagerHeartbeat,s="No heartbeats from LocalManager since "+c;c>10?j.error(s):c>5&&j.warn(s),j.debug(n);break;case m.a.askToChangeScenario.type:console.log("communication reducer"),console.log(t.scenario)}return e},S=a(124),T=a(33),C={internet:T.a.toolbarState.state.ok,pcConnection:T.a.toolbarState.state.ok,micro:T.a.toolbarState.state.ok,canMove:T.a.toolbarState.state.ok},w=[];Object.keys(T.a).forEach(function(e){return w.push(T.a[e].type)});var N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;if(w.includes(t.type)&&t.type===T.a.toolbarState.type)for(var a=t.state,n=T.a.toolbarState.system,r=0,i=Object.keys(n);r<i.length;r++){var c=i[r];n[c]===t.system&&(e=Object(o.a)({},e,Object(S.a)({},c,a)))}return e},M=a(46),A=a(38),R=a(3),L=a(4),D=a(9),I=a(45),x=function(){function e(){Object(R.a)(this,e)}return Object(L.a)(e,null,[{key:"stopTimer",value:function(){clearInterval(Object(D.a)(e,V)[V]),Object(D.a)(e,V)[V]=void 0}},{key:"startTimer",value:function(){void 0===Object(D.a)(e,V)[V]&&(Object(D.a)(e,P)[P]=Date.now(),Object(D.a)(e,H)[H]=Date.now(),Object(D.a)(e,V)[V]=setInterval(function(){var t=Date.now();Q({type:A.a.passSecond.type,globalElapsedTime:e.getElapsedTime(Object(D.a)(e,P)[P],t),timeFromLastEvent:e.getElapsedTime(Object(D.a)(e,H)[H],t)}),e.logger.log(Object(D.a)(e,H)[H]),Object(D.a)(e,H)[H]=t,e.logger.log(Object(D.a)(e,H)[H])},1e3))}},{key:"getElapsedTime",value:function(e,t){return(t-e)/1e3}}]),e}(),P=Object(I.a)("startTime"),V=Object(I.a)("intervalId"),H=Object(I.a)("lastTime");Object.defineProperty(x,P,{writable:!0,value:void 0}),Object.defineProperty(x,V,{writable:!0,value:void 0}),Object.defineProperty(x,H,{writable:!0,value:void 0}),x.logger=new c.a(s.Timer,"Timer");var _=new c.a(s.reducer.time,"TimeReducer"),B=h.a.get().apis.generalManagerHRI,G=function(e,t){e=Object(o.a)({},e);var a=0;return Object.keys(t).forEach(function(n){var r;e.todoSteps.push(Object(o.a)({},{name:(r=t[n]).name,eta:r.eta,id:r.id},{order:a++}))}),e.allSteps=Object(M.a)(e.todoSteps),console.warn("State after init",e),e},J={currentStep:null,todoSteps:[],doneSteps:[],skippedSteps:[],allSteps:[],globalElapsedTime:0,stepElapsedTime:0,haveToReset:!1};function F(){return e=J,JSON.parse(JSON.stringify(e));var e}var K=G(F(),[]),W=[];Object.keys(A.a).forEach(function(e){W.push(A.a[e].type)});var q=function(){var e,t,a,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,i=arguments.length>1?arguments[1]:void 0,c=Object(o.a)({},r);if(W.includes(i.type))switch(i.type){case A.a.passSecond.type:void 0!==i.globalElapsedTime&&void 0!==i.timeFromLastEvent?(_.log(A.a.passSecond.type,i.globalElapsedTime),c=Object(o.a)({},c,{globalElapsedTime:i.globalElapsedTime,stepElapsedTime:c.stepElapsedTime+i.timeFromLastEvent})):_.warn(A.a.passSecond.type,"Care no action.globalElapsedTime");break;case A.a.resetStepsProgression.type:c.haveToReset=i.state;break;case A.a.currentStep.type:if(void 0!==i.index){console.log("HEY 1");var s=r.allSteps[i.index];e=c.todoSteps.findIndex(function(e){return e.id===s.id}),console.log("HEY 2",e),c.stepElapsedTime=0;var l=(a=Object(M.a)(r.todoSteps)).splice(e,1)[0];c=Object(o.a)({},c,{currentStep:Object(o.a)({},l),todoSteps:a}),console.warn("HEY 4",c)}else _.warn(A.a.currentStep.type,"Care try to currentStep with an undefined step");break;case A.a.stepCompleted.type:t=Object(M.a)(c.doneSteps),a=Object(M.a)(c.todoSteps),n=c.currentStep,i.indexes.forEach(function(e){var r=c.allSteps[e];c.currentStep.id===r.id&&(n=null);var o=a.findIndex(function(e){return e.id===r.id});o>-1&&a.splice(o,1),t.push(r)}),c=Object(o.a)({},c,{currentStep:n,todoSteps:a,doneSteps:t});break;case A.a.stepSkipped.type:t=Object(M.a)(c.doneSteps),n=c.currentStep,i.indexes.forEach(function(e){var a=c.allSteps[e];c.currentStep.id===a.id&&(n=null),t.push(c.allSteps[e])}),c=Object(o.a)({},c,{currentStep:n,doneSteps:t});break;case A.a.timerState.type:var u=B.timerState.state,p=u.on,m=u.off;if([p,m].includes(i.state))switch(i.state){case p:x.startTimer();break;case m:x.stopTimer()}else _.warn("ToggleTimer","Unknown ALMstate for timerState");break;case A.a.replaceAllSteps.type:_.debug("You are un replaceAllSteps reducer",i),void 0!==i.steps.length&&(_.debug("replace B",c),c=G(F(),i.steps),_.debug("replace A",c),console.warn(2,c,i.steps))}return c},Y={type:h.a.get().apis.generalManagerHRI.currentScenario.reduxKey,scenario:"SCENARIO"},X={current:{name:"None"}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;return t.type===Y.type&&(e=Object(o.a)({},e,{current:{name:t.scenarioName}})),e},z=a(162);a.d(t,"dispatch",function(){return Q}),a.d(t,"store",function(){return Z});var Z,Q=null;t.default=function(){if(void 0===Z){var e;if(s.redux){var t=Object(r.createLogger)({level:"info",diff:!1,duration:!0});e=Object(n.createStore)(Object(n.combineReducers)({view:p,toolbar:N,com:k,time:q,scenario:U}),{},Object(z.composeWithDevTools)(Object(n.applyMiddleware)(t)))}else e=Object(n.createStore)(Object(n.combineReducers)({view:p,toolbar:N,com:k,time:q,scenario:U}),{},Object(z.composeWithDevTools)());Q=e.dispatch,Z=e}return Z}},21:function(e,t,a){"use strict";var n=a(3),r=a(4),o=a(6),i=a(5),c=a(7),s=a(0),l=a.n(s),u=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("h2",{className:"ComponentTitle"},this.props.children)}}]),t}(s.Component);t.a=u},223:function(e,t,a){e.exports=a.p+"static/media/internetError.d78a4b0b.svg"},224:function(e,t,a){e.exports=a.p+"static/media/muteMicro.34690a2b.svg"},225:function(e,t,a){e.exports=a.p+"static/media/pcProblem.55978f42.svg"},226:function(e,t,a){e.exports=a(227)},227:function(e,t,a){"use strict";a.r(t);a(228),a(229),a(230),a(231),a(232),a(233),a(234),a(235),a(236),a(237),a(238),a(239),a(240),a(241),a(242),a(243),a(244),a(245),a(246),a(247),a(248),a(249),a(250),a(251),a(252),a(105),a(253),a(254),a(255),a(256),a(257),a(258),a(259),a(260),a(261),a(262),a(264),a(265),a(136),a(266),a(267),a(268),a(269),a(270),a(271),a(272),a(273),a(274),a(275),a(276),a(277),a(278),a(279),a(280),a(281),a(282),a(283),a(284),a(285),a(286),a(287),a(288),a(289),a(290),a(291),a(292),a(293),a(294),a(295),a(296),a(297),a(298),a(299),a(300),a(301),a(302),a(304),a(305),a(306),a(307),a(308),a(310),a(311),a(312),a(313),a(314),a(315),a(316),a(317),a(318),a(319),a(320),a(321),a(322),a(323),a(188),a(324),a(325),a(326),a(327),a(189),a(328),a(329),a(330),a(331),a(332),a(333),a(334),a(336),a(337),a(338),a(339),a(340),a(341),a(344),a(345),a(346),a(347),a(348),a(349),a(350),a(351),a(352),a(353),a(354),a(355),a(356),a(357),a(358),a(359),a(360),a(361),a(362),a(363),a(364),a(365),a(366),a(367),a(368),a(369),a(370),a(371),a(372),a(373),a(374),a(147),a(375),a(376),a(377),a(378),a(379),a(380),a(381),a(382),a(383),a(384),a(385),a(386),a(387),a(388),a(389),a(391),a(392),a(393),a(394),a(395),a(396),a(397),a(398),a(399),a(400),a(401),a(402),a(403),a(404),a(405),a(406),a(407),a(408),a(409),a(410),a(412),a(413),a(414),a(416),a(417),a(418),a(419),a(420),a(421),a(422),a(423),a(424),a(425),a(426),a(427),a(428),a(429),a(430),a(431),a(432),a(433),a(434),a(435),a(436),a(437),a(438),a(439),a(440),a(441),a(442),a(443),a(444),a(445),a(446),a(447),a(448),a(449),a(450),a(451),a(452),a(453),a(454),a(455),a(456),a(457),a(458),a(459),a(460),a(462),a(463),a(464),a(465),a(467),a(202),a(468);var n=a(77),r=a.n(n),o=a(123),i=a(0),c=a.n(i),s=a(49),l=a.n(s),u=(a(476),a(28));function p(){return(p=Object(o.a)(r.a.mark(function e(){var t,n,o,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.setConfigFromALMemory();case 2:t=a(601).default,n=a(13).Provider,o=a(159).default,i=a(602).default,l.a.render(c.a.createElement(n,{store:o()},c.a.createElement(t,null),c.a.createElement(i,null)),document.getElementById("root"));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}(function(){return p.apply(this,arguments)})().then(function(){console.log("App Loaded")})},26:function(e,t,a){"use strict";a.d(t,"a",function(){return l});var n=a(3),r=a(4),o=a(9),i=a(45),c=a(34),s=a.n(c),l=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Object(n.a)(this,e),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),t&&""!==a&&console.info("Logging on "+a),Object(o.a)(this,u)[u]=t,Object(o.a)(this,p)[p]=a}return Object(r.a)(e,[{key:"debug",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(o.a)(this,u)[u]&&(console.debug("".concat(Object(o.a)(this,p)[p],": ").concat(e),t),this.sendToLm(a,e,t,2))}},{key:"log",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(o.a)(this,u)[u]&&(console.log("".concat(Object(o.a)(this,p)[p],": ").concat(e),t),this.sendToLm(a,e,t,3))}},{key:"sendToLm",value:function(e,t,a,n){e&&s.a.raise("R2019/Global/LmLogger",{message:"".concat(t," ").concat(a),application:"".concat(Object(o.a)(this,p)[p]),level:n})}},{key:"warn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(o.a)(this,u)[u]&&(console.warn("".concat(Object(o.a)(this,p)[p],": ").concat(e),t),this.sendToLm(a,e,t,4))}},{key:"error",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(o.a)(this,u)[u]&&(console.error("".concat(Object(o.a)(this,p)[p],": ").concat(e),t),this.sendToLm(a,e,t,5))}},{key:"event",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(o.a)(this,u)[u]&&(console.info("".concat(Object(o.a)(this,p)[p],": ").concat(e),t),this.sendToLm(a,e,t,1))}},{key:"cricical",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(o.a)(this,u)[u]&&(console.error("".concat(Object(o.a)(this,p)[p],": ").concat(e),t),this.sendToLm(a,e,t,6))}},{key:"heartbeat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(o.a)(this,u)[u]&&(console.info("".concat(Object(o.a)(this,p)[p],": ").concat(e),t),this.sendToLm(a,e,t,0))}},{key:"time",value:function(e){Object(o.a)(this,u)[u]&&console.time(e)}},{key:"timeEnd",value:function(e){Object(o.a)(this,u)[u]&&console.timeEnd(e)}}]),e}(),u=Object(i.a)("state"),p=Object(i.a)("label")},27:function(e){e.exports={QiWrapper:!1,ALMemoryBridge:!0,reduxKey:!1,reducer:{time:!1,com:!1,view:!1},TimeBoard:!1,Step:!1,ViewManager:!1,App:!1,Toolbar:!1,ProgressBar:!1,Timer:!1}},28:function(e,t,a){"use strict";var n=a(77),r=a.n(n),o=a(123),i=a(3),c=a(4),s=a(9),l=a(45),u=a(26),p=function e(t){"string"!==typeof t&&Object.keys(t).forEach(function(a){e(t[a])});Object.freeze(t)},m=a(0),d=a.n(m),b=a(49),h=a.n(b);a.d(t,"a",function(){return v});var v=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,null,[{key:"init",value:function(){var t=navigator.userAgent;["Chrome/44.0.2403.157","Chrome/39.0.2171.71"].forEach(function(a){Object(s.a)(e,j)[j]=Object(s.a)(e,j)[j]||t.includes(a)}),console.log("init done",Object(s.a)(e,j)[j])}},{key:"setConfigFromALMemory",value:function(){var t=Object(o.a)(r.a.mark(function t(){var a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.init();try{Object(s.a)(e,y)[y]={common:{prefix:"R2019",AL_VALUE:{drinks:"R2019/Global/Drinks",names:"R2019/Global/Names",locations:"R2019/Global/Locations",guests:"R2019/Receptionist/Guests",images:"R2019/Global/Images",videos:"R2019/Global/Videos",apis:{common:"R2019/Api/Common",generalManagerHRI:"R2019/Api/GeneralManagerHRI",tabletLM:"R2019/Api/TabletLM"}},toolbarState:{ALMemory:"R2019/Global/ChangeToolbar",reduxKey:"CHANGE_TOOLBAR",state:{ok:"OK",error:"ERROR"},system:{internet:"INTERNET",pcConnection:"PC_CONNECTION",micro:"MICRO",canMove:"CAN_MOVE"}},jsHeartbeat:{ALMemory:"R2019/Global/JsHearbeat",reduxKey:"HEART_BEAT",payload:"__timestamp"},localManagerHeartbeat:{ALMemory:"R2019/Global/LMHearbeat",payload:"__timestamp"},generalManagerHeartbeat:{ALMemory:"R2019/Global/GMHearbeat",payload:"__timestamp"}},tabletLM:null,generalManagerHRI:null},Object(s.a)(e,y)[y].tabletLM={tabletOperational:{ALMemory:"R2019/Global/SendTabletOperational",time:"__timestamp"},currentView:{ALMemory:"R2019/Global/CurrentView",reduxKey:"ChangeCurrentView",view:"__viewKey",data:"_data"},dataJs:{ALMemory:"R2019/Receptionist/SendDataJs",reduxKey:"SendData",dataType:{name:"DATA/NAME",drink:"DATA/DRINK",age:"DATA/AGE",confirm:"DATA/CONFIRM"},data:"__DATA"},dataPython:{ALMemory:"R2019/Receptionist/SendDataPython",dataType:{name:"DATA/NAME",drink:"DATA/DRINK",age:"DATA/AGE"},data:"__DATA"},localManagerLogger:{ALMemory:"R2019/Global/LmLogger",message:"string",application:"string",level:{HEARTBEAT:0,EVENT:1,DEBUG:2,INFO:3,WARNING:4,ERROR:5,CRITIAL:6}}},Object(s.a)(e,y)[y].generalManagerHRI={currentScenario:{ALMemory:"R2019/Global/stepsList",reduxKey:"currentScenario",scenario:"__SCENARIO"},currentStep:{ALMemory:"R2019/Global/currentStep",reduxKey:"currentStep",stepId:"__STEP_ID"},resetSteps:{ALMemory:"R2019/Global/resetSteps",reduxKey:"resetSteps"},stepSkipped:{ALMemory:"R2019/Global/stepSkipped",reduxKey:"stepSkipped",stepId:"__STEP_ID"},stepCompleted:{ALMemory:"R2019/Global/stepDone",reduxKey:"stepCompleted",stepId:"__STEP_ID"},stepReceived:{reduxKey:"stepReceived",ALMemory:"R2019/Global/stepReceived"},timerState:{ALMemory:"R2019/Global/toggleTimer",reduxKey:"toggleTimer",state:{on:"TOGGLE_TIMER/ON",off:"TOGGLE_TIMER/OFF"}},currentAction:{ALMemory:"R2019/Global/CurrentAction",actionId:"__Step_ID"},askToChangeScenario:{ALMemory:"R2019/Global/AskToChangeScenario",reduxKey:"askToChangeScenario",scenario:"_scenarioName"},actionComplete:{ALMemory:"R2019/Global/ActionComplete",reduxKey:"actionComplete"}},Object(s.a)(e,O)[O]=[{id:"cpe",pathOnTablet:"img/images/cpe.png",name:"Cpe"},{id:"liris",pathOnTablet:"img/images/liris.png",name:"Liris"},{id:"insa",pathOnTablet:"img/images/insa.png",name:"Insa"},{id:"lyontech",pathOnTablet:"img/images/lyontech.png",name:"lyontech"},{id:"inria",pathOnTablet:"img/images/inria.png",name:"Inria"},{id:"citi",pathOnTablet:"img/images/citi.png",name:"Citi"}],Object(s.a)(e,g)[g]=[{id:"bar",pathOnTablet:"img/locations/bar.png",name:"Bar"},{id:"livingRoom",pathOnTablet:"img/locations/livingRoom.png",name:"Living room"},{id:"entrance",pathOnTablet:"img/locations/entrance.png",name:"Entrance"},{id:"bin1",pathOnTablet:"img/locations/bin.png",name:"Bin 1"},{id:"bin2",pathOnTablet:"img/locations/bin2.png",name:"Bin 2"},{id:"collectionZone",pathOnTablet:"img/locations/collectionZone.png",name:"Collection Zone"}],a=e.get(),p(a)}catch(r){console.error("Error in ConfigWrapper",r),n={backgroundColor:"#FFF",color:"#F00",display:"block",position:"absolute",top:0,left:0},h.a.render(d.a.createElement("p",{style:n},"Error while initialising ALMemory (Config) : can't read Common API in ALMemories, make sure that Local manager is started"),document.querySelector("body")),console.log("Done")}case 2:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()},{key:"get",value:function(){return{locations:Object(s.a)(e,g)[g],images:Object(s.a)(e,O)[O],apis:{common:Object(s.a)(e,y)[y].common,tabletLM:Object(s.a)(e,y)[y].tabletLM,generalManagerHRI:Object(s.a)(e,y)[y].generalManagerHRI}}}}]),e}(),f=Object(l.a)("_videos"),g=Object(l.a)("_locations"),O=Object(l.a)("_images"),y=Object(l.a)("_apis"),j=Object(l.a)("_imPepper");Object.defineProperty(v,f,{writable:!0,value:void 0}),Object.defineProperty(v,g,{writable:!0,value:void 0}),Object.defineProperty(v,O,{writable:!0,value:void 0}),Object.defineProperty(v,y,{writable:!0,value:void 0}),Object.defineProperty(v,j,{writable:!0,value:!1}),v.logger=new u.a(!0,"ConfigWrapper")},33:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(8),r=a(28).a.get().apis.common,o={toolbarState:{type:r.toolbarState.reduxKey,state:{ok:r.toolbarState.state.ok,error:r.toolbarState.state.error},system:Object(n.a)({},r.toolbarState.system)}}},34:function(e,t){},37:function(e,t,a){"use strict";a.d(t,"a",function(){return p});var n=a(3),r=a(4),o=a(6),i=a(5),c=a(7),s=a(0),l=a.n(s),u=a(13);var p=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.color||"classic",t=this.props.image||"";return l.a.createElement("button",{onClick:this.props.onClick,className:"btn btn-".concat(e)},t,l.a.createElement("p",null,'"',this.props.children,'"'))}}]),t}(s.Component);t.b=Object(u.connect)(function(e){return{}})(p)},38:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(28).a.get().apis.generalManagerHRI,r={passSecond:{type:"PASS_A_SECOND",globalElapsedTime:0},currentStep:{type:n.currentStep.reduxKey},stepSkipped:{type:n.stepSkipped.reduxKey},stepCompleted:{type:n.stepCompleted.reduxKey},timerState:{type:n.timerState.reduxKey,state:n.timerState.state},resetStepsProgression:{type:"R2019/Timeboard/ResetStepsProgression"},replaceAllSteps:{type:"REPLACE_ALL_STEPS",steps:["Steps"]}}},476:function(e,t,a){},481:function(e,t,a){},482:function(e,t,a){},483:function(e,t,a){},484:function(e,t,a){},485:function(e,t,a){},486:function(e,t,a){},487:function(e,t,a){},488:function(e,t,a){},489:function(e,t,a){},491:function(e,t,a){},492:function(e,t,a){},493:function(e,t,a){},494:function(e,t,a){},495:function(e,t,a){},50:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n={changeView:{type:a(28).a.get().apis.tabletLM.currentView.reduxKey},setComponentVisibility:{type:"SET_COMPONENT_VISIBILITY",component:{timeBoard:"TIMEBOARD"},state:{visible:"VISIBLE",hidden:"HIDE"}}}},588:function(e,t,a){},589:function(e,t,a){},590:function(e,t,a){},591:function(e,t,a){},592:function(e,t,a){},593:function(e,t,a){},594:function(e,t,a){},595:function(e,t,a){},596:function(e,t,a){},597:function(e,t,a){},598:function(e,t,a){},599:function(e,t,a){},600:function(e,t,a){},601:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a(4),o=a(6),i=a(5),c=a(7),s=a(0),l=a.n(s),u=a(8),p=a(13),m=a(26),d=a(27),b=(a(481),a(125)),h=a(99);var v=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={currentView:a.props.view.currentView,currentScenario:a.props.scenario.current,currentData:a.props.view.currentData},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidCatch",value:function(e,t){console.error("Error in ViewManager",e,t)}},{key:"render",value:function(){var e;e=null===this.state.currentView?l.a.createElement(h.a,null,"Please click on the scenario"):l.a.createElement(Object(b.b)(this.state.currentView),Object(u.a)({},this.state.currentData)),t.logger.log("render",e);var a="ViewManager";return a+=this.props.className?this.props.className:"",l.a.createElement("div",{className:a},e)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.view.currentView!==t.currentView||e.view.currentData!==t.currentData?{currentView:e.view.currentView,currentData:e.view.currentData}:e.scenario.current!==t.currentScenario?{currentScenario:e.scenario.current}:null}}]),t}(s.Component);v.logger=new m.a(d.ViewManager,"ViewManager");var f=Object(p.connect)(function(e){return{view:e.view,scenario:e.scenario}})(v),g=a(46),O=(a(592),a(593),{r:102,g:226,b:23}),y=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).changeCurrentValue=function(e){a.setState(function(t){return Object(u.a)({},t,{current:e})},function(){return t.logger.log("changeCurrentValue : New state : ",a.state)})},a.state={max:e.max,current:e.current,color:Object(u.a)({},O)},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=0;this.state.current>=0&&this.state.max>0&&(e=Math.round(this.state.current/this.state.max*100));var a=this.state.color,n=Math.round(255/this.state.max);e>70&&e<=100&&t.addToColor(a,"r",n),e>100&&t.removeToColor(a,"g",n);var r={width:"".concat(e=e<100?e:100,"%"),backgroundColor:t.convertToHex(a)},o="ProgressBar";return this.props.className&&(o+=" ".concat(this.props.className)),l.a.createElement("div",{className:o,style:r})}}],[{key:"addToColor",value:function(e,t,a){void 0!==e[t]&&(e[t]=e[t]+a<255?e[t]+a:255)}},{key:"removeToColor",value:function(e,t,a){void 0!==e[t]&&(e[t]=e[t]-a>0?e[t]-a:0)}},{key:"convertToHex",value:function(e){function t(e){var t=e.toString(16);return 1===t.length&&(t="0"+t),t}return"#".concat(t(e.r)).concat(t(e.g)).concat(t(e.b))}}]),t}(s.Component);y.defaultProps={current:-1},y.logger=new m.a(d.ProgressBar,"ProgressBar");var j=y,E=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={id:e.step.id,order:e.step.order,currentTime:e.time.stepElapsedTime,progressBarRef:l.a.createRef(),progressBarKey:Date.now(),resetFunc:a.reset},t.logger.log("Constructor : time :",e.time),t.logger.log("Constructor : state :",a.state),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"reset",value:function(){return Object(u.a)({},this.state,{progressBarKey:Date.now(),currentTime:0})}},{key:"render",value:function(){var e=void 0!==this.state.currentTime?this.state.currentTime:0,a="Step ".concat(this.props.step.status),n=Math.round(this.props.step.eta-e);return t.logger.log("Render ETA",this.props.step.eta),l.a.createElement("div",{className:a},l.a.createElement("p",null,this.props.step.name," ")," ",l.a.createElement("span",{className:"eta"},n,"s"),l.a.createElement(j,{ref:this.state.progressBarRef,current:e,key:this.state.progressBarKey,max:this.props.step.eta}))}}],[{key:"getDerivedStateFromProps",value:function(e,a){return!0===e.time.haveToReset&&a.resetFunc(),e.time.currentStep&&e.time.currentStep.order===a.order?(a.progressBarRef.current&&(t.logger.log("Time",e.time),a.progressBarRef.current.changeCurrentValue(e.time.stepElapsedTime)),Object(u.a)({},a,{currentTime:e.time.stepElapsedTime})):null}}]),t}(s.Component);E.Status={done:"done",todo:"todo",current:"current",skipped:"skipped"},E.defaultProps={},E.logger=new m.a(d.Step,"Step");var k=Object(p.connect)(function(e){return{time:e.time}})(E),S=(a(594),a(50)),T=a(21),C=a(159),w=a(38);var N=function(e){function t(e){var a;Object(n.a)(this,t),a=Object(o.a)(this,Object(i.a)(t).call(this,e)),t.logger.log("constructor",a.props);var r=t.createStepFromProps(e);return a.state={sortedSteps:r,globalElapsedTime:e.time.globalElapsedTime,doneSteps:Object(g.a)(e.time.doneSteps),skippedSteps:Object(g.a)(e.time.skippedSteps),todoSteps:Object(g.a)(e.time.todoSteps),visible:e.view.componentVisibility.timeBoard,parentDiv:null},t.logger.log("constructor",a.state),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){console.log(t.stepsElems)}},{key:"render",value:function(){var e="TimeBoard ";e+=this.props.className?this.props.className:"",this.state.parentDiv&&(this.state.visible===S.a.setComponentVisibility.state.hidden?this.state.parentDiv.classList.add("hidden"):this.state.parentDiv.classList.remove("hidden"));var a=[];return t.stepsElems.length=0,this.state.sortedSteps.forEach(function(e,t){a.push(l.a.createElement(k,{step:e,key:t}))}),a.length>0?l.a.createElement("div",{className:e},l.a.createElement(T.a,null,"Steps"),l.a.createElement("div",{id:"steps"},a)):l.a.createElement("div",{className:e+" hidden"})}}],[{key:"compareSteps",value:function(e,t){if(e.length!==t.length)return!0;for(var a=0;a<e.length;a++)if(void 0!==e[a]&&void 0!==t[a]&&e[a].status!==t[a].status)return!0;return!1}},{key:"getDerivedStateFromProps",value:function(e,a){if(!0===e.time.haveToReset&&Object(C.dispatch)({type:w.a.resetStepsProgression.type,state:!1}),a.visible!==e.view.componentVisibility.timeBoard)return{visible:e.view.componentVisibility.timeBoard===S.a.setComponentVisibility.state.visible};var n=t.createStepFromProps(e);if(t.compareSteps(n,a.sortedSteps)){var r=e.time.doneSteps.length;if(r>3){var o=document.querySelector(".Step");console.log("Scrolling to ",r-3,(r-3)*o.clientHeight),document.querySelector("div#steps").scrollTop=(r-3)*o.clientHeight}return{sortedSteps:t.createStepFromProps(e),globalElapsedTime:e.time.globalElapsedTime,doneSteps:Object(g.a)(e.time.doneSteps),skippedSteps:Object(g.a)(e.time.skippedSteps),todoSteps:Object(g.a)(e.time.todoSteps)}}return null}},{key:"createStepFromProps",value:function(e){var t=[];return e.time.doneSteps.forEach(function(e){t.push(Object(u.a)({},e,{status:k.Status.done}))}),null!==e.time.currentStep&&t.push(Object(u.a)({},e.time.currentStep,{status:k.Status.current})),e.time.todoSteps.forEach(function(e){t.push(Object(u.a)({},e,{status:k.Status.todo}))}),e.time.skippedSteps.forEach(function(e){t.push(Object(u.a)({},e,{status:k.Status.skipped}))}),t.sort(function(e,t){return e.order<t.order?-1:1})}}]),t}(s.Component);N.logger=new m.a(d.TimeBoard,"TimeBoard"),N.stepsElems=[];var M=Object(p.connect)(function(e){return{time:e.time,view:e.view}})(N),A=(a(595),a(596),function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e="Icon";return this.props.animation&&(e+=" animated"),l.a.createElement("img",{className:e,src:this.props.image,alt:this.props.description,title:this.props.copyright})}}]),t}(s.Component)),R=(a(597),a(223)),L=a.n(R),D=a(224),I=a.n(D),x=a(225),P=a.n(x),V=a(33),H=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={infos:e.toolbar},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){t.logger.log("Render",this.props);var e="Toolbar";e+=this.props.className?this.props.className:"";var a=[];return this.state.infos.internet===V.a.toolbarState.state.error&&a.push(l.a.createElement(A,{image:L.a,description:"An error occured with the internet connection",animation:!1,copyright:"Icons made by surang from https://www.flaticon.com/",key:0})),this.state.infos.micro===V.a.toolbarState.state.error&&a.push(l.a.createElement(A,{image:I.a,description:"Pepper can't hear you",animation:!0,copyright:"Icons made by Smashicons from https://www.flaticon.com/",key:1})),this.state.infos.pcConnection===V.a.toolbarState.state.error&&a.push(l.a.createElement(A,{image:P.a,description:"Pepper can't connect to the laptop",animation:!1,copyright:"Icons made by monkik from https://www.flaticon.com/",key:2})),a.length>0?l.a.createElement("div",{className:e},l.a.createElement("div",{id:"icons"},a)):null}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.toolbar!==t.infos?Object(u.a)({},t,{infos:e.toolbar}):null}}]),t}(s.Component);H.logger=new m.a(d.Toolbar,"Toolbar");var _=Object(p.connect)(function(e){return{toolbar:e.toolbar}})(H),B=a(28),G=(a(598),(B.a.get()||[]).images),J=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=[];return G.forEach(function(t){e.push(l.a.createElement(A,{image:t.pathOnTablet,description:t.obj}))}),l.a.createElement("div",{className:"Logo"},e.map(function(e){return e}))}}]),t}(s.Component),F=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).nbClickForDebug=0,a.state={scenario:a.props.scenario.current},a.askForDebug=function(){a.nbClickForDebug++,a.nbClickForDebug>10&&(document.querySelector("div.scenarioTitle").style.color="#F00",document.ontouchmove=function(){})},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){document.ontouchmove=function(e){e.preventDefault()}}},{key:"render",value:function(){var e;return e=void 0!==this.state.scenario?this.state.scenario.name:"No scenario loaded",l.a.createElement("div",{className:"App"},l.a.createElement("div",{className:"component leftPart"},l.a.createElement(M,null)),l.a.createElement("div",{id:"rightPart"},l.a.createElement("div",{id:"header"},l.a.createElement("div",{className:"component scenarioTitle",onClick:this.askForDebug},l.a.createElement("h1",null,e)),l.a.createElement("div",{className:"component"},l.a.createElement(_,null)),l.a.createElement("div",{className:"component logos"},l.a.createElement(J,null))),l.a.createElement("div",{className:"component main"},l.a.createElement(f,null))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.scenario.current!==t.scenario?{scenario:e.scenario.current}:null}}]),t}(s.Component);F.logger=new m.a(d.App,"App");t.default=Object(p.connect)(function(e){return{scenario:e.scenario}})(F)},602:function(e,t,a){"use strict";a.r(t);var n=a(8),r=a(3),o=a(4),i=a(6),c=a(5),s=a(7),l=a(0),u=a.n(l),p=a(13),m=a(33),d=a(50),b=a(10),h=(a(599),a(28)),v=a(34),f=a.n(v),g=a(125),O=(a(600),h.a.get().apis.tabletLM),y=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).handleSelectChange=function(e){e.persist(),a.setState(function(t){return Object(n.a)({},t,{currentViewSelected:e.target.value})})},a.handleJsonChange=function(e){e.persist(),a.setState(function(t){return Object(n.a)({},t,{currentJson:e.target.value})})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.currentJson.replaceAll("[\n\t]","");f.a.raise(O.currentView.ALMemory,{data:JSON.parse(t),view:a.state.currentViewSelected})},a.state={currentViewSelected:null,currentJson:JSON.stringify({textToShow:"",imagePath:"",choices:[],people:{who:{drinkName:"",name:""},to:{drinkName:"",name:""}},location:"",video:"",time:0},null,4)},a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=[];return Object(g.a)().forEach(function(e){t.push(u.a.createElement("option",{value:e},e))}),u.a.createElement("div",{id:"ViewSimulator"},u.a.createElement("form",{action:"",onSubmit:function(t){return e.handleSubmit(t)}},u.a.createElement("div",null,u.a.createElement("label",{htmlFor:"select"},"Select a view"),u.a.createElement("select",{value:this.state.currentViewSelected,id:"select",onChange:function(t){return e.handleSelectChange(t)}},t)),u.a.createElement("div",null,u.a.createElement("label",{htmlFor:"textArea"},"Write Data in JSON"),u.a.createElement("textarea",{id:"textArea",onChange:function(t){return e.handleJsonChange(t)},value:this.state.currentJson})),u.a.createElement("button",{className:"btn-info",type:"submit"},"Change View")))}}]),t}(l.Component),j=a(21),E=h.a.get(),k=E.apis,S=k.common,T=k.tabletLM,C=k.generalManagerHRI,w=E.drinks,N=E.locations,M=(E.names,E.videos);var A=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).handleImageClick=function(){},a.handleVideoClick=function(){},a.handleVideoInputChange=function(e){console.log(e.target.value),a.setState(function(e){return Object(n.a)({},e)})},a.handleImageInputChange=function(e){},a.state={currentStep:null,currentScenario:a.props.scenario.current,imagePath:"",videoPath:""},a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=[];t.push(w,N);var a=[];t.forEach(function(e){void 0!==e&&a.push(u.a.createElement("option",{value:e.pathOnTablet},e.obj))});var n=[];new Array(M).forEach(function(e){void 0!==e&&n.push(u.a.createElement("option",{value:e.pathOnTablet},e.obj))});var r=m.a.toolbarState.state;return u.a.createElement("div",{className:"Debug"},u.a.createElement(j.a,null,"Debug"),u.a.createElement("div",{id:"redux"},u.a.createElement("h2",null,"REDUX"),u.a.createElement("div",{id:"changeView"},u.a.createElement("h3",null,"View"),u.a.createElement(y,null),u.a.createElement("h4",null,"changeView"),u.a.createElement("h4",null,"Component visibility"),u.a.createElement("button",{onClick:function(){return e.props.toggleTimeBoardVisibilty(e.props.view.componentVisibility.timeBoard)},className:"btn btn-info"},"Toggle timeBoard Visibility")),u.a.createElement("div",{id:"toolbar"},u.a.createElement("h3",null,"Toolbar"),u.a.createElement("button",{className:"btn btn-info",onClick:function(){return e.props.toolbarState(m.a.toolbarState.system.canMove,e.props.toolbar.canMove===r.ok?r.error:r.ok)}},"Can Move"),u.a.createElement("button",{className:"btn btn-info",onClick:function(){return e.props.toolbarState(m.a.toolbarState.system.micro,e.props.toolbar.micro===r.ok?r.error:r.ok)}},"Micro"),u.a.createElement("button",{className:"btn btn-info",onClick:function(){return e.props.toolbarState(m.a.toolbarState.system.internet,e.props.toolbar.internet===r.ok?r.error:r.ok)}},"Internet"),u.a.createElement("button",{className:"btn btn-info",onClick:function(){return e.props.toolbarState(m.a.toolbarState.system.pcConnection,e.props.toolbar.pcConnection===r.ok?r.error:r.ok)}},"Pc Connection")),u.a.createElement("div",{id:"communication"},u.a.createElement("h3",null,"Communication"),u.a.createElement("button",{className:"btn btn-info",onClick:function(){return e.props.jsHeartbeat()}},"Heartbeats"),u.a.createElement("div",{id:"taskRecieved"},u.a.createElement("button",{className:"btn btn-info",onClick:function(){e.props.setStepRecieved()}},"Step recieved"))),u.a.createElement("div",{id:"time"},u.a.createElement("h3",null,"Time"),u.a.createElement("button",{className:"btn btn-danger",onClick:function(){return e.props.timeToggleTimer(C.timerState.state.on)}},"Start timer"),u.a.createElement("button",{className:"btn btn-danger",onClick:function(){return e.props.timeToggleTimer(C.timerState.state.off)}},"Stop timer"))),u.a.createElement("div",{id:"steps"},u.a.createElement("button",{className:"btn btn-info",onClick:function(){return e.props.timeStepSkipped(e.state.currentStep)}},"Pass step"),u.a.createElement("button",{className:"btn btn-info",onClick:function(){return e.props.timeStepComplete()}},"Complete Step"),u.a.createElement("button",{className:"btn btn-info",onClick:function(){return e.props.timeStepChangeCurrent(e.state.currentStep)}},"Change current step")),u.a.createElement("button",{className:"btn btn-info",onClick:this.props.gotoMainMenu},"Go to Main Menu"),u.a.createElement("div",{className:"Video"},u.a.createElement("h3",null,"Video"),u.a.createElement("select",{name:"",id:"",onChange:this.handleVideoInputChange},n),u.a.createElement("video",{src:this.state.videoPath})),u.a.createElement("div",{className:"Image"},u.a.createElement("h3",null,"Image"),u.a.createElement("select",{name:"",id:"",onChange:this.handleVideoInputChange},a),u.a.createElement("img",{src:this.state.imagePath,alt:""})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.currentScenario!==e.currentScenario?{currentScenario:e.currentScenario}:null}}]),t}(l.Component);t.default=Object(p.connect)(function(e){return{toolbar:e.toolbar,view:e.view,scenario:e.scenario}},function(e){return{changeView:function(e){f.a.raise(T.currentView.ALMemory,{view:e})},toggleTimeBoardVisibilty:function(t){var a=d.a.setComponentVisibility;t=t===a.state.visible?a.state.hidden:a.state.visible,e({type:a.type,state:t,component:a.component.timeBoard})},toolbarState:function(e,t){f.a.raise(S.toolbarState.ALMemory,{system:e,state:t})},jsHeartbeat:function(){e({type:b.a.jsHeartbeat.type})},stepCompleted:function(){f.a.raise(C.stepCompleted.ALMemory,{step:null})},setStepRecieved:function(){e({type:b.a.setStepRecieved.type})},timeToggleTimer:function(e){f.a.raise(C.timerState.ALMemory,{state:e})},gotoMainMenu:function(){f.a.raise(C.currentScenario.ALMemory,{scenario:"mainMenu"}),f.a.raise(T.changeCurrentView.ALMemory,{view:"mainMenu"})},timeStepComplete:function(){f.a.raise(C.stepCompleted.ALMemory,{step:null})},timeStepSkipped:function(e){f.a.raise(C.stepSkipped.ALMemory,{stepId:e})},timeStepChangeCurrent:function(e){f.a.raise(C.currentStep.ALMemory,{stepId:e})}}})(A)},99:function(e,t,a){"use strict";var n=a(3),r=a(4),o=a(6),i=a(5),c=a(7),s=a(0),l=a.n(s),u=a(13),p=a(10),m=a(21),d=a(37),b=(a(495),function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=[];return(this.props.scenarios||p.a.askToChangeScenario.scenario).forEach(function(a){t.push(l.a.createElement(d.a,{onClick:function(){return e.props.askToChangeScenario(a.id)}},a.name))}),l.a.createElement("div",{className:"MainMenu"},l.a.createElement(m.a,null,this.props.textToShow||this.props.children),l.a.createElement("div",null,t))}}]),t}(s.Component));t.a=Object(u.connect)(function(e){return{scenario:e.scenario}},function(e){return{askToChangeScenario:function(t){e({type:p.a.askToChangeScenario.type,scenario:t})}}})(b)}},[[226,1,2]]]);
//# sourceMappingURL=main.7846b0fe.chunk.js.map