{"version":3,"sources":["view/Global/MainMenu/index.jsx","redux/actions/ScenarioAction.js","dev/types.js","view/Global/AskName/index.jsx","view/Scenario/Receptionist/AskAge/index.jsx","view/Global/reusableComponent/Drink/Drink.jsx","view/Global/AskDrink/index.jsx","view/Scenario/Receptionist/PresentPeople/Guest.jsx","view/Scenario/Receptionist/PresentPeople/index.jsx","view/Global/reusableComponent/Button/AutoValidationButton.jsx","view/Global/Confirm/index.jsx","view/Scenario/ServingDrinks/DetailDrinks/index.jsx","view/Generic/index.jsx","view/Global/GoTo/index.jsx","view/Scenario/ServingDrinks/FindAvailableDrinks/index.jsx","view/Scenario/ServingDrinks/FindWhoWantDrinks/index.js","view/Scenario/Receptionist/SeatGuest/index.jsx","view/Global/reusableComponent/Location.jsx","view/Global/AskToFollow/index.jsx","view/Scenario/ServingDrinks/ServeDrinks/index.jsx","view/Global/Wait/index.jsx","view/Scenario/Receptionist/AskOpenDoor/index.jsx","view/Scenario/TakeOutTheGarbage/CallHuman/index.jsx","view/Global/ShowVideo/index.jsx","controller/ViewStepBridge.js","model/QiWrapper.js","view/Global/reusableComponent/ComponentTitle.jsx","view/Global/Toolbar/icons/internetError.svg","view/Global/Toolbar/icons/muteMicro.svg","view/Global/Toolbar/icons/pcProblem.svg","index.js","dev/Tools.js","controller/ConfigWrapper.js","dev/Logger.js","redux/actions/TimeAction.js","redux/actions/ToolbarAction.js","view/Global/reusableComponent/Button/SpeakableButton.jsx","redux/reducers/ViewReducer.js","redux/reducers/CommunicationReducer.js","redux/reducers/ToolbarReducer.js","model/Timer.js","redux/reducers/TimeReducer.js","redux/reducers/ScenarioReducer.js","redux/Store.js","controller/ALMemoryBridge.js","redux/actions/ViewAction.js","view/ViewManager/index.jsx","view/Global/reusableComponent/ProgressBar.jsx","view/Global/TimeBoard/Step.jsx","view/Global/TimeBoard/index.jsx","view/Global/reusableComponent/Icon.jsx","view/Global/Toolbar/Toolbar.jsx","view/Global/Logo/index.jsx","App.js","view/Debug/ViewSimulator.jsx","view/Debug/Debug.jsx","redux/actions/CommunicationAction.js"],"names":["MainMenu","_this","this","buttons","props","scenarios","comAction","askToChangeScenario","scenario","forEach","push","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","_reusableComponent_Button_SpeakableButton__WEBPACK_IMPORTED_MODULE_9__","onClick","className","_reusableComponent_ComponentTitle__WEBPACK_IMPORTED_MODULE_8__","textToShow","children","Component","connect","state","dispatch","scenarioName","type","__webpack_require__","d","__webpack_exports__","scenarioAction","currentScenario","ConfigWrapper","get","apis","generalManagerHRI","reduxKey","personPropTypes","PropTypes","shape","name","string","isRequired","drinkName","number","arrayOf","who","to","AskName","names","length","react_default","ComponentTitle","map","SpeakableButton","sendName","dataJs","dataType","data","AskAge","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","value","setState","prev","objectSpread","slice","newValue","Number","parseInt","toString","_this2","digits","_loop","i","addNumber","id","deleteNumber","age","Drink","size","src","pathOnTablet","alt","drinksNameToPathMap","drinks","displayed","drink","image","reusableComponent_Drink_Drink","Guest","console","log","drinkObj","warn","undefined","Fragment","guestPhotoPath","React","PresentPerson","_Component","inherits","createClass","key","viewOk","toDiv","people","peoples","guy","Receptionist_PresentPeople_Guest","status","AutoValidationButton","subButton","createRef","clearInterval","inter","canvas","document","querySelector","ctx","getContext","height","ReactDOM","clientHeight","width","clientWidth","moveTo","setInterval","Math","PI","ReactTestUtils","Simulate","click","drawToXY","cos","sin","timeout","_this3","color","ref","x","y","beginPath","lineTo","strokeStyle","stroke","Confirm","handleNoClick","Button_AutoValidationButton","handleYesClick","confirm","DetailDrinks","Generic","video","title","list","medias","content","alternative","arr","elem","noContainer","Goto","view_Generic","location","FindAvailableDrinks","FindWhoWantDrinks","SeatGuest","Location","obj","AskToFollow","reusableComponent_Location","ServeDrinks","Wait","remainingTime","time","elapsedTime","self","intervalId","labels","datasets","backgroundColor","chart","react_chartjs_2_es","options","elements","arc","borderWidth","legend","display","tooltips","enabled","responsive","scales","xAxes","yAxes","AskOpenDoor","description","str","handleClick","CallHuman","humanIsHere","Global_Wait","ShowVideo","layout","autoPlay","loop","muted","ViewStepBridge_getClassFromView","getAllViewsKey","getClassFromView","view","viewClassMap","askName","askDrink","AskDrink","askAge","detailDrinks","presentPerson","goTo","GoTo","generic","findAvailableDrinks","findWhoWantsDrinks","FindWhoWantsDrinks","serveDrinks","seatGuest","askToFollow","mainMenu","wait","askOpenDoor","callHuman","showVideo","keys","QiWrapper","session","ALMemory","_home_osboxes_Documents_robocup_robocup_pepper_hri_meta_robocup_pepper_hri_js_robocup_pepper_hri_js_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","defineProperty","_session","writable","_AlMemory","_home_osboxes_Documents_robocup_robocup_pepper_hri_meta_robocup_pepper_hri_js_robocup_pepper_hri_js_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_4__","_instance","event","callback","Promise","resolve","subscriber","then","signal","JSON","parse","logger","toJson","insertData","promisedValue","getData","concat","includes","heartbeat","stringify","globalConfig","naoqiIsPresent","FalseQiWrapper","QiSession","_ref","_home_osboxes_Documents_robocup_robocup_pepper_hri_meta_robocup_pepper_hri_js_robocup_pepper_hri_js_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_home_osboxes_Documents_robocup_robocup_pepper_hri_meta_robocup_pepper_hri_js_robocup_pepper_hri_js_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","mark","_callee3","wrap","_context3","next","service","_ref2","_callee2","q","_context2","abrupt","stop","_x3","apply","arguments","_x2","cb","getInstanceSync","listen","imPepper","setALValue","getAlValue","raise","inst","Logger","logConfig","url","_client","instance","WebSocket","warningMessage","module","exports","p","_callee","qi","App","Provider","getStore","Debug","_home_osboxes_Documents_robocup_robocup_pepper_hri_meta_robocup_pepper_hri_js_robocup_pepper_hri_js_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_236___default","_context","createInstance","sent","setConfigFromALMemory","require","default","initBridge","render","react__WEBPACK_IMPORTED_MODULE_238___default","store","getElementById","initApp","tabletLM","Date","now","deepFreeze","freeze","agent","navigator","userAgent","v","classPrivateFieldLooseBase","_imPepper","init","getALValue","common","_apis","rawVideos","_videos","got","error","t13","style","position","top","left","locations","_locations","videos","images","_images","label","_home_osboxes_Documents_robocup_robocup_pepper_hri_meta_robocup_pepper_hri_js_robocup_pepper_hri_js_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","_state","_label","info","_home_osboxes_Documents_robocup_robocup_pepper_hri_meta_robocup_pepper_hri_js_robocup_pepper_hri_js_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classPrivateFieldLooseBase__WEBPACK_IMPORTED_MODULE_2__","funcName","sendToLm","debug","level","message","application","timeEnd","timeAction","passSecond","globalElapsedTime","currentStep","stepSkipped","stepCompleted","timerState","resetStepsProgression","replaceAllSteps","steps","toolbarAction","toolbarState","ok","system","_home_osboxes_Documents_robocup_robocup_pepper_hri_meta_robocup_pepper_hri_js_robocup_pepper_hri_js_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","_home_osboxes_Documents_robocup_robocup_pepper_hri_meta_robocup_pepper_hri_js_robocup_pepper_hri_js_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_home_osboxes_Documents_robocup_robocup_pepper_hri_meta_robocup_pepper_hri_js_robocup_pepper_hri_js_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","_home_osboxes_Documents_robocup_robocup_pepper_hri_meta_robocup_pepper_hri_js_robocup_pepper_hri_js_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__","_home_osboxes_Documents_robocup_robocup_pepper_hri_meta_robocup_pepper_hri_js_robocup_pepper_hri_js_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__","INITIAL_STATE","currentView","currentData","choices","componentVisibility","timeBoard","viewAction","setComponentVisibility","visible","reducer","viewReducer","action","changeView","component","_viewAction$setCompon","hidden","ConfigQiWrapper","lastLocalManagerHeartbeat","lastGeneralManagerHeartbeat","delayWithPepper","com","possibleActionType","comReducer","stepReceived","jsHeartbeat","actionId","extHeartbeat","lm","floor","gm","currentTime","diffLM","LMStr","diffGM","GMStr","internet","pcConnection","micro","canMove","possibleActionTypes","toolbarReducer","actionPayload","_i","_payloads","Timer","_intervalId","_startTime","_lastTime","dateNow","getElapsedTime","timeFromLastEvent","from","order","jsonValue","todoSteps","eta","allSteps","toConsumableArray","DEFAULT_STATE","doneSteps","skippedSteps","stepElapsedTime","haveToReset","getDefaultState","timeReducer","stepIndex","clonedState","index","researchedStep","findIndex","step","splice","indexes","indexInTodo","_generalManagerHRI$ti","on","off","startTimer","stopTimer","current","scenarioReducer","localStore","redux","createLogger","diff","duration","createStore","combineReducers","toolbar","composeWithDevTools","applyMiddleware","getScenarioSteps","getState","getStepByName","ALMemoryBridge","all","handleToolbarChange","handleChangeCurrentStep","handleStepCompleted","handleSetStepSkipped","handleToggleTimer","handleChangeCurrentScenario","handleChangeCurrentView","handleResetSteps","t0","t1","t2","t3","t4","t5","t6","changeToolbar","possibleSystems","ViewManager","errorInfo","comp","nextProps","prevState","DEFAULT_COLOR","r","g","b","ProgressBar","changeCurrentValue","max","percentLoad","round","deltaColor","addToColor","removeToColor","convertToHex","field","getHexValue","defaultProps","Step","progressBarRef","progressBarKey","resetFunc","reset","Global_reusableComponent_ProgressBar","Status","done","todo","skipped","TimeBoard","createStepFromProps","sortedSteps","parentDiv","stepsElems","classList","add","remove","TimeBoard_Step","nextSteps","oldSteps","newSortedSteps","compareSteps","nbStepsDone","aStep","scrollTop","sort","stepA","stepB","Icon","animation","copyright","Toolbar","infos","icons","Global_reusableComponent_Icon","internetError","muteMicro","pcProblem","nbClickForDebug","askForDebug","ontouchmove","e","preventDefault","Global_TimeBoard","Global_Toolbar_Toolbar","src_view_ViewManager","ViewSimulator","handleSelectChange","evt","persist","currentViewSelected","target","handleJsonChange","currentJson","handleSubmit","json","replaceAll","imagePath","onSubmit","htmlFor","onChange","apiCommon","apiTabletLM","apiGeneralManagerHRI","handleImageClick","handleVideoClick","handleVideoInputChange","handleImageInputChange","videoPath","imagesOptions","img","videosOptions","Array","view_Debug_ViewSimulator","toggleTimeBoardVisibilty","setStepRecieved","timeToggleTimer","timeStepSkipped","timeStepComplete","timeStepChangeCurrent","gotoMainMenu","tool","changeCurrentView","stepId"],"mappings":"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","file":"static/js/main.2c1d0637.chunk.js","sourcesContent":["import React, {Component} from 'react';\r\nimport {connect} from \"react-redux\";\r\nimport {comAction} from \"../../../redux/actions/CommunicationAction\";\r\nimport ComponentTitle from \"../reusableComponent/ComponentTitle\";\r\nimport {SpeakableButton} from \"../reusableComponent/Button/SpeakableButton\";\r\nimport './MainMenu.css'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\t\r\n\t\taskToChangeScenario: scenarioName => {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: comAction.askToChangeScenario.type,\r\n\t\t\t\tscenario: scenarioName\r\n\t\t\t})\r\n\t\t}\r\n\t\t\r\n\t}\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tscenario: state.scenario\r\n\t};\r\n};\r\n\r\nclass MainMenu extends Component {\r\n\t\r\n\tstatic propTypes = {\r\n\t\tscenarios: PropTypes.arrayOf(String)\r\n\t};\r\n\t\r\n\trender() {\r\n\t\t\r\n\t\tconst buttons = [];\r\n\t\t\r\n\t\t(this.props.scenarios || comAction.askToChangeScenario.scenario).forEach(scenario => {\r\n\t\t\tbuttons.push(\r\n\t\t\t\t<SpeakableButton\r\n\t\t\t\t\tonClick={() => this.props.askToChangeScenario(scenario['id'])}>\r\n\t\t\t\t\t{scenario['name']}\r\n\t\t\t\t</SpeakableButton>\r\n\t\t\t)\r\n\t\t});\r\n\t\t\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div className={\"MainMenu\"}>\r\n\t\t\t\t<ComponentTitle>{this.props.textToShow || this.props.children}</ComponentTitle>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{buttons}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MainMenu);","import ConfigWrapper from \"../../controller/ConfigWrapper\";\r\n\r\nconst {apis: {generalManagerHRI}} = ConfigWrapper.get();\r\n\r\nexport const scenarioAction = {\r\n\tcurrentScenario: {\r\n\t\ttype: generalManagerHRI.currentScenario.reduxKey,\r\n\t\tscenario: \"SCENARIO\"\r\n\t}\r\n};","import PropTypes from \"prop-types\";\r\n\r\n\r\nconst personPropTypes = PropTypes.shape({\r\n\tname: PropTypes.string.isRequired,\r\n\tdrinkName: PropTypes.number.isRequired\r\n});\r\n\r\n\r\nconst UserComponentPropTypes = {\r\n\ttextToShow: PropTypes.string.isRequired,\r\n\timagePath: PropTypes.string,\r\n\tchoices: PropTypes.arrayOf(PropTypes.string),\r\n\tpeople: PropTypes.shape({\r\n\t\twho: personPropTypes.isRequired,\r\n\t\tto: personPropTypes.isRequired\r\n\t}),\r\n\tlocation: PropTypes.string,\r\n\ttime: PropTypes.number\r\n\t\r\n};\r\n\r\nexport {\r\n\tUserComponentPropTypes\r\n}","import React, {Component} from 'react';\r\nimport SpeakableButton from \"../reusableComponent/Button/SpeakableButton\";\r\nimport {comAction} from \"../../../redux/actions/CommunicationAction\";\r\nimport {connect} from \"react-redux\";\r\nimport './AskName.css'\r\nimport {UserComponentPropTypes} from \"../../../dev/types\";\r\nimport ComponentTitle from \"../reusableComponent/ComponentTitle\";\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tsendName: (dispatch, name) => {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: comAction.dataJs.type,\r\n\t\t\t\tdataType: comAction.dataJs.dataType.name,\r\n\t\t\t\tdata: name\r\n\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n};\r\n\r\nclass AskName extends Component {\r\n\t\r\n\tstatic propTypes = {\r\n\t\t...UserComponentPropTypes\r\n\t};\r\n\t\r\n\t\r\n\trender() {\r\n\t\t\r\n\t\tconst textToShow = this.props.textToShow || \"Hello, what is your name ?\";\r\n\t\t\r\n\t\tlet names;\r\n\t\tif (this.props.names && this.props.names.length > 0) {\r\n\t\t\tnames = this.props.names\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<ComponentTitle>{textToShow}</ComponentTitle>\r\n\t\t\t\t<div className=\"names\">\r\n\t\t\t\t\t{names.map(name => <SpeakableButton\r\n\t\t\t\t\t\tonClick={() => this.props.sendName(this.props.dispatch, name)}>{name}</SpeakableButton>)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nexport default connect(mapDispatchToProps)(AskName);","import React, {Component} from 'react';\r\nimport {connect} from \"react-redux\";\r\nimport './AskAge.css'\r\nimport {comAction} from \"../../../../redux/actions/CommunicationAction\";\r\nimport ComponentTitle from \"../../../Global/reusableComponent/ComponentTitle\";\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tsendName: (dispatch, name) => {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: comAction.dataJs.type,\r\n\t\t\t\tdataType: comAction.dataJs.dataType.age,\r\n\t\t\t\tdata: name\r\n\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\nclass AskAge extends Component {\r\n\t\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tvalue: \"\"\r\n\t\t}\r\n\t}\r\n\t\r\n\tdeleteNumber() {\r\n\t\tthis.setState(prev => {\r\n\t\t\treturn {\r\n\t\t\t\t...prev,\r\n\t\t\t\tvalue: prev.value.slice(0, -1)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\t\r\n\taddNumber(number) {\r\n\t\tif (this.state.value.length < 3) {\r\n\t\t\tthis.setState(prev => {\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tlet newValue = Number.parseInt(prev.value + number.toString());\r\n\t\t\t\t\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...prev,\r\n\t\t\t\t\tvalue: newValue.toString()\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\t\r\n\trender() {\r\n\t\t\r\n\t\tconst textToShow = this.props.textToShow || \"Hello X, how old are you ?\";\r\n\t\t\r\n\t\tconst digits = [];\r\n\t\t\r\n\t\tfor (let i = 1; i < 10; i++) {\r\n\t\t\tdigits.push(<button className={\"btn btn-classic\"}\r\n\t\t\t                    onClick={() => this.addNumber(i)}>{i}</button>)\r\n\t\t}\r\n\t\t\r\n\t\tconst value = (this.state.value.length > 0) ? this.state.value : \"0\";\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<ComponentTitle>{textToShow}</ComponentTitle>\r\n\t\t\t\t<div id=\"ages\">\r\n\t\t\t\t\t<p className=\"value\">{value}</p>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<div id=\"digits\">\r\n\t\t\t\t\t\t{digits}\r\n\t\t\t\t\t\t<button className={\"btn no\"}\r\n\t\t\t\t\t\t        onClick={() => this.deleteNumber()}>DEL\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button className={\"btn btn-classic\"}\r\n\t\t\t\t\t\t        onClick={() => this.addNumber(0)}>0\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button className={\"btn ok\"}\r\n\t\t\t\t\t\t        onClick={() => this.props.sendName(this.props.dispatch, Number.parseInt(this.state.value))}>OK\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nexport default connect(mapDispatchToProps)(AskAge);","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport './Drink.css'\n\n\nclass Drink extends Component {\n\t\n\tstatic drinksNameToPathMap = {};\n\t\n\tstatic propTypes = {\n\t\tname: PropTypes.string.isRequired,\n\t\tpathOnTablet: PropTypes.string.isRequired,\n\t\tsize: PropTypes.oneOf([\"sm\", \"me\", \"lg\"])\n\t};\n\t\n\trender() {\n\t\tlet className = \"Drink \" + this.props.size;\n\t\t\n\t\treturn (\n\t\t\t<img className={className}\n\t\t\t     src={this.props.pathOnTablet}\n\t\t\t     alt={this.props.name}/>\n\t\t);\n\t}\n}\n\nexport default Drink;\n\n\n","import React, {Component} from 'react';\r\nimport SpeakableButton from \"../reusableComponent/Button/SpeakableButton\";\r\nimport {comAction} from \"../../../redux/actions/CommunicationAction\";\r\nimport {connect} from \"react-redux\";\r\nimport './AskDrink.css'\r\nimport ComponentTitle from \"../reusableComponent/ComponentTitle\";\r\nimport Drink from \"../reusableComponent/Drink/Drink\";\r\nimport PropTypes from 'prop-types'\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tsendName: (dispatch, name) => {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: comAction.dataJs.type,\r\n\t\t\t\tdataType: comAction.dataJs.dataType.drink,\r\n\t\t\t\tdata: name\r\n\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\nclass AskName extends Component {\r\n\t\r\n\tstatic propTypes = {\r\n\t\timagePath: PropTypes.string.isRequired,\r\n\t\ttextToShow: PropTypes.string.isRequired\r\n\t};\r\n\t\r\n\trender() {\r\n\t\t\r\n\t\tconst textToShow = this.props.textToShow || \"Hello X, what is your prefered drinks ?\";\r\n\t\t\r\n\t\t\r\n\t\tlet drinks;\r\n\t\tif (this.props.drinks && this.props.drinks.length > 0) {\r\n\t\t\tdrinks = this.props.drinks\r\n\t\t}\r\n\t\t\r\n\t\tconst displayed = [];\r\n\t\tdrinks.forEach(drink => {\r\n\t\t\tdisplayed.push(<div>\r\n\t\t\t\t<SpeakableButton\r\n\t\t\t\t\timage={<Drink name={drink['name']}\r\n\t\t\t\t\t              pathOnTablet={drink['pathOnTablet']}/>}\r\n\t\t\t\t\tonClick={() => this.props.sendName(this.props.dispatch, drink['name'])}\r\n\t\t\t\t>\r\n\t\t\t\t\t{drink['name']}\r\n\t\t\t\t</SpeakableButton>\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t</div>)\r\n\t\t});\r\n\t\treturn (\r\n\t\t\t\r\n\t\t\t<div id={\"AskDrink\"}>\r\n\t\t\t\t<ComponentTitle>{textToShow}</ComponentTitle>\r\n\t\t\t\t<div className=\"drinks\">\r\n\t\t\t\t\t{displayed}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nexport default connect(mapDispatchToProps)(AskName);","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport './Guest.css'\r\nimport Drink from \"../../../Global/reusableComponent/Drink/Drink\";\r\n\r\n\r\nclass Guest extends React.Component {\r\n\t\r\n\tstatic propTypes = {\r\n\t\tdrinkObj: PropTypes.object,\r\n\t\tname: PropTypes.string.isRequired,\r\n\t\tguestPhotoPath: PropTypes.string\r\n\t};\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tconsole.log(\"PROPS : \", props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tname: props.name,\r\n\t\t\tdrinkObj: props.drinkObj\r\n\t\t};\r\n\t\tconsole.warn(\"Guest.state\", this.state)\r\n\t}\r\n\t\r\n\t\r\n\trender()\r\n\t{\r\n\t\t\r\n\t\tlet drink = this.props.drinkObj !== undefined ? <>\r\n\t\t\t<p className={\"guestDrink\"}>{this.state.name} likes: {this.state.drinkObj.name} </p>\r\n\t\t\t<Drink\r\n\t\t\t\tsize={\"lg\"}\r\n\t\t\t\tname={this.state.drinkObj['name']}\r\n\t\t\t\tpathOnTablet={this.state.drinkObj[\"pathOnTablet\"]}/>\r\n\t\t</> : null;\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div className=\"Guest\">\r\n\t\t\t\t<img src={this.props.guestPhotoPath} alt={this.state.name}/>\r\n\t\t\t\t{drink}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\t\r\n\t\r\n}\r\n\r\nexport default Guest","import React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport PropTypes from \"prop-types\";\r\nimport Guest from \"./Guest\";\r\nimport './PresentPeople.css'\r\nimport {comAction} from \"../../../../redux/actions/CommunicationAction\";\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {};\r\n}\r\n\r\nconst peopleProps = PropTypes.shape({\r\n\tname: PropTypes.string.isRequired,\r\n\tdrink: PropTypes.number.isRequired\r\n});\r\n\r\nexport class PresentPerson extends Component {\r\n\t\r\n\tstatic propTypes = {\r\n\t\tpeople: PropTypes.shape({\r\n\t\t\twho: peopleProps.isRequired,\r\n\t\t\tto: PropTypes.arrayOf(peopleProps).isRequired\r\n\t\t})\r\n\t};\r\n\t\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tconsole.log(\"Present People \", props)\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\tthis.props.viewOk()\r\n\t}\r\n\t\r\n\trender() {\r\n\t\t\r\n\t\tlet toDiv;\r\n\t\tif (this.props.people.to.length !== undefined) {\r\n\t\t\t// Their is an array of people\r\n\t\t\tlet peoples = [];\r\n\t\t\tconsole.log(\"People TO array : \", this.props.people.to);\r\n\t\t\tthis.props.people.to.forEach(guy => {\r\n\t\t\t\tconsole.log(\"39\", guy);\r\n\t\t\t\tpeoples.push(<Guest name={guy}/>)\r\n\t\t\t});\r\n\t\t\ttoDiv = <div>{peoples}</div>\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div className={\"PresentPerson\"}>\r\n\t\t\t\t<Guest drinkObj={this.props.people.who.drink}\r\n\t\t\t\t       name={this.props.people.who.name}/>\r\n\t\t\t\t{toDiv}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tviewOk: () => {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: comAction.dataJs.type,\r\n\t\t\t\tdata: {status: 200}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PresentPerson);\r\n","import React, {Component} from 'react';\r\nimport * as ReactDOM from \"react-dom\";\r\nimport {SpeakableButton} from \"./SpeakableButton\";\r\nimport './Button.css'\r\nimport PropTypes from \"prop-types\";\r\nimport ReactTestUtils from 'react-dom/test-utils'; // ES6\r\n\r\nclass AutoValidationButton extends Component {\r\n\t\r\n\t\r\n\tstatic propTypes = {\r\n\t\ttimeout: PropTypes.number.isRequired, // timeout in second before the button is automaticly pressed.\r\n\t\t...SpeakableButton.propTypes\r\n\t};\r\n\tsubButton = React.createRef();\r\n\t\r\n\tstatic drawToXY(canvas, x, y) {\r\n\t\t\r\n\t\tconst ctx = canvas.getContext(\"2d\");\r\n\t\t\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(canvas.width / 2, canvas.height / 2);\r\n\t\tctx.lineTo(x, y);\r\n\t\t// ctx.fillRect(i, 0, size, size); // fill in the pixel at (10,10)\r\n\t\tctx.strokeStyle = \"rgb(244,248,255)\";\r\n\t\t// todo change this color, its ugly.\r\n\t\tctx.stroke();\r\n\t}\r\n\t\r\n\tcomponentWillUnmount() {\r\n\t\tclearInterval(this.inter)\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\tconst canvas = document.querySelector(\"canvas#canvasOK\");\r\n\t\tconst ctx = canvas.getContext(\"2d\");\r\n\t\t\r\n\t\t\r\n\t\tcanvas.height = ReactDOM.findDOMNode(this).clientHeight;\r\n\t\tcanvas.width = ReactDOM.findDOMNode(this).clientWidth;\r\n\t\t\r\n\t\t\r\n\t\tctx.moveTo(canvas.width / 2, canvas.height / 2);\r\n\t\t\r\n\t\tlet i = 0;\r\n\t\t\r\n\t\tthis.inter = setInterval(() => {\r\n\t\t\tif (i > Math.PI * 2)\r\n\t\t\t{\r\n\t\t\t\tclearInterval(this.inter);\r\n\t\t\t\tReactTestUtils.Simulate.click(ReactDOM.findDOMNode(this.subButton));\r\n\t\t\t} else {\r\n\t\t\t\tAutoValidationButton.drawToXY(canvas, canvas.width * Math.cos(i) + canvas.height / 2, canvas.height * Math.sin(i) + canvas.height / 2);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Decrease it if you want to detail the animation care about performances issues\r\n\t\t\ti += 0.005;\r\n\t\t\t\r\n\t\t\t\r\n\t\t}, this.props.timeout * 1000 / 628);\r\n\t\t// 'timeout' * 1000 / 2 * PI * 100 => the animation will work for 'timeout' seconds\r\n\t\t\r\n\t}\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className={\"AutoValidationButton\"}>\r\n\t\t\t\t\r\n\t\t\t\t<SpeakableButton color={this.props.color}\r\n\t\t\t\t                 onClick={this.props.onClick}\r\n\t\t\t\t                 ref={ref => this.subButton = ref}>\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t{this.props.children}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<canvas id={\"canvasOK\"}/>\r\n\t\t\t\t</SpeakableButton>\r\n\t\t\t\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default AutoValidationButton","import React, {Component} from 'react';\r\nimport './Confirm.css'\r\nimport AutoValidationButton\r\n\tfrom \"../reusableComponent/Button/AutoValidationButton\";\r\nimport {SpeakableButton} from \"../reusableComponent/Button/SpeakableButton\";\r\nimport {comAction} from \"../../../redux/actions/CommunicationAction\";\r\nimport {connect} from \"react-redux\";\r\nimport {UserComponentPropTypes} from \"../../../dev/types\";\r\nimport ComponentTitle from \"../reusableComponent/ComponentTitle\";\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\thandleNoClick: (dispatch) => {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: comAction.dataJs.type,\r\n\t\t\t\tdataType: comAction.dataJs.dataType.confirm,\r\n\t\t\t\tdata: false\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t\r\n\t\t},\r\n\t\thandleYesClick: (dispatch) => {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: comAction.dataJs.type,\r\n\t\t\t\tdataType: comAction.dataJs.dataType.confirm,\r\n\t\t\t\tdata: true\r\n\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n};\r\n\r\nclass Confirm extends Component {\r\n\t\r\n\t\r\n\tstatic propTypes = {\r\n\t\t...UserComponentPropTypes,\r\n\t};\r\n\t\r\n\trender() {\r\n\t\t\r\n\t\t\r\n\t\tconst textToShow = this.props.textToShow || \"Are you sure that you want X?\";\r\n\t\t// if (this.props.imagePath !== undefined) { // todo implement it for the next robocup (image of confirmed drink)\r\n\t\t//\r\n\t\t// \timg = <img src={this.props.imagePath}\r\n\t\t// \t           alt=\"\"/>\r\n\t\t// }\r\n\t\t\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div className={\"Confirm\"}>\r\n\t\t\t\t<ComponentTitle>{textToShow}</ComponentTitle>\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t<div className={\"choices\"}>\r\n\t\t\t\t\t<SpeakableButton\r\n\t\t\t\t\t\tonClick={() => this.props.handleNoClick(this.props.dispatch)}\r\n\t\t\t\t\t\tcolor={\"no\"}>No</SpeakableButton>\r\n\t\t\t\t\t<AutoValidationButton\r\n\t\t\t\t\t\tonClick={() => this.props.handleYesClick(this.props.dispatch)}\r\n\t\t\t\t\t\tcolor={\"ok\"}\r\n\t\t\t\t\t\ttimeout={10}>Yes</AutoValidationButton>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(mapDispatchToProps)(Confirm);","import React, {Component} from 'react';\r\n\r\nclass DetailDrinks extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\tIl me faut du coca, ...\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default DetailDrinks;","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport ComponentTitle from \"../Global/reusableComponent/ComponentTitle\";\nimport './Generic.css'\n\nclass Generic extends Component {\n\t\n\tstatic propTypes = {\n\t\timage: PropTypes.shape({\n\t\t\tpathOnTablet: PropTypes.string,\n\t\t\talternative: PropTypes.string\n\t\t}),\n\t\tvideo: PropTypes.shape({\n\t\t\tpathOnTablet: PropTypes.string,\n\t\t\talternative: PropTypes.string\n\t\t}),\n\t\ttitle: PropTypes.string,\n\t\tlist: PropTypes.arrayOf(PropTypes.string),\n\t\tcontent: PropTypes.string,\n\t\tnoContainer: PropTypes.bool\n\t};\n\t\n\trender() {\n\t\t\n\t\tlet video = null,\n\t\t\timage = null,\n\t\t\ttitle = null,\n\t\t\tlist = null,\n\t\t\tmedias = null,\n\t\t\tcontent = null;\n\t\t\n\t\tif (this.props.title) {\n\t\t\ttitle = <ComponentTitle>{this.props.title}</ComponentTitle>\n\t\t\t\n\t\t}\n\t\t\n\t\tif (this.props.image) {\n\t\t\timage = <img src={this.props.image.pathOnTablet}\n\t\t\t             alt={this.props.image.alternative}/>\n\t\t}\n\t\t\n\t\tif (this.props.video) {\n\t\t\tvideo = <img src={this.props.video.pathOnTablet}\n\t\t\t             alt={this.props.video.alternative}/>\n\t\t}\n\t\t\n\t\tif (this.props.content) {\n\t\t\tcontent = this.props.content\n\t\t}\n\t\t\n\t\tif (this.props.video || this.props.image) {\n\t\t\tmedias = <div className=\"media\">\n\t\t\t\t{image}\n\t\t\t\t{video}\n\t\t\t</div>\n\t\t}\n\t\t\n\t\tif (this.props.list) {\n\t\t\tlet arr = [];\n\t\t\tthis.props.list.forEach(elem => {\n\t\t\t\tarr.push(<li>{elem}</li>)\n\t\t\t});\n\t\t\tlist = <ol>{arr}</ol>\n\t\t}\n\t\t\n\t\tif (this.props.noContainer) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t{title}\n\t\t\t\t\t{medias}\n\t\t\t\t\t{content}\n\t\t\t\t\t{list}\n\t\t\t\t</>\n\t\t\t)\n\t\t\t\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t<div className={\"Generic\"}>\n\t\t\t\t\t{title}\n\t\t\t\t\t{medias}\n\t\t\t\t\t{content}\n\t\t\t\t\t{list}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\t\n\t}\n}\n\nexport default Generic;","import React, {Component} from 'react';\r\nimport PropTypes from \"prop-types\";\r\nimport \"./Goto.css\"\r\nimport {comAction} from \"../../../redux/actions/CommunicationAction\";\r\nimport {connect} from \"react-redux\";\r\nimport Generic from \"../../Generic\";\r\n\r\n\r\nclass Goto extends Component {\r\n\tstatic propTypes = {\r\n\t\tlocation: PropTypes.object.isRequired,\r\n\t\ttextToShow: PropTypes.string.isRequired,\r\n\t};\r\n\t\r\n\tcomponentDidMount() {\r\n\t\tthis.props.viewOk();\r\n\t}\r\n\t\r\n\trender() {\r\n\t\t\r\n\t\tconst textToShow = this.props.textToShow || \"I'm going to the \";\r\n\t\treturn (\r\n\t\t\t<div className=\"Goto\">\r\n\t\t\t\t<Generic image={this.props.location}\r\n\t\t\t\t         title={this.props.textToShow}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\r\n\t\t)\r\n\t\t// return (\r\n\t\t// \t<div className={\"Goto\"}>\r\n\t\t// \t\t<ComponentTitle>{textToShow}</ComponentTitle>\r\n\t\t// \t\t<div><Location obj={this.props.location}/></div>\r\n\t\t//\r\n\t\t// \t</div>\r\n\t\t// );\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {}\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tviewOk: () => {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: comAction.dataJs.type,\r\n\t\t\t\tdata: {status: 200}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Goto);","import React, {Component} from 'react';\r\n\r\nclass FindAvailableDrinks extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default FindAvailableDrinks;","import React, {Component} from 'react';\r\n\r\nclass FindWhoWantDrinks extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default FindWhoWantDrinks;","import React, {Component} from 'react';\r\nimport ComponentTitle from \"../../../Global/reusableComponent/ComponentTitle\";\r\nimport {comAction} from \"../../../../redux/actions/CommunicationAction\";\r\nimport {connect} from \"react-redux\";\r\n\r\nclass SeatGuest extends Component {\r\n\tstatic propTypes = {};\r\n\t\r\n\tcomponentDidMount() {\r\n\t\tthis.props.viewOk();\r\n\t}\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<ComponentTitle>{this.props.textToShow}</ComponentTitle>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {}\r\n};\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tviewOk: () => {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: comAction.dataJs.type,\r\n\t\t\t\tdata: {status: 200}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SeatGuest);","import React from 'react';\r\nimport PropTypes from \"prop-types\";\r\nimport './Location.css'\r\n\r\nfunction Location(props) {\r\n\t\r\n\treturn (\r\n\t\t<img className={\"Location\"}\r\n\t\t     src={props.obj[\"pathOnTablet\"]}\r\n\t\t     alt={props.obj[\"name\"]}/>\r\n\t);\r\n}\r\n\r\nLocation.propTypes = {\r\n\tobj: PropTypes.object.isRequired\r\n};\r\n\r\nexport default Location;","import React, {Component} from 'react';\r\nimport ComponentTitle from \"../reusableComponent/ComponentTitle\";\r\nimport Location from \"../reusableComponent/Location\";\r\nimport PropTypes from \"prop-types\";\r\nimport './AskToFollow.css'\r\nimport {comAction} from \"../../../redux/actions/CommunicationAction\";\r\n\r\nimport {connect} from \"react-redux\";\r\n\r\nclass AskToFollow extends Component {\r\n\t\r\n\tstatic propTypes = {\r\n\t\ttextToShow: PropTypes.string,\r\n\t\tlocation: PropTypes.object.isRequired\r\n\t};\r\n\t\r\n\tcomponentDidMount() {\r\n\t\tthis.props.viewOk();\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst textToShow = this.props.textToShow || \"Please follow me\";\r\n\t\tconsole.log(\"AskToFollow props\", this.props);\r\n\t\treturn (\r\n\t\t\t<div className={\"AskToFollow\"}>\r\n\t\t\t\t<ComponentTitle>{textToShow}</ComponentTitle>\r\n\t\t\t\t<Location obj={this.props.location}/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {}\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tviewOk: () => {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: comAction.dataJs.type,\r\n\t\t\t\tdata: {status: 200}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AskToFollow);","import React, {Component} from 'react';\r\n\r\nclass ServeDrinks extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default ServeDrinks;","import React, {Component} from 'react';\r\nimport PropTypes from \"prop-types\";\r\nimport {Doughnut} from 'react-chartjs-2'\r\nimport './Wait.css'\r\nimport ComponentTitle from \"../reusableComponent/ComponentTitle\";\r\nimport {comAction} from \"../../../redux/actions/CommunicationAction\";\r\n\r\nimport {connect} from \"react-redux\";\r\n\r\n\r\nclass Wait extends Component {\r\n\t\r\n\tstatic propTypes = {\r\n\t\ttime: PropTypes.number.isRequired\r\n\t};\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tremainingTime: this.props.time,\r\n\t\t\telapsedTime: 0\r\n\t\t}\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\tconst self = this;\r\n\t\tconst intervalId = setInterval(() => {\r\n\t\t\tself.setState(prev => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...prev,\r\n\t\t\t\t\tremainingTime: prev.remainingTime - 1,\r\n\t\t\t\t\telapsedTime: prev.elapsedTime + 1\r\n\t\t\t\t}\r\n\t\t\t}, () => {\r\n\t\t\t\tif (self.state.remainingTime === 0) {\r\n\t\t\t\t\tclearInterval(intervalId);\r\n\t\t\t\t\tthis.props.viewOk();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t\r\n\t\t}, 1000);\r\n\t}\r\n\t\r\n\t\r\n\trender() {\r\n\t\t\r\n\t\tlet title = this.props.textToShow;\r\n\t\tif (title === \"\") {\r\n\t\t\ttitle = \"I'm waiting for \";\r\n\t\t}\r\n\t\tconst data = {\r\n\t\t\tlabels: [\r\n\t\t\t\t\"\", \"\"\r\n\t\t\t],\r\n\t\t\tdatasets: [{\r\n\t\t\t\tdata: [this.props.time - this.state.elapsedTime, this.state.elapsedTime],\r\n\t\t\t\tbackgroundColor: [\r\n\t\t\t\t\t'#12c4ff',\r\n\t\t\t\t\t'rgba(54,162,235,0)',\r\n\t\t\t\t],\r\n\t\t\t\t\r\n\t\t\t}]\r\n\t\t};\r\n\t\t\r\n\t\tconst options = {\r\n\t\t\telements: {\r\n\t\t\t\tarc: {\r\n\t\t\t\t\tborderWidth: 0\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tlegend: {\r\n\t\t\t\tdisplay: false\r\n\t\t\t},\r\n\t\t\ttooltips: {\r\n\t\t\t\tenabled: false\r\n\t\t\t},\r\n\t\t\tresponsive: true,\r\n\t\t\tscales: {xAxes: [{display: false,}], yAxes: [{display: false,}],},\r\n\t\t\t\r\n\t\t\t\r\n\t\t};\r\n\t\tconst chart = <Doughnut data={data} options={options}/>;\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div id=\"Wait\">\r\n\t\t\t\t<ComponentTitle>{title}</ComponentTitle>\r\n\t\t\t\t<div id=\"chart\">\r\n\t\t\t\t\t<span className={\"timer\"}>{this.state.remainingTime}</span>\r\n\t\t\t\t\t{chart}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {}\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tviewOk: () => {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: comAction.dataJs.type,\r\n\t\t\t\tdata: {status: 200}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Wait);","import React, {Component} from 'react';\r\nimport {comAction} from \"../../../../redux/actions/CommunicationAction\";\r\nimport {connect} from \"react-redux\";\r\nimport ComponentTitle from \"../../../Global/reusableComponent/ComponentTitle\";\r\nimport {SpeakableButton} from \"../../../Global/reusableComponent/Button/SpeakableButton\";\r\nimport PropTypes from 'prop-types'\r\nimport './AskOpenDoor.css'\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\thandleClick: () => {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: comAction.dataJs.type,\r\n\t\t\t\tdata: {}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n};\r\n\r\nconst mapStateToProps = () => {\r\n\treturn {}\r\n};\r\n\r\nclass AskOpenDoor extends Component {\r\n\t\r\n\tstatic propTypes = {\r\n\t\ttextToShow: PropTypes.shape({\r\n\t\t\ttitle: PropTypes.string.isRequired,\r\n\t\t\tdescription: PropTypes.arrayOf(PropTypes.string).isRequired\r\n\t\t})\r\n\t};\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className={\"AskOpenDoor\"}>\r\n\t\t\t\t<ComponentTitle>{this.props.textToShow.title}</ComponentTitle>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<ul className=\"description\">\r\n\t\t\t\t\t\t{this.props.textToShow.description.map(str =>\r\n\t\t\t\t\t\t\t<li>{str}</li>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<SpeakableButton\r\n\t\t\t\t\t\t\tonClick={this.props.handleClick}>Next</SpeakableButton>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AskOpenDoor);","import React, {Component} from 'react';\r\nimport Wait from \"../../../Global/Wait\";\r\nimport {SpeakableButton} from \"../../../Global/reusableComponent/Button/SpeakableButton\";\r\nimport {comAction} from \"../../../../redux/actions/CommunicationAction\";\r\nimport {connect} from \"react-redux\";\r\nimport ComponentTitle from \"../../../Global/reusableComponent/ComponentTitle\";\r\nimport PropTypes from 'prop-types'\r\nimport './CallHuman.css'\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\thumanIsHere: () => {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: comAction.dataJs.type,\r\n\t\t\t\tdata: {}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {}\r\n};\r\n\r\n\r\nclass CallHuman extends Component {\r\n\t\r\n\tstatic propTypes = {\r\n\t\ttime: PropTypes.number.isRequired,\r\n\t\ttextToShow: PropTypes.string,\r\n\t\thumanIsHere: PropTypes.func.isRequired\r\n\t};\r\n\t\r\n\trender() {\r\n\t\tlet textToShow = this.props.textToShow || \"[PLACEHOLDER] I'm waiting for a human\";\r\n\t\treturn (\r\n\t\t\t<div className={\"CallHuman\"}>\r\n\t\t\t\t<ComponentTitle>{textToShow}</ComponentTitle>\r\n\t\t\t\t<SpeakableButton\r\n\t\t\t\t\tonClick={this.props.humanIsHere}>{\"I'm here\"}\r\n\t\t\t\t</SpeakableButton>\r\n\t\t\t\t<Wait time={this.props.time}/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CallHuman);","import React, {Component} from 'react';\r\nimport ComponentTitle from \"../reusableComponent/ComponentTitle\";\r\nimport PropTypes from 'prop-types'\r\nimport './ShowVideo.css'\r\nimport {SpeakableButton} from \"../reusableComponent/Button/SpeakableButton\";\r\nimport {comAction} from \"../../../redux/actions/CommunicationAction\";\r\nimport {connect} from \"react-redux\";\r\n\r\nclass ShowVideo extends Component {\r\n\t\r\n\tstatic propTypes = {\r\n\t\ttextToShow: PropTypes.shape({\r\n\t\t\ttitle: PropTypes.string.isRequired,\r\n\t\t\tdescription: PropTypes.arrayOf(PropTypes.string).isRequired\r\n\t\t}),\r\n\t\tvideo: PropTypes.shape({\r\n\t\t\tformat: PropTypes.oneOf(\"16/9\", \"4/3\").isRequired,\r\n\t\t\tpathOnTablet: PropTypes.string.isRequired\r\n\t\t}),\r\n\t};\r\n\t\r\n\t\r\n\trender() {\r\n\t\tconst textToShow = this.props.textToShow || {\r\n\t\t\ttitle: \"Please reproduce the videos\",\r\n\t\t\tdescription: [\"A\", \"B\", \"C\", \"D\"]\r\n\t\t};\r\n\t\t\r\n\t\tlet layout;\r\n\t\tlet video = <video autoPlay loop muted\r\n\t\t                   src={this.props.video['pathOnTablet']}/>;\r\n\t\tswitch (this.props.video[\"format\"]) {\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tcase \"16/9\":\r\n\t\t\t\tlayout = <div className={\"ShowVideo large\"}>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<ComponentTitle>{textToShow.title}</ComponentTitle>\r\n\t\t\t\t\t<SpeakableButton onClick={this.props.viewOk}>I'm\r\n\t\t\t\t\t\tdone</SpeakableButton>\r\n\t\t\t\t\t<div className={\"bottom\"}>\r\n\t\t\t\t\t\t<div className={\"video large\"}>\r\n\t\t\t\t\t\t\t{video}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<ol className={\"description\"}\r\n\t\t\t\t\t\t    id=\"steps\">{textToShow.description.map(str =>\r\n\t\t\t\t\t\t\t<li>{str}</li>)}\r\n\t\t\t\t\t\t</ol>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"4/3\":\r\n\t\t\t\tlayout = <div className={\"ShowVideo tail\"}>\r\n\t\t\t\t\t<div className={\"video tail\"}>\r\n\t\t\t\t\t\t{video}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"text tall\">\r\n\t\t\t\t\t\t<ComponentTitle>{textToShow.title}</ComponentTitle>\r\n\t\t\t\t\t\t<SpeakableButton onClick={this.props.viewOk}>I'm\r\n\t\t\t\t\t\t\tdone</SpeakableButton>\r\n\t\t\t\t\t\t<ol className={\"description\"}\r\n\t\t\t\t\t\t    id=\"steps\">{textToShow.description.map(str =>\r\n\t\t\t\t\t\t\t<li>{str}</li>)}</ol>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\treturn layout\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {}\r\n};\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tviewOk: () => {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: comAction.dataJs.type,\r\n\t\t\t\tdata: {status: 200}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default connect(mapStateToProps,\r\n\tmapDispatchToProps)(ShowVideo);\r\n","import AskName from \"../view/Global/AskName\";\r\nimport AskAge from \"../view/Scenario/Receptionist/AskAge\";\r\nimport AskDrink from \"../view/Global/AskDrink\";\r\nimport {PresentPerson} from \"../view/Scenario/Receptionist/PresentPeople\";\r\nimport Confirm from \"../view/Global/Confirm\";\r\nimport DetailDrinks from \"../view/Scenario/ServingDrinks/DetailDrinks\";\r\nimport GoTo from '../view/Global/GoTo/'\r\nimport FindAvailableDrinks\r\n\tfrom \"../view/Scenario/ServingDrinks/FindAvailableDrinks\";\r\nimport FindWhoWantsDrinks\r\n\tfrom \"../view/Scenario/ServingDrinks/FindWhoWantDrinks\";\r\nimport SeatGuest from \"../view/Scenario/Receptionist/SeatGuest\";\r\nimport AskToFollow from \"../view/Global/AskToFollow\";\r\nimport ServeDrinks from \"../view/Scenario/ServingDrinks/ServeDrinks\";\r\nimport MainMenu from '../view/Global/MainMenu/'\r\nimport Wait from \"../view/Global/Wait\";\r\nimport AskOpenDoor from \"../view/Scenario/Receptionist/AskOpenDoor\";\r\nimport CallHuman from '../view/Scenario/TakeOutTheGarbage/CallHuman'\r\nimport ShowVideo from '../view/Global/ShowVideo'\r\nimport Generic from \"../view/Generic\";\r\n\r\n/**\r\n * Get the Component class from his name (string)\r\n *\r\n * @param view\r\n * @return {*} Component MainMenu is return as default.\r\n */\r\nconst getClassFromView = (view) => {\r\n\treturn viewClassMap[view] || MainMenu;\r\n};\r\n\r\n/**\r\n * @description Map that resolve a name of a view (in views.json) to React component\r\n * If you want to **add new views** you have to modify this object\r\n */\r\nconst viewClassMap = {\r\n\t\"askName\": AskName,\r\n\t\"askDrink\": AskDrink,\r\n\t\"askAge\": AskAge,\r\n\t\"confirm\": Confirm,\r\n\t\"detailDrinks\": DetailDrinks,\r\n\t\"presentPerson\": PresentPerson,\r\n\t\"goTo\": GoTo,\r\n\t\"generic\": Generic,\r\n\t\"findAvailableDrinks\": FindAvailableDrinks,\r\n\t\"findWhoWantsDrinks\": FindWhoWantsDrinks,\r\n\t\"serveDrinks\": ServeDrinks,\r\n\t\"seatGuest\": SeatGuest,\r\n\t\"askToFollow\": AskToFollow,\r\n\t\"mainMenu\": MainMenu,\r\n\t\"wait\": Wait,\r\n\t\"askOpenDoor\": AskOpenDoor,\r\n\t\"callHuman\": CallHuman,\r\n\t\"showVideo\": ShowVideo\r\n\t\r\n\t\r\n};\r\n\r\n/**\r\n * @description Return all possible views of the application.\r\n * @return {Array<String>}\r\n */\r\nconst getAllViewsKey = () => {\r\n\treturn Object.keys(viewClassMap);\r\n};\r\n\r\n\r\nexport {\r\n\tgetClassFromView,\r\n\tgetAllViewsKey\r\n};","import logConfig from '../config/log'\nimport globalConfig from '../config/global'\nimport Logger from \"../dev/Logger\";\nimport ConfigWrapper from \"../controller/ConfigWrapper\";\n\n\n/**\n * @description This class is a wrapper of Naoqi's ALMemory\n * @class QiWrapper\n */\nclass QiWrapper {\n\t\n\t/**\n\t * @type {QiWrapper}\n\t */\n\tstatic #instance; // Singleton instance\n\t\n\t/**\n\t * @type {Logger}\n\t */\n\tstatic logger = new Logger(logConfig.QiWrapper, \"QiWrapper\");\n\t\n\t\n\t/**\n\t * @type {QiSession}\n\t */\n\t#session;\n\t\n\t#AlMemory; // QI Almemory Proxy\n\t\n\t/**\n\t * Do NOT call it directly, see @getInstanceSync\n\t * @description set proprieties for QiWrapper object.\n\t * @param session {QiSession} the session resulted from calling QiMessaging Api.\n\t * @param ALMemory the ALMemory's proxy resulted from session.service(\"AlMemory\");\n\t */\n\tconstructor(session, ALMemory) {\n\t\tthis.#session = session;\n\t\tthis.#AlMemory = ALMemory;\n\t\tQiWrapper.#instance = this;\n\t}\n\t\n\t/**\n\t * @param inst {QiWrapper | FalseQiWrapper}\n\t */\n\tstatic set instance(inst) {\n\t\tQiWrapper.#instance = inst;\n\t}\n\t\n\t/**\n\t * @returns {QiWrapper}\n\t */\n\tstatic getInstanceSync() {\n\t\treturn QiWrapper.#instance\n\t}\n\t\n\t/**\n\t * @description return the JSON's version of a value\n\t * @param value the value that have to be transform to JSON\n\t * @returns {string} the JSON's version of the value\n\t */\n\tstatic toJson(value) {\n\t\t// if (typeof (value) !== \"string\") {\n\t\t// \tvalue = JSON.stringify(value);\n\t\t// }\n\t\treturn JSON.stringify(value);\n\t}\n\t\n\t/**\n\t * @description Create an instance of QiWrapper accessible via promise\n\t * @returns {Promise<QiWrapper>}\n\t */\n\tstatic createInstance() {\n\t\t\n\t\t\n\t\treturn new Promise(resolve => {\n\t\t\t\n\t\t\tif (globalConfig.naoqiIsPresent) {\n\t\t\t\t// eslint-disable-next-line no-undef\n\t\t\t\tQiSession(async session => {\n\t\t\t\t\t\n\t\t\t\t\tawait session.service(\"ALMemory\").then(async ALMemory => {\n\t\t\t\t\t\t\n\t\t\t\t\t\tconst q = new QiWrapper(session, ALMemory);\n\t\t\t\t\t\tQiWrapper.#instance = q;\n\t\t\t\t\t\tQiWrapper.logger.log('QiWrapper : ', q);\n\t\t\t\t\t\treturn resolve(q);\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\treturn resolve(new FalseQiWrapper());\n\t\t\t}\n\t\t\t\n\t\t});\n\t\t\n\t\t\n\t}\n\t\n\t/**\n\t * @example to get the event when pepper catch a touch : QiWrapper.listen(\"TouchChanged\", (data) => {console.log(data)})\n\t * @param event {string} the event that will be subscribed\n\t * @param cb {function} the callback to do something when event is raised\n\t * @return {Promise<null>}\n\t */\n\tstatic listen(event, cb) {\n\t\treturn QiWrapper.getInstanceSync().listen(event, cb);\n\t}\n\t\n\tstatic setALValue(event, value) {\n\t\t\n\t\tif (ConfigWrapper.get().imPepper) {\n\t\t\tQiWrapper.getInstanceSync().setALValue(event, value)\n\t\t}\n\t}\n\t\n\t\n\t/**\n\t * @description get the value stored in a ALMemory\n\t * @param event {string} the name of the ALMemory\n\t * @returns {Promise<string>} the value in the ALMemory named {event}\n\t */\n\tstatic getALValue(event) {\n\t\treturn QiWrapper.getInstanceSync().getAlValue(event)\n\t\t\n\t}\n\t\n\t/**\n\t * @description raise an ALMemory event\n\t * @param event {string} the name of the ALMemory\n\t * @param value {Object} the value of the event\n\t * @return {Promise} a promise that is resolved when event is raised.\n\t */\n\tstatic raise(event, value) {\n\t\tif (ConfigWrapper.get().imPepper) {\n\t\t\t\n\t\t\treturn QiWrapper.getInstanceSync().raise(event, value)\n\t\t}\n\t\treturn Promise.resolve()\n\t\t\n\t}\n\t\n\t\n\t/**\n\t *\n\t * @example to get the event when pepper catch a touch : inst.listen(\"TouchChanged\", (data) => {console.log(data)})\n\t * @param event {string} the event that will be subscribed\n\t * @param callback {function} the callback to do something when event is raised\n\t * @return {Promise<null>}\n\t */\n\tlisten(event, callback) {\n\t\treturn new Promise(resolve =>\n\t\t\tthis.#AlMemory.subscriber(event).then(subscriber => {\n\t\t\t\tsubscriber.signal.connect(state => {\n\t\t\t\t\tcallback(JSON.parse(state));\n\t\t\t\t});\n\t\t\t\tQiWrapper.logger.event(\"Listen at\", event);\n\t\t\t\tresolve()\n\t\t\t})\n\t\t);\n\t}\n\t\n\t/**\n\t * @description Set the value in a ALMemory\n\t * @param event {string} the name of the ALMemory\n\t * @param value {Object} the value of the event\n\t *\n\t */\n\tsetALValue(event, value) {\n\t\tvalue = QiWrapper.toJson(value);\n\t\tQiWrapper.logger.event(\"Set ALValue on \" + event, value);\n\t\tthis.#AlMemory.insertData(event, value)\n\t\t\n\t}\n\t\n\t/**\n\t * @description get the value stored in a ALMemory\n\t * @param event {string} the name of the ALMemory\n\t * @returns {Promise<string>} the value in the ALMemory named {event}\n\t */\n\tasync getAlValue(event) {\n\t\tconst promisedValue = this.#AlMemory.getData(event);\n\t\t\n\t\tlet value = await promisedValue;\n\t\tQiWrapper.logger.event(`getAlValue from ${event}`, value);\n\t\treturn promisedValue;\n\t\t\n\t}\n\t\n\t/**\n\t * @description raise an ALMemory event\n\t * @param event {string} the name of the ALMemory\n\t * @param value {Object} the value of the event\n\t * @return {Promise} a promise that is resolved when event is raised.\n\t */\n\traise(event, value) {\n\t\t\n\t\tvalue = QiWrapper.toJson(value);\n\t\t\n\t\tif (event.includes(\"R2019/Global/LmLogger\"))\n\t\t\tQiWrapper.logger.log(`Send on ${event}`, value, false);\n\t\telse {\n\t\t\tif (value.includes(\"eartbeat\"))\n\t\t\t{\n\t\t\t\tQiWrapper.logger.heartbeat(`Send on ${event}`, value, true);\n\t\t\t} else {\n\t\t\t\tQiWrapper.logger.event(`Send on ${event}`, value, true)\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\treturn this.#AlMemory['raiseEvent'](event, value);\n\t}\n}\n\nclass FalseQiWrapper {\n\t\n\t#client;\n\t\n\tconstructor(url) {\n\t\t\n\t\tQiWrapper.instance = this;\n\t\tthis.#client = new WebSocket(url, \"json\");\n\t}\n\t\n\t// static warningMessage = () => QiWrapper.logger.warn(\"FalseRaise\", \"Naoqi is not present in global.config, check if it's not wanted\");\n\tstatic warningMessage() {\n\t}\n\t\n\traise(x, y) {\n\t\tFalseQiWrapper.warningMessage()\n\t};\n\t\n\tlisten(x, y) {\n\t\tFalseQiWrapper.warningMessage()\n\t};\n\t\n\tsetALValue(x, y) {\n\t\tFalseQiWrapper.warningMessage()\n\t};\n\t\n\tgetAlValue(x, y) {\n\t\tFalseQiWrapper.warningMessage()\n\t};\n\t\n}\n\n\nexport default QiWrapper;","import React, {Component} from 'react';\r\n\r\nclass ComponentTitle extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<h2 className={\"ComponentTitle\"}>{this.props.children}</h2>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default ComponentTitle;","module.exports = __webpack_public_path__ + \"static/media/internetError.d78a4b0b.svg\";","module.exports = __webpack_public_path__ + \"static/media/muteMicro.34690a2b.svg\";","module.exports = __webpack_public_path__ + \"static/media/pcProblem.55978f42.svg\";","import 'core-js';\r\nimport 'core-js/es/set'\r\nimport 'core-js/es/map'\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport QiWrapper from \"./model/QiWrapper\";\r\nimport ConfigWrapper from \"./controller/ConfigWrapper\";\r\n\r\nasync function initApp() {\r\n\t\r\n\tconst qi = await QiWrapper.createInstance();\r\n\tawait ConfigWrapper.setConfigFromALMemory();\r\n\t\r\n\tconst ALMemoryBridge = require(\"./controller/ALMemoryBridge\").default;\r\n\t\r\n\tALMemoryBridge.initBridge(qi);\r\n\tconst App = require(\"./App\").default;\r\n\tconst Provider = require(\"react-redux\").Provider;\r\n\tconst getStore = require(\"./redux/Store\").default;\r\n\tconst Debug = require(\"./view/Debug/Debug\").default;\r\n\t\r\n\tReactDOM.render(<Provider store={getStore()}>\r\n\t\t<App/>\r\n\t\t<Debug/>\r\n\t</Provider>, document.getElementById('root'));\r\n\t\r\n\t\r\n}\r\n\r\ninitApp().then(() => {\r\n\tconsole.log(\"App Loaded\")\r\n\tconst {apis: {tabletLM}} = ConfigWrapper.get();\r\n\tQiWrapper.raise(tabletLM[\"tabletOperational\"][\"ALMemory\"], {'time': Date.now()})\r\n\r\n\t\r\n\t\r\n});\r\n\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\n","const deepFreeze = (obj) => {\r\n\tif (typeof obj !== \"string\") {\r\n\t\tconst keys = Object.keys(obj);\r\n\t\tkeys.forEach(key => {\r\n\t\t\tdeepFreeze(obj[key])\r\n\t\t});\r\n\t}\r\n\tObject.freeze(obj);\r\n\t\r\n};\r\n\r\nexport {\r\n\tdeepFreeze\r\n}","/**\r\n * @description this class is just a wrapper App Configs (Steps, drinks, ...)\r\n */\r\n\r\nimport QiWrapper from \"../model/QiWrapper\";\r\nimport Logger from \"../dev/Logger\";\r\nimport {deepFreeze} from \"../dev/Tools\";\r\nimport React from \"react\";\r\nimport ReactDOM from 'react-dom'\r\n\r\n/**\r\n * @description the almemory where is place the json with all informations about which Almemory is used by the App\r\n * @type {string}\r\n */\r\nconst CONFIG_ALMEMORY = \"R2019/Api/Common\";\r\n\r\n\r\nexport default class ConfigWrapper\r\n{\r\n\t// static #_steps = steps;\r\n\t\r\n\tstatic #_videos;\r\n\t\r\n\tstatic #_locations;\r\n\tstatic #_images;\r\n\tstatic #_apis;\r\n\t\r\n\tstatic #_imPepper = false;\r\n\t\r\n\t\r\n\tstatic logger = new Logger(true, \"ConfigWrapper\");\r\n\t\r\n\t// static #_AlMemoryEvent ;\r\n\t\r\n\tstatic init() {\r\n\t\tconst agent = navigator.userAgent\r\n\t\t\r\n\t\t// todo to get Navigator version\r\n\t\t// alert(agent);\r\n\t\t\r\n\t\tconst allowedVersion = [\r\n\t\t\t\"Chrome/44.0.2403.157\", // Pepper 1.8a\r\n\t\t\t\"Chrome/39.0.2171.71\"   // Pepper 1.6\r\n\t\t];\r\n\t\tallowedVersion.forEach(v => {\r\n\t\t\tConfigWrapper.#_imPepper = ConfigWrapper.#_imPepper || agent.includes(v);\r\n\t\t});\r\n\t\tconsole.log(\"init done\", ConfigWrapper.#_imPepper)\r\n\t}\r\n\t\r\n\tstatic async setConfigFromALMemory() {\r\n\t\t\r\n\t\tConfigWrapper.init();\r\n\t\t\r\n\t\ttry {\r\n\t\t\tConfigWrapper.#_apis = {\r\n\t\t\t\tcommon: JSON.parse(await QiWrapper.getALValue(CONFIG_ALMEMORY)),\r\n\t\t\t\ttabletLM: null,\r\n\t\t\t\tgeneralManagerHRI: null\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tConfigWrapper.#_apis.tabletLM = JSON.parse(\r\n\t\t\t\tawait QiWrapper.getALValue(\r\n\t\t\t\t\tConfigWrapper.#_apis.common[\"AL_VALUE\"][\"apis\"][\"tabletLM\"]\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\tConfigWrapper.#_apis.generalManagerHRI = JSON.parse(\r\n\t\t\t\tawait QiWrapper.getALValue(\r\n\t\t\t\t\tConfigWrapper.#_apis.common[\"AL_VALUE\"][\"apis\"][\"generalManagerHRI\"]\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tConfigWrapper.#_images = JSON.parse(\r\n\t\t\t\tawait QiWrapper.getALValue(\r\n\t\t\t\t\tConfigWrapper.#_apis.common['AL_VALUE']['images']\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\tConfigWrapper.#_locations = JSON.parse(\r\n\t\t\t\tawait QiWrapper.getALValue(\r\n\t\t\t\t\tConfigWrapper.#_apis.common[\"AL_VALUE\"][\"locations\"]\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\tconst rawVideos = JSON.parse(\r\n\t\t\t\tawait QiWrapper.getALValue(\r\n\t\t\t\t\tConfigWrapper.#_apis.common[\"AL_VALUE\"][\"videos\"]\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\tConfigWrapper.#_videos = {};\r\n\t\t\trawVideos.forEach(video => {\r\n\t\t\t\tConfigWrapper.#_videos[video[\"id\"]] = video['pathOnTablet']\r\n\t\t\t});\r\n\t\t\tconst got = ConfigWrapper.get()\r\n\t\t\tdeepFreeze(got);\r\n\t\t\tConfigWrapper.logger.log(\"ConfigWrapper logged from Naoqi\", got);\r\n\t\t\t\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(\"Error in ConfigWrapper\", e);\r\n\t\t\tconst style = {\r\n\t\t\t\tbackgroundColor: \"#FFF\",\r\n\t\t\t\tcolor: \"#F00\",\r\n\t\t\t\tdisplay: \"block\",\r\n\t\t\t\tposition: \"absolute\",\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tleft: 0\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tReactDOM.render(<p style={style}>Error while initialising ALMemory\r\n\t\t\t\t(Config) : can't read Common API in ALMemories, make sure that\r\n\t\t\t\tLocal manager is started</p>, document.querySelector(\"body\"));\r\n\t\t\tconsole.log(\"Done\")\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t *\r\n\t * @return {{apis : {common, tabletLM, generalManagerHRI}, imPepper, images, locations,  videos}}\r\n\t */\r\n\tstatic get() {\r\n\t\t\r\n\t\t\r\n\t\treturn {\r\n\t\t\tlocations: ConfigWrapper.#_locations,\r\n\t\t\tvideos: ConfigWrapper.#_videos,\r\n\t\t\timages: ConfigWrapper.#_images,\r\n\t\t\timPepper: ConfigWrapper.#_imPepper,\r\n\t\t\tapis: {\r\n\t\t\t\tcommon: ConfigWrapper.#_apis.common,\r\n\t\t\t\ttabletLM: ConfigWrapper.#_apis.tabletLM,\r\n\t\t\t\tgeneralManagerHRI: ConfigWrapper.#_apis.generalManagerHRI\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n}","import QiWrapper from \"../model/QiWrapper\";\r\n\r\nconst [HEARTBEAT, EVENT, DEBUG, INFO, WARNING, ERROR, CRITICAL] = [0, 1, 2, 3, 4, 5, 6];\r\nconst loggerALMemory = \"R2019/Global/LmLogger\";\r\nexport default class Logger {\r\n\t\r\n\t#state;\r\n\t#label;\r\n\t\r\n\tconstructor(state, label = \"\") {\r\n\t\tif (state && label !== \"\") {\r\n\t\t\tconsole.info(\"Logging on \" + label)\r\n\t\t}\r\n\t\t\r\n\t\tthis.#state = state;\r\n\t\tthis.#label = label\r\n\t}\r\n\t\r\n\t\r\n\tdebug(funcName, x = \"\", sendToLm = true) {\r\n\t\tif (this.#state)\r\n\t\t{\r\n\t\t\tconsole.debug(`${this.#label}: ${funcName}`, x);\r\n\t\t\tthis.sendToLm(sendToLm, funcName, x, DEBUG)\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\t\r\n\tlog(funcName, x = \"\", sendToLm = true) {\r\n\t\tif (this.#state)\r\n\t\t{\r\n\t\t\tconsole.log(`${this.#label}: ${funcName}`, x);\r\n\t\t\tthis.sendToLm(sendToLm, funcName, x, INFO);\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\tsendToLm(sendToLm, funcName, x, level) {\r\n\t\tif (sendToLm)\r\n\t\t{\r\n\t\t\tQiWrapper.raise(loggerALMemory, {\r\n\t\t\t\tmessage: `${funcName} ${x}`,\r\n\t\t\t\tapplication: `${this.#label}`,\r\n\t\t\t\tlevel: level\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\twarn(funcName, x = \"\", sendToLm = true) {\r\n\t\tif (this.#state)\r\n\t\t{\r\n\t\t\tconsole.warn(`${this.#label}: ${funcName}`, x);\r\n\t\t\tthis.sendToLm(sendToLm, funcName, x, WARNING)\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\terror(funcName, x = \"\", sendToLm = true) {\r\n\t\tif (this.#state)\r\n\t\t{\r\n\t\t\tconsole.error(`${this.#label}: ${funcName}`, x);\r\n\t\t\tthis.sendToLm(sendToLm, funcName, x, ERROR)\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\t\r\n\tevent(funcName, x = \"\", sendToLm = true) {\r\n\t\tif (this.#state)\r\n\t\t{\r\n\t\t\tconsole.info(`${this.#label}: ${funcName}`, x);\r\n\t\t\tthis.sendToLm(sendToLm, funcName, x, EVENT)\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\t\r\n\tcricical(funcName, x = \"\", sendToLm = true) {\r\n\t\tif (this.#state)\r\n\t\t{\r\n\t\t\tconsole.error(`${this.#label}: ${funcName}`, x);\r\n\t\t\tthis.sendToLm(sendToLm, funcName, x, CRITICAL)\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\t\r\n\theartbeat(funcName, x = \"\", sendToLm = true) {\r\n\t\tif (this.#state)\r\n\t\t{\r\n\t\t\tconsole.info(`${this.#label}: ${funcName}`, x);\r\n\t\t\tthis.sendToLm(sendToLm, funcName, x, HEARTBEAT)\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\t\r\n\ttime(label) {\r\n\t\tif (this.#state)\r\n\t\t\tconsole.time(label);\r\n\t}\r\n\t\r\n\t\r\n\ttimeEnd(label) {\r\n\t\tif (this.#state)\r\n\t\t\tconsole.timeEnd(label);\r\n\t}\r\n\t\r\n}","import ConfigWrapper from \"../../controller/ConfigWrapper\";\r\n\r\nconst {apis: {generalManagerHRI}} = ConfigWrapper.get();\r\n\r\n\r\nexport const timeAction = {\r\n\tpassSecond: {\r\n\t\ttype: \"PASS_A_SECOND\",\r\n\t\tglobalElapsedTime: 0\r\n\t},\r\n\t\r\n\tcurrentStep: {\r\n\t\ttype: generalManagerHRI.currentStep.reduxKey,\r\n\t},\r\n\t\r\n\tstepSkipped: {\r\n\t\ttype: generalManagerHRI.stepSkipped.reduxKey,\r\n\t},\r\n\t\r\n\tstepCompleted: {\r\n\t\ttype: generalManagerHRI.stepCompleted.reduxKey,\r\n\t},\r\n\ttimerState: {\r\n\t\ttype: generalManagerHRI.timerState.reduxKey,\r\n\t\tstate: generalManagerHRI.timerState.state,\r\n\t},\r\n\t\r\n\tresetStepsProgression: {\r\n\t\ttype: \"R2019/Timeboard/ResetStepsProgression\",\r\n\t},\r\n\t\r\n\treplaceAllSteps: {\r\n\t\ttype: \"REPLACE_ALL_STEPS\",\r\n\t\tsteps: [\"Steps\"]\r\n\t}\r\n\t\r\n};\r\n\r\n","import ConfigWrapper from \"../../controller/ConfigWrapper\";\r\n\r\nconst {apis: {common}} = ConfigWrapper.get();\r\n\r\nexport const toolbarAction = {\r\n\t\r\n\ttoolbarState: {\r\n\t\ttype: common.toolbarState.reduxKey,\r\n\t\tstate: {\r\n\t\t\tok: common.toolbarState.state.ok,\r\n\t\t\terror: common.toolbarState.state.error\r\n\t\t},\r\n\t\tsystem: {\r\n\t\t\t...common.toolbarState.system\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\n","import React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport PropTypes from \"prop-types\";\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {};\r\n}\r\n\r\n\r\nexport class SpeakableButton extends Component {\r\n\t\r\n\tstatic propTypes = {\r\n\t\tonClick: PropTypes.func.isRequired,\r\n\t\tcolor: PropTypes.oneOf([\"info\", \"danger\", \"warning\", \"success\", \"ok\", \"no\"]),\r\n\t\timage: PropTypes.object\r\n\t};\r\n\t\r\n\t\r\n\trender() {\r\n\t\t\r\n\t\tconst color = this.props.color || \"classic\";\r\n\t\t\r\n\t\tlet image = this.props.image || \"\";\r\n\t\treturn (\r\n\t\t\t<button onClick={this.props.onClick} className={`btn btn-${color}`}>\r\n\t\t\t\t{image}\r\n\t\t\t\t<p>\"{this.props.children}\"</p>\r\n\t\t\t</button>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n)(SpeakableButton);","import {viewAction} from \"../actions/ViewAction\";\r\nimport Logger from \"../../dev/Logger\";\r\nimport logConfig from '../../config/log'\r\n\r\n\r\nconst INITIAL_STATE = {\r\n\tcurrentView: null,\r\n\tcurrentData: {\r\n\t\ttextToShow: null,\r\n\t\tchoices: []\r\n\t},\r\n\tcomponentVisibility: {\r\n\t\ttimeBoard: viewAction.setComponentVisibility.state.visible\r\n\t}\r\n\t\r\n};\r\n\r\n\r\nconst logger = new Logger(logConfig.reducer.view, \"ViewReducer\");\r\n\r\nconst viewReducer = (state = INITIAL_STATE, action) => {\r\n\tswitch (action.type) {\r\n\t\t\r\n\t\t\r\n\t\tcase viewAction.changeView.type:\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tstate = {\r\n\t\t\t\t...state,\r\n\t\t\t\tcurrentView: action.view,\r\n\t\t\t\tcurrentData: action.data\r\n\t\t\t};\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tcase viewAction.setComponentVisibility.type :\r\n\t\t\t\r\n\t\t\tconst {timeBoard,} = viewAction.setComponentVisibility.component;\r\n\t\t\tif ([timeBoard].includes(action.component)) {\r\n\t\t\t\t\r\n\t\t\t\tconst {hidden, visible} = viewAction.setComponentVisibility.state;\r\n\t\t\t\tif ([hidden, visible].includes(action.state)) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (action.component === timeBoard) {\r\n\t\t\t\t\t\tstate = {\r\n\t\t\t\t\t\t\t...state,\r\n\t\t\t\t\t\t\tcomponentVisibility: {\r\n\t\t\t\t\t\t\t\t...state.componentVisibility,\r\n\t\t\t\t\t\t\t\ttimeBoard: action.state\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlogger.warn(\"setComponentVisibility\", \"unknown component visibility state\");\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\tlogger.warn(\"setComponentVisibility\", \"unknown component\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n\treturn state;\r\n};\r\n\r\nexport {\r\n\tviewReducer\r\n}","import {comAction} from \"../actions/CommunicationAction\";\r\nimport Logger from \"../../dev/Logger\";\r\nimport logConfig from '../../config/log'\r\nimport QiWrapper from \"../../model/QiWrapper\";\r\nimport ConfigQiWrapper from \"../../controller/ConfigWrapper\";\r\n\r\nconst {apis: {generalManagerHRI, common, tabletLM},} = ConfigQiWrapper.get();\r\n\r\nconst INITIAL_STATE = {\r\n\tlastLocalManagerHeartbeat: null,\r\n\tlastGeneralManagerHeartbeat: null,\r\n\tdelayWithPepper: 0\r\n};\r\nconst logger = new Logger(logConfig.reducer.com, \"ComReducer\");\r\n\r\n\r\nconst possibleActionType = [];\r\nObject.keys(comAction).forEach(key => possibleActionType.push(comAction[key].type));\r\n\r\n/**\r\n * @description Reducer for communication between the locale Manager (py) and JS\r\n */\r\nconst comReducer = (state = INITIAL_STATE, action) => {\r\n\t\t\r\n\t\tif (possibleActionType.includes(action.type)) {\r\n\t\t\t\r\n\t\t\tswitch (action.type) {\r\n\t\t\t\t\r\n\t\t\t\tcase comAction.stepReceived.type:\r\n\t\t\t\t\t\r\n\t\t\t\t\tQiWrapper.raise(generalManagerHRI.stepReceived.ALMemory, null);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tcase comAction.jsHeartbeat.type:\r\n\t\t\t\t\t\r\n\t\t\t\t\tQiWrapper.raise(common.jsHeartbeat.ALMemory, Date.now());\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\t\tcase comAction.dataJs.type:\r\n\t\t\t\t\tconst {ALMemory} = tabletLM.dataJs;\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tQiWrapper.raise(ALMemory, {\r\n\t\t\t\t\t\tdataType: action.dataType,\r\n\t\t\t\t\t\tdata: action.data,\r\n\t\t\t\t\t\tactionId: action.actionId\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\t\tcase comAction.extHeartbeat.type:\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (state.lastLocalManagerHeartbeat === null && action.time.lm !== undefined) {\r\n\t\t\t\t\t\tstate.delayWithPepper = Math.floor(Date.now() / 1000) - action.time.lm;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tstate = {\r\n\t\t\t\t\t\t...state,\r\n\t\t\t\t\t\tlastGeneralManagerHeartbeat: action.time.gm,\r\n\t\t\t\t\t\tlastLocalManagerHeartbeat: action.time.lm\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst currentTime = Date.now() / 1000;\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet diffLM = (currentTime - state.lastLocalManagerHeartbeat - state.delayWithPepper);\r\n\t\t\t\t\tconst LMStr = \"No heartbeats from LocalManager since \" + diffLM;\r\n\t\t\t\t\tif (diffLM > 10) {\r\n\t\t\t\t\t\tlogger.error(LMStr)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} else if (diffLM > 5) {\r\n\t\t\t\t\t\tlogger.warn(LMStr)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet diffGM = (currentTime - state.lastGeneralManagerHeartbeat);\r\n\t\t\t\t\tconst GMStr = \"No heartbeats from LocalManager since \" + diffGM;\r\n\t\t\t\t\tif (diffGM > 10) {\r\n\t\t\t\t\t\tlogger.error(GMStr)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} else if (diffGM > 5) {\r\n\t\t\t\t\t\tlogger.warn(GMStr)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tlogger.debug(currentTime);\r\n\t\t\t\t\t\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\t\tcase comAction.askToChangeScenario.type:\r\n\t\t\t\t\tQiWrapper.raise(generalManagerHRI.askToChangeScenario.ALMemory, {\r\n\t\t\t\t\t\tscenario: action.scenario\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t// console.warn(\"Unknown action on commmunication reducer\", action);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn state;\r\n\t\t\r\n\t}\r\n;\r\n\r\nexport {\r\n\tcomReducer\r\n}\r\n","import {toolbarAction} from '../actions/ToolbarAction'\r\n\r\nconst INITIAL_STATE = {\r\n\t// internet: undefined,\r\n\t// pcConnection: undefined,\r\n\t// micro: undefined,\r\n\t// canMove: undefined\r\n\tinternet: toolbarAction.toolbarState.state.ok,\r\n\tpcConnection: toolbarAction.toolbarState.state.ok,\r\n\tmicro: toolbarAction.toolbarState.state.ok,\r\n\tcanMove: toolbarAction.toolbarState.state.ok\r\n};\r\n\r\n\r\nconst possibleActionTypes = [];\r\nObject.keys(toolbarAction).forEach(key => possibleActionTypes.push(toolbarAction[key].type));\r\n\r\nconst toolbarReducer = (state = INITIAL_STATE, action) => {\r\n\t\r\n\t\r\n\tif (possibleActionTypes.includes(action.type)) {\r\n\t\t\r\n\t\t\r\n\t\tif (action.type === toolbarAction.toolbarState.type) {\r\n\t\t\tconst value = action.state;\r\n\t\t\tlet actionPayload = toolbarAction.toolbarState.system;\r\n\t\t\tconst payloads = Object.keys(actionPayload);\r\n\t\t\tfor (const p of payloads) {\r\n\t\t\t\tif (actionPayload[p] === action.system) {\r\n\t\t\t\t\tstate = {\r\n\t\t\t\t\t\t...state,\r\n\t\t\t\t\t\t[p]: value,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\treturn state;\r\n};\r\n\r\nexport {\r\n\ttoolbarReducer\r\n}","import {dispatch} from '../redux/Store'\nimport {timeAction} from \"../redux/actions/TimeAction\";\nimport Logger from \"../dev/Logger\";\nimport logConfig from \"../config/log\";\n\nexport default class Timer {\n\t\n\tstatic #startTime;\n\t\n\tstatic #intervalId;\n\t\n\tstatic #lastTime;\n\tstatic logger = new Logger(logConfig.Timer, \"Timer\");\n\t\n\tstatic stopTimer() {\n\t\tclearInterval(Timer.#intervalId);\n\t\tTimer.#intervalId = undefined\n\t}\n\t\n\tstatic startTimer() {\n\t\t\n\t\tif (Timer.#intervalId === undefined) {\n\t\t\tTimer.#startTime = Date.now();\n\t\t\tTimer.#lastTime = Date.now();\n\t\t\t\n\t\t\tTimer.#intervalId = setInterval(() => {\n\t\t\t\tconst dateNow = Date.now();\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: timeAction.passSecond.type,\n\t\t\t\t\tglobalElapsedTime: Timer.getElapsedTime(Timer.#startTime, dateNow),\n\t\t\t\t\ttimeFromLastEvent: Timer.getElapsedTime(Timer.#lastTime, dateNow)\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tTimer.logger.log(Timer.#lastTime);\n\t\t\t\t\n\t\t\t\tTimer.#lastTime = dateNow;\n\t\t\t\tTimer.logger.log(Timer.#lastTime)\n\t\t\t\t\n\t\t\t}, 1000);\n\t\t}\n\t\t\n\t\t\n\t}\n\t\n\t\n\tstatic getElapsedTime(from, to) {\n\t\treturn (to - from) / 1000;\n\t}\n\t\n\t\n}","import {timeAction} from \"../actions/TimeAction\";\r\nimport debug from '../../config/log';\r\nimport Logger from \"../../dev/Logger\";\r\nimport Timer from \"../../model/Timer\";\r\nimport ConfigWrapper from \"../../controller/ConfigWrapper\";\r\n\r\n\r\nconst logger = new Logger(debug.reducer.time, \"TimeReducer\");\r\nconst {apis: {generalManagerHRI}} = ConfigWrapper.get();\r\n\r\nconst init = (state, steps) => {\r\n\t\r\n\t\r\n\tstate = {...state};\r\n\t\r\n\t\r\n\tconst getDataFromJson = (jsonValue) => {\r\n\t\t\r\n\t\treturn {\r\n\t\t\tname: jsonValue.name,\r\n\t\t\teta: jsonValue.eta,\r\n\t\t\tid: jsonValue.id\r\n\t\t}\r\n\t};\r\n\tlet order = 0;\r\n\tObject.keys(steps).forEach(key => {\r\n\t\tstate.todoSteps.push({\r\n\t\t\t...getDataFromJson(steps[key]),\r\n\t\t\torder: order++\r\n\t\t});\r\n\t});\r\n\t\r\n\tstate.allSteps = [...state.todoSteps];\r\n\t\r\n\tconsole.warn(\"State after init\", state);\r\n\t\r\n\treturn state\r\n};\r\n\r\n\r\nconst DEFAULT_STATE = {\r\n\t// todo get only one list of steps with status incorporated\r\n\tcurrentStep: null,\r\n\ttodoSteps: [],\r\n\tdoneSteps: [],\r\n\tskippedSteps: [],\r\n\tallSteps: [],\r\n\tglobalElapsedTime: 0,\r\n\tstepElapsedTime: 0,\r\n\thaveToReset: false\r\n\t\r\n};\r\n\r\nfunction clone(obj) {\r\n\treturn JSON.parse(JSON.stringify(obj));\r\n}\r\n\r\nfunction getDefaultState() {\r\n\treturn clone(DEFAULT_STATE);\r\n}\r\n\r\n\r\nconst INITIAL_STATE = init(getDefaultState(), []);\r\n\r\nconst possibleActionType = [];\r\nObject.keys(timeAction).forEach(key => {\r\n\tpossibleActionType.push(timeAction[key].type)\r\n});\r\n\r\n\r\nconst timeReducer = (state = INITIAL_STATE, action) => {\r\n\t\r\n\tlet clonedState = {...state}, stepIndex, todoSteps;\r\n\t\r\n\t// Dont allow other reducer's action to interact with this reducer\r\n\t\r\n\tif (possibleActionType.includes(action.type)) {\r\n\t\tlet doneSteps;\r\n\t\tlet todoSteps;\r\n\t\tlet currentStep;\r\n\t\tswitch (action.type) {\r\n\t\t\t\r\n\t\t\tcase timeAction.passSecond.type:\r\n\t\t\t\t\r\n\t\t\t\tif (action.globalElapsedTime !== undefined && action.timeFromLastEvent !== undefined) {\r\n\t\t\t\t\tlogger.log(timeAction.passSecond.type, action.globalElapsedTime);\r\n\t\t\t\t\t\r\n\t\t\t\t\tclonedState = {\r\n\t\t\t\t\t\t...clonedState,\r\n\t\t\t\t\t\tglobalElapsedTime: action.globalElapsedTime,\r\n\t\t\t\t\t\tstepElapsedTime: clonedState.stepElapsedTime + action.timeFromLastEvent\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlogger.warn(timeAction.passSecond.type, \"Care no action.globalElapsedTime\");\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase timeAction.resetStepsProgression.type:\r\n\t\t\t\tclonedState.haveToReset = action.state;\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase timeAction.currentStep.type:\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif (action.index !== undefined) {\r\n\t\t\t\t\tconsole.log(\"HEY 1\");\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst researchedStep = state.allSteps[action.index];\r\n\t\t\t\t\t\r\n\t\t\t\t\tstepIndex = clonedState.todoSteps.findIndex(step => step.id === researchedStep.id);\r\n\t\t\t\t\t\r\n\t\t\t\t\tconsole.log(\"HEY 2\", stepIndex);\r\n\t\t\t\t\t\r\n\t\t\t\t\tclonedState.stepElapsedTime = 0;\r\n\t\t\t\t\t\r\n\t\t\t\t\ttodoSteps = [...state.todoSteps];\r\n\t\t\t\t\tconst step = todoSteps.splice(stepIndex, 1)[0];\r\n\t\t\t\t\t\r\n\t\t\t\t\t// console.log(\"HEY 2.5\", step);\r\n\t\t\t\t\t// if (clonedState.currentStep !== null) {\r\n\t\t\t\t\t// \tconsole.log(\"HEY 3\");\r\n\t\t\t\t\t// \ttodoSteps.push(clonedState.currentStep);\r\n\t\t\t\t\t// }\r\n\t\t\t\t\t\r\n\t\t\t\t\tclonedState = {\r\n\t\t\t\t\t\t...clonedState,\r\n\t\t\t\t\t\tcurrentStep: {\r\n\t\t\t\t\t\t\t...step\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttodoSteps: todoSteps\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\tconsole.warn(\"HEY 4\", clonedState)\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlogger.warn(timeAction.currentStep.type, \"Care try to currentStep with an undefined step\");\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase timeAction.stepCompleted.type:\r\n\t\t\t\t\r\n\t\t\t\tdoneSteps = [...clonedState.doneSteps];\r\n\t\t\t\ttodoSteps = [...clonedState.todoSteps];\r\n\t\t\t\tcurrentStep = clonedState.currentStep;\r\n\t\t\t\t\r\n\t\t\t\taction.indexes.forEach(index => {\r\n\t\t\t\t\tconst researchedStep = clonedState.allSteps[index];\r\n\t\t\t\t\tif (clonedState.currentStep.id === researchedStep.id) {\r\n\t\t\t\t\t\tcurrentStep = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst indexInTodo = todoSteps.findIndex(step => step.id === researchedStep.id);\r\n\t\t\t\t\tif (indexInTodo > -1) {\r\n\t\t\t\t\t\ttodoSteps.splice(indexInTodo, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdoneSteps.push(researchedStep);\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tclonedState = {\r\n\t\t\t\t\t...clonedState,\r\n\t\t\t\t\tcurrentStep: currentStep,\r\n\t\t\t\t\ttodoSteps: todoSteps,\r\n\t\t\t\t\tdoneSteps: doneSteps,\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase timeAction.stepSkipped.type:\r\n\t\t\t\t// action.index\r\n\t\t\t\tdoneSteps = [...clonedState.doneSteps];\r\n\t\t\t\tcurrentStep = clonedState.currentStep;\r\n\t\t\t\taction.indexes.forEach(index => {\r\n\t\t\t\t\tconst researchedStep = clonedState.allSteps[index];\r\n\t\t\t\t\tif (clonedState.currentStep.id === researchedStep.id) {\r\n\t\t\t\t\t\tcurrentStep = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdoneSteps.push(clonedState.allSteps[index]);\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tclonedState = {\r\n\t\t\t\t\t...clonedState,\r\n\t\t\t\t\tcurrentStep: currentStep,\r\n\t\t\t\t\tdoneSteps: doneSteps,\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase timeAction.timerState.type:\r\n\t\t\t\t\r\n\t\t\t\tconst {on, off} = generalManagerHRI.timerState.state;\r\n\t\t\t\t\r\n\t\t\t\tif ([on, off].includes(action.state)) {\r\n\t\t\t\t\tswitch (action.state) {\r\n\t\t\t\t\t\tcase on:\r\n\t\t\t\t\t\t\tTimer.startTimer();\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcase off:\r\n\t\t\t\t\t\t\tTimer.stopTimer();\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlogger.warn(\"ToggleTimer\", \"Unknown ALMstate for timerState\")\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase timeAction.replaceAllSteps.type:\r\n\t\t\t\t\r\n\t\t\t\tlogger.debug(\"You are un replaceAllSteps reducer\", action);\r\n\t\t\t\tif (action.steps.length !== undefined) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t// let steps = [];\r\n\t\t\t\t\t// console.warn(1, clonedState, steps);\r\n\t\t\t\t\t//\r\n\t\t\t\t\t// action.steps.forEach(step => {\r\n\t\t\t\t\t// \t// Add only title steps (in blue in excel)\r\n\t\t\t\t\t// \tif (step.action === \"\") {\r\n\t\t\t\t\t// \t\tsteps.push(step);\r\n\t\t\t\t\t// \t\tconsole.log(\"DOAZ?D?ZAOXAZ\", step);\r\n\t\t\t\t\t// \t}\r\n\t\t\t\t\t//\r\n\t\t\t\t\t//\r\n\t\t\t\t\t// });\r\n\t\t\t\t\t//\r\n\t\t\t\t\t// steps = steps.sort((step1, step2) => {\r\n\t\t\t\t\t// \treturn step1['order'] < step2['order'] ? -1 : 1\r\n\t\t\t\t\t// });\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tlogger.debug(\"replace B\", clonedState);\r\n\t\t\t\t\tclonedState = init(getDefaultState(), action.steps);\r\n\t\t\t\t\tlogger.debug(\"replace A\", clonedState);\r\n\t\t\t\t\tconsole.warn(2, clonedState, action.steps)\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\treturn clonedState;\r\n};\r\n\r\nexport {\r\n\ttimeReducer\r\n}\r\n\r\n","import {scenarioAction} from '../actions/ScenarioAction'\r\n\r\n\r\nconst INITIAL_STATE = {\r\n\tcurrent: {\r\n\t\tname: \"None\"\r\n\t}\r\n};\r\n\r\n\r\nexport const scenarioReducer = (state = INITIAL_STATE, action) => {\r\n\t\r\n\tif (action.type === scenarioAction.currentScenario.type) {\r\n\t\t\r\n\t\tstate = {\r\n\t\t\t\r\n\t\t\t...state,\r\n\t\t\t\r\n\t\t\tcurrent: {\r\n\t\t\t\tname: action.scenarioName\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t}\r\n\t\r\n\treturn state;\r\n};","import {applyMiddleware, combineReducers, createStore} from 'redux';\r\nimport {createLogger} from 'redux-logger'\r\nimport {viewReducer} from \"./reducers/ViewReducer\";\r\nimport {comReducer} from \"./reducers/CommunicationReducer\";\r\nimport {toolbarReducer} from \"./reducers/ToolbarReducer\";\r\nimport {timeReducer} from \"./reducers/TimeReducer\";\r\nimport {scenarioReducer} from './reducers/ScenarioReducer'\r\nimport logConfig from '../config/log'\r\nimport {composeWithDevTools} from \"redux-devtools-extension\";\r\n\r\nlet dispatch = null;\r\n\r\nlet localStore;\r\n\r\nconst getStore = () => {\r\n\tif (localStore === undefined) {\r\n\t\tlet store;\r\n\t\tif (logConfig.redux) {\r\n\t\t\tconst logger = createLogger({\r\n\t\t\t\tlevel: \"info\",\r\n\t\t\t\tdiff: false,\r\n\t\t\t\tduration: true\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tstore = createStore(\r\n\t\t\t\tcombineReducers({\r\n\t\t\t\t\tview: viewReducer,\r\n\t\t\t\t\ttoolbar: toolbarReducer,\r\n\t\t\t\t\tcom: comReducer,\r\n\t\t\t\t\ttime: timeReducer,\r\n\t\t\t\t\tscenario: scenarioReducer\r\n\t\t\t\t}),\r\n\t\t\t\t{},\r\n\t\t\t\tcomposeWithDevTools(applyMiddleware(logger))\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tstore = createStore(\r\n\t\t\t\tcombineReducers({\r\n\t\t\t\t\tview: viewReducer,\r\n\t\t\t\t\ttoolbar: toolbarReducer,\r\n\t\t\t\t\tcom: comReducer,\r\n\t\t\t\t\ttime: timeReducer,\r\n\t\t\t\t\tscenario: scenarioReducer\r\n\t\t\t\t\t\r\n\t\t\t\t}),\r\n\t\t\t\t{},\r\n\t\t\t\tcomposeWithDevTools()\r\n\t\t\t);\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tdispatch = store.dispatch;\r\n\t\tlocalStore = store;\r\n\t}\r\n\t\r\n\treturn localStore;\r\n\t\r\n};\r\n\r\nexport default getStore;\r\nexport {\r\n\tdispatch,\r\n\tlocalStore as store\r\n}\r\n","import {dispatch, store} from '../redux/Store'\r\nimport debug from '../config/log';\r\nimport {viewAction} from \"../redux/actions/ViewAction\";\r\nimport ConfigWrapper from \"./ConfigWrapper\";\r\nimport QiWrapper from \"../model/QiWrapper\";\r\nimport {timeAction} from \"../redux/actions/TimeAction\";\r\nimport Logger from \"../dev/Logger\";\r\nimport {toolbarAction} from \"../redux/actions/ToolbarAction\";\r\nimport {scenarioAction} from \"../redux/actions/ScenarioAction\";\r\nimport {comAction} from \"../redux/actions/CommunicationAction\";\r\n\r\n\r\nconst {apis: {tabletLM, common, generalManagerHRI}} = ConfigWrapper.get();\r\n\r\n/**\r\n *\r\n * @return {[Object]}\r\n */\r\nconst getScenarioSteps = () => {\r\n\treturn store.getState().scenario.current.steps;\r\n};\r\n\r\n\r\n/**\r\n *\r\n * @returns {Object | undefined}\r\n * @param name\r\n */\r\nconst getStepByName = (name) => {\r\n\tconst steps = getScenarioSteps();\r\n\treturn steps[steps.findIndex(step => step.name = name)];\r\n\t\r\n};\r\n\r\nexport {\r\n\tgetScenarioSteps,\r\n\tgetStepByName\r\n}\r\n\r\n\r\n/**\r\n * @description this class is the link between ALMemory's and Redux\r\n */\r\nexport default class ALMemoryBridge {\r\n\tstatic logger = new Logger(debug.ALMemoryBridge, \"AlMemoryBridge\");\r\n\t\r\n\tstatic initBridge = () => {\r\n\t\tconst toolbarState = common.toolbarState;\r\n\t\t\r\n\t\tPromise.all([\r\n\t\t\t\r\n\t\t\tQiWrapper.listen(toolbarState[\"ALMemory\"], this.handleToolbarChange(toolbarState)),\r\n\t\t\tQiWrapper.listen(generalManagerHRI[\"currentStep\"][\"ALMemory\"], this.handleChangeCurrentStep()),\r\n\t\t\tQiWrapper.listen(generalManagerHRI[\"stepCompleted\"][\"ALMemory\"], this.handleStepCompleted()),\r\n\t\t\tQiWrapper.listen(generalManagerHRI[\"stepSkipped\"][\"ALMemory\"], this.handleSetStepSkipped()),\r\n\t\t\tQiWrapper.listen(generalManagerHRI[\"timerState\"][\"ALMemory\"], this.handleToggleTimer()),\r\n\t\t\tQiWrapper.listen(generalManagerHRI[\"currentScenario\"][\"ALMemory\"], this.handleChangeCurrentScenario()),\r\n\t\t\tQiWrapper.listen(tabletLM[\"currentView\"][\"ALMemory\"], this.handleChangeCurrentView()),\r\n\t\t\tQiWrapper.listen(generalManagerHRI[\"resetSteps\"][\"ALMemory\"], this.handleResetSteps())\r\n\t\t\r\n\t\t]).then(() => {\r\n\t\t\tsetInterval(async () => {\r\n\t\t\t\tawait QiWrapper.raise(common.jsHeartbeat[\"ALMemory\"], {'time': Date.now()});\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\t'type': comAction.extHeartbeat.type,\r\n\t\t\t\t\t'time': {\r\n\t\t\t\t\t\tlm: JSON.parse(await QiWrapper.getALValue(common[\"localManagerHeartbeat\"][\"ALMemory\"])).time,\r\n\t\t\t\t\t\t// gm: JSON.parse(await QiWrapper.getALValue(common.generalManagerHeartbeat.ALMemory)).time\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t}, 1000)\r\n\t\t})\r\n\t\t\r\n\t\t\r\n\t};\r\n\t\r\n\tstatic handleChangeCurrentView = () => data => {\r\n\t\t\r\n\t\tALMemoryBridge.logger.log(\"handleChangeCurrentView\", data)\r\n\t\tif (data.view !== undefined || data.data !== undefined) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: viewAction.changeView.type,\r\n\t\t\t\tview: data.view,\r\n\t\t\t\tdata: data.data\r\n\t\t\t})\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t};\r\n\t\r\n\tstatic handleChangeCurrentScenario = () => (data) => {\r\n\t\t\r\n\t\tALMemoryBridge.logger.log(\"handleChangeCurrentScenario\", data)\r\n\t\tdispatch({\r\n\t\t\ttype: scenarioAction.currentScenario.type,\r\n\t\t\tscenarioName: data[\"scenarioName\"]\r\n\t\t});\r\n\t\t\r\n\t\tdispatch({\r\n\t\t\ttype: timeAction.replaceAllSteps.type,\r\n\t\t\tsteps: data[\"stepsList\"]\r\n\t\t})\r\n\t};\r\n\t\r\n\tstatic handleToggleTimer = () => (data) => {\r\n\t\tif ([timeAction.timerState.state.on, timeAction.timerState.state.off].includes(data.state)) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: timeAction.timerState.type,\r\n\t\t\t\tstate: data.state\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tALMemoryBridge.logger.warn(\"Unknown mode for timerState\");\r\n\t\t}\r\n\t};\r\n\t\r\n\tstatic handleSetStepSkipped = () => (data) => {\r\n\t\tALMemoryBridge.logger.log(\"handleSetStepSkipped\", data)\r\n\t\tdispatch({\r\n\t\t\ttype: timeAction.stepSkipped.type,\r\n\t\t\tindexes: data.indexes\r\n\t\t})\r\n\t};\r\n\t\r\n\tstatic handleStepCompleted = () => (data) => {\r\n\t\tALMemoryBridge.logger.log(\"handleStepCompleted\", data)\r\n\t\tdispatch({\r\n\t\t\ttype: timeAction.stepCompleted.type,\r\n\t\t\tindexes: data.indexes\r\n\t\t})\r\n\t\t\r\n\t};\r\n\t\r\n\tstatic handleChangeCurrentStep = () => (data) => {\r\n\t\tALMemoryBridge.logger.log(\"handleStepCompleted\", data)\r\n\t\tdispatch({\r\n\t\t\ttype: timeAction.currentStep.type,\r\n\t\t\tindex: data.index\r\n\t\t})\r\n\t\t\r\n\t};\r\n\t\r\n\tstatic handleToolbarChange = changeToolbar => data => {\r\n\t\tALMemoryBridge.logger.log(\"handleToolbarChange\", data)\r\n\t\t\r\n\t\tconst possibleState = [changeToolbar.state.ok, changeToolbar.state.error];\r\n\t\t\r\n\t\tif (possibleState.includes(data.state)) {\r\n\t\t\tconst possibleSystems = [];\r\n\t\t\tconst systemKeys = Object.keys(changeToolbar.system);\r\n\t\t\tsystemKeys.forEach(key => {\r\n\t\t\t\tpossibleSystems.push(common.toolbarState.system[key])\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tif (possibleSystems.includes(data.system)) {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: toolbarAction.toolbarState.type,\r\n\t\t\t\t\tsystem: data.system,\r\n\t\t\t\t\tstate: data.state\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tALMemoryBridge.logger.warn(\"Listen toolbarState\", \"Unknown data.system\")\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tALMemoryBridge.logger.warn(\"Listen toolbarState\", \"Unknown data.state\")\r\n\t\t}\r\n\t};\r\n\t\r\n\tstatic handleResetSteps = () => data => {\r\n\t\tALMemoryBridge.logger.log(\"handleResetSteps\", data)\r\n\t\tdispatch({\r\n\t\t\ttype: timeAction.resetStepsProgression.type,\r\n\t\t\tstate: true\r\n\t\t})\r\n\t}\r\n}","import ConfigWrapper from \"../../controller/ConfigWrapper\";\r\n\r\nconst {apis: {tabletLM}} = ConfigWrapper.get();\r\n\r\nexport const viewAction = {\r\n\tchangeView: {\r\n\t\ttype: tabletLM.currentView.reduxKey\r\n\t},\r\n\t\r\n\t\r\n\tsetComponentVisibility: {\r\n\t\ttype: \"SET_COMPONENT_VISIBILITY\",\r\n\t\tcomponent: {\r\n\t\t\ttimeBoard: \"TIMEBOARD\"\r\n\t\t},\r\n\t\tstate: {\r\n\t\t\tvisible: \"VISIBLE\",\r\n\t\t\thidden: \"HIDE\"\r\n\t\t}\r\n\t}\r\n\t\r\n};\r\n","import React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport Logger from \"../../dev/Logger\";\r\nimport logConfig from '../../config/log'\r\n\r\nimport './index.css'\r\nimport {getClassFromView} from \"../../controller/ViewStepBridge\";\r\nimport MainMenu from \"../Global/MainMenu\";\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\tview: state.view,\r\n\t\tscenario: state.scenario\r\n\t};\r\n}\r\n\r\nclass ViewManager extends Component {\r\n\t\r\n\tstatic logger = new Logger(logConfig.ViewManager, \"ViewManager\");\r\n\t\r\n\tstatic propTypes = {\r\n\t\tscenario: PropTypes.object.isRequired, // redux\r\n\t\tclassName: PropTypes.string\r\n\t};\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tcurrentView: this.props.view.currentView,\r\n\t\t\tcurrentScenario: this.props.scenario.current,\r\n\t\t\tcurrentData: this.props.view.currentData\r\n\t\t}\r\n\t}\r\n\t\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\t\r\n\t\t// Checks if we need to change the current view (if new view or data (nextprops) are differents from the previous one (prevState))\r\n\t\tif (nextProps.view.currentView !== prevState.currentView || nextProps.view.currentData !== prevState.currentData) {\r\n\t\t\treturn {\r\n\t\t\t\tcurrentView: nextProps.view.currentView,\r\n\t\t\t\tcurrentData: nextProps.view.currentData\r\n\t\t\t}\r\n\t\t}\r\n\t\t// Check if it's a new scenario\r\n\t\tif (nextProps.scenario.current !== prevState.currentScenario) {\r\n\t\t\treturn {\r\n\t\t\t\tcurrentScenario: nextProps.scenario.current\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\tcomponentDidCatch(error, errorInfo) {\r\n\t\tconsole.error(\"Error in ViewManager\", error, errorInfo)\r\n\t}\r\n\t\r\n\trender() {\r\n\t\t\r\n\t\tlet comp;\r\n\t\t// Default view\r\n\t\tif (this.state.currentView === null) {\r\n\t\t\tcomp = <MainMenu>Please click on the scenario</MainMenu>\r\n\t\t} else {\r\n\t\t\t// Create the center headerview in function of view in state and send their props\r\n\t\t\tcomp = React.createElement(getClassFromView(this.state.currentView), {\r\n\t\t\t\t\t...this.state.currentData\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t}\r\n\t\t\r\n\t\tViewManager.logger.log(\"render\", comp);\r\n\t\t\r\n\t\tlet className = \"ViewManager\";\r\n\t\tclassName += (this.props.className) ? this.props.className : \"\";\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div className={className}>\r\n\t\t\t\t{comp}\r\n\t\t\t</div>\r\n\t\t\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n)(ViewManager);","import React, {Component} from 'react';\r\nimport PropTypes from \"prop-types\";\r\nimport './ProgressBar.css'\r\nimport Logger from \"../../../dev/Logger\";\r\nimport logConfig from '../../../config/log'\r\n\r\nconst DEFAULT_COLOR = {r: 102, g: 226, b: 23};\r\n\r\n\r\nclass ProgressBar extends Component {\r\n\t\r\n\tstatic propTypes = {\r\n\t\tcurrent: PropTypes.number.isRequired,\r\n\t\tmax: PropTypes.number.isRequired,\r\n\t};\r\n\t\r\n\tstatic defaultProps = {\r\n\t\tcurrent: -1\r\n\t};\r\n\t\r\n\tstatic logger = new Logger(logConfig.ProgressBar, \"ProgressBar\");\r\n\t\r\n\t\r\n\tconstructor(props) {\r\n\t\t\r\n\t\t\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tmax: props.max,\r\n\t\t\tcurrent: props.current,\r\n\t\t\tcolor: {...DEFAULT_COLOR},\r\n\t\t}\r\n\t}\r\n\t\r\n\tstatic addToColor(color, field, value) {\r\n\t\tif (color[field] !== undefined) {\r\n\t\t\tcolor[field] = (color[field] + value < 255) ? color[field] + value : 255\r\n\t\t}\r\n\t}\r\n\t\r\n\tstatic removeToColor(color, field, value) {\r\n\t\tif (color[field] !== undefined) {\r\n\t\t\tcolor[field] = (color[field] - value > 0) ? color[field] - value : 0\r\n\t\t}\r\n\t}\r\n\t\r\n\tstatic convertToHex(color) {\r\n\t\t\r\n\t\tfunction getHexValue(value) {\r\n\t\t\tlet str = value.toString(16);\r\n\t\t\tif (str.length === 1) {\r\n\t\t\t\tstr = \"0\" + str;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn str;\r\n\t\t}\r\n\t\t\r\n\t\treturn `#${getHexValue(color.r)}${getHexValue(color.g)}${getHexValue(color.b)}`\r\n\t}\r\n\t\r\n\tchangeCurrentValue = (newValue) => {\r\n\t\t\r\n\t\tthis.setState(prev => {\r\n\t\t\treturn {\r\n\t\t\t\t...prev,\r\n\t\t\t\tcurrent: newValue\r\n\t\t\t}\r\n\t\t}, () => ProgressBar.logger.log(\"changeCurrentValue : New state : \", this.state))\r\n\t};\r\n\t\r\n\trender() {\r\n\t\t\r\n\t\tlet percentLoad = 0;\r\n\t\t\r\n\t\t\r\n\t\tif (this.state.current >= 0 && this.state.max > 0) {\r\n\t\t\t\r\n\t\t\tpercentLoad = Math.round(this.state.current / this.state.max * 100);\r\n\t\t}\r\n\t\t\r\n\t\tlet color = this.state.color;\r\n\t\t\r\n\t\tconst deltaColor = Math.round(255 / this.state.max);\r\n\t\tif (percentLoad > 70 && percentLoad <= 100) {\r\n\t\t\tProgressBar.addToColor(color, 'r', deltaColor)\r\n\t\t\t\r\n\t\t}\r\n\t\tif (percentLoad > 100) {\r\n\t\t\tProgressBar.removeToColor(color, 'g', deltaColor)\r\n\t\t}\r\n\t\t\r\n\t\tpercentLoad = percentLoad < 100 ? percentLoad : 100;\r\n\t\t\r\n\t\t\r\n\t\tconst style = {\r\n\t\t\t\"width\": `${percentLoad}%`,\r\n\t\t\t\"backgroundColor\": ProgressBar.convertToHex(color)\r\n\t\t};\r\n\t\t\r\n\t\t\r\n\t\tlet className = \"ProgressBar\";\r\n\t\tif (this.props.className)\r\n\t\t\tclassName += ` ${this.props.className}`;\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div className={className} style={style}/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default ProgressBar;","import React, {Component} from 'react';\r\nimport PropTypes from \"prop-types\";\r\nimport './Steps.css'\r\nimport ProgressBar from \"../reusableComponent/ProgressBar\";\r\nimport {connect} from \"react-redux\";\r\nimport logConfig from '../../../config/log'\r\nimport Logger from \"../../../dev/Logger\";\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\ttime: state.time\r\n\t}\r\n};\r\n\r\nclass Step extends Component {\r\n\t\r\n\tstatic Status = {\r\n\t\tdone: \"done\",\r\n\t\ttodo: \"todo\",\r\n\t\tcurrent: \"current\",\r\n\t\tskipped: \"skipped\"\r\n\t\t\r\n\t};\r\n\t\r\n\tstatic propTypes = {\r\n\t\tcurrentTime: PropTypes.number, // only supplied if it's the current Step\r\n\t\tstep: PropTypes.shape({\r\n\t\t\tstatus: PropTypes.oneOf(Step.Status.current, Step.Status.todo, Step.Status.skipped, Step.Status.done),\r\n\t\t\teta: PropTypes.number.isRequired,\r\n\t\t\tname: PropTypes.string.isRequired\r\n\t\t}).isRequired\r\n\t};\r\n\t\r\n\tstatic defaultProps = {};\r\n\t\r\n\tstatic logger = new Logger(logConfig.Step, \"Step\");\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tid: props.step.id,\r\n\t\t\torder: props.step.order,\r\n\t\t\tcurrentTime: props.time.stepElapsedTime,\r\n\t\t\tprogressBarRef: React.createRef(),\r\n\t\t\tprogressBarKey: Date.now(),\r\n\t\t\tresetFunc: this.reset\r\n\t\t};\r\n\t\t\r\n\t\t\r\n\t\tStep.logger.log(\"Constructor : time :\", props.time);\r\n\t\tStep.logger.log(\"Constructor : state :\", this.state);\r\n\t\t\r\n\t}\r\n\t\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\t\r\n\t\t// if the step's order match, I have to update\r\n\t\t\r\n\t\tif (nextProps.time.haveToReset === true) {\r\n\t\t\tprevState.resetFunc();\r\n\t\t}\r\n\t\t\r\n\t\tif (nextProps.time.currentStep && nextProps.time.currentStep.order === prevState.order) {\r\n\t\t\t\r\n\t\t\tif (prevState.progressBarRef.current)\r\n\t\t\t{\r\n\t\t\t\tStep.logger.log(\"Time\", nextProps.time);\r\n\t\t\t\tprevState.progressBarRef.current.changeCurrentValue(nextProps.time.stepElapsedTime);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...prevState,\r\n\t\t\t\tcurrentTime: nextProps.time.stepElapsedTime\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\treset() {\r\n\t\treturn {\r\n\t\t\t...this.state,\r\n\t\t\tprogressBarKey: Date.now(),\r\n\t\t\tcurrentTime: 0\r\n\t\t}\r\n\t\t// this.setState(prev => {\r\n\t\t// \treturn {\r\n\t\t// \t\t...prev,\r\n\t\t// \t\tprogressBarKey: Date.now(),\r\n\t\t// \t\tcurrentTime: 0\r\n\t\t// \t}\r\n\t\t// })\r\n\t}\r\n\t\r\n\trender() {\r\n\t\t\r\n\t\t\r\n\t\tlet currentTime = (this.state.currentTime !== undefined) ? this.state.currentTime : 0;\r\n\t\t\r\n\t\t\r\n\t\tlet className = `Step ${this.props.step.status}`;\r\n\t\t\r\n\t\tconst eta = Math.round(this.props.step.eta - currentTime);\r\n\t\tStep.logger.log(\"Render ETA\", this.props.step.eta);\r\n\t\treturn (\r\n\t\t\t<div className={className}>\r\n\t\t\t\t<p>{this.props.step.name} </p> <span\r\n\t\t\t\tclassName=\"eta\">{eta}s</span>\r\n\t\t\t\t\r\n\t\t\t\t<ProgressBar ref={this.state.progressBarRef}\r\n\t\t\t\t             current={currentTime}\r\n\t\t\t\t             key={this.state.progressBarKey}\r\n\t\t\t\t             max={this.props.step.eta}/>\r\n\t\t\t\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps)(Step);\r\n\r\n","import React, {Component} from 'react';\nimport {connect} from 'react-redux';\nimport PropTypes from \"prop-types\";\nimport Step from \"./Step\";\nimport Logger from \"../../../dev/Logger\";\nimport debug from '../../../config/log'\nimport './TimeBoard.css'\nimport {viewAction} from \"../../../redux/actions/ViewAction\";\nimport ComponentTitle from \"../reusableComponent/ComponentTitle\";\nimport {dispatch} from \"../../../redux/Store\";\nimport {timeAction} from \"../../../redux/actions/TimeAction\";\n\nfunction mapStateToProps(state) {\n\treturn {\n\t\ttime: state.time,\n\t\tview: state.view\n\t};\n}\n\nclass TimeBoard extends Component {\n\t\n\t\n\tstatic logger = new Logger(debug.TimeBoard, \"TimeBoard\");\n\t\n\tstatic propTypes = {\n\t\tclassName: PropTypes.string,\n\t};\n\t\n\tstatic stepsElems = [];\n\t\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t\n\t\tTimeBoard.logger.log(\"constructor\", this.props);\n\t\t\n\t\tconst steps = TimeBoard.createStepFromProps(props);\n\t\t\n\t\t\n\t\tthis.state = {\n\t\t\tsortedSteps: steps,\n\t\t\tglobalElapsedTime: props.time.globalElapsedTime,\n\t\t\tdoneSteps: [...props.time.doneSteps],\n\t\t\tskippedSteps: [...props.time.skippedSteps],\n\t\t\ttodoSteps: [...props.time.todoSteps],\n\t\t\tvisible: props.view.componentVisibility.timeBoard,\n\t\t\tparentDiv: null,\n\t\t\t\n\t\t};\n\t\t\n\t\t\n\t\tTimeBoard.logger.log(\"constructor\", this.state);\n\t\t\n\t\t\n\t}\n\t\n\tstatic compareSteps(nextSteps, oldSteps) {\n\t\t\n\t\tif (nextSteps.length !== oldSteps.length) {\n\t\t\treturn true\n\t\t}\n\t\t\n\t\tfor (let i = 0; i < nextSteps.length; i++) {\n\t\t\tif (nextSteps[i] !== undefined && oldSteps[i] !== undefined) {\n\t\t\t\tif (nextSteps[i].status !== oldSteps[i].status) {\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\n\t\t\n\t\tif (nextProps.time.haveToReset === true) {\n\t\t\tdispatch({\n\t\t\t\ttype: timeAction.resetStepsProgression.type,\n\t\t\t\tstate: false\n\t\t\t})\n\t\t}\n\t\t\n\t\t\n\t\tif (prevState.visible !== nextProps.view.componentVisibility.timeBoard) {\n\t\t\t// console.warn(\"HEY 1\");\n\t\t\tconst bool = (nextProps.view.componentVisibility.timeBoard === viewAction.setComponentVisibility.state.visible);\n\t\t\t\n\t\t\treturn {\n\t\t\t\tvisible: bool\n\t\t\t}\n\t\t}\n\t\t\n\t\tconst newSortedSteps = TimeBoard.createStepFromProps(nextProps);\n\t\tif (TimeBoard.compareSteps(newSortedSteps, prevState.sortedSteps))\n\t\t{\n\t\t\tconst nbStepsDone = nextProps.time.doneSteps.length;\n\t\t\tconst offset = 3;\n\t\t\tif (nbStepsDone > offset) {\n\t\t\t\tconst aStep = document.querySelector(\".Step\");\n\t\t\t\tconsole.log(\"Scrolling to \", nbStepsDone - offset, (nbStepsDone - offset) * aStep.clientHeight);\n\t\t\t\tdocument.querySelector(\"div#steps\").scrollTop = (nbStepsDone - offset) * aStep.clientHeight\n\t\t\t\t\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\treturn {\n\t\t\t\tsortedSteps: TimeBoard.createStepFromProps(nextProps),\n\t\t\t\tglobalElapsedTime: nextProps.time.globalElapsedTime,\n\t\t\t\tdoneSteps: [...nextProps.time.doneSteps],\n\t\t\t\tskippedSteps: [...nextProps.time.skippedSteps],\n\t\t\t\ttodoSteps: [...nextProps.time.todoSteps],\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\treturn null;\n\t}\n\t\n\tstatic createStepFromProps(props)\n\t{\n\t\tconst steps = [];\n\t\t\n\t\tprops.time.doneSteps.forEach(step => {\n\t\t\tsteps.push({\n\t\t\t\t...step,\n\t\t\t\tstatus: Step.Status.done,\n\t\t\t\t\n\t\t\t})\n\t\t});\n\t\t\n\t\tif (props.time.currentStep !== null) {\n\t\t\tsteps.push({\n\t\t\t\t...props.time.currentStep,\n\t\t\t\tstatus: Step.Status.current,\n\t\t\t});\n\t\t}\n\t\t\n\t\tprops.time.todoSteps.forEach(step => {\n\t\t\tsteps.push({\n\t\t\t\t...step,\n\t\t\t\tstatus: Step.Status.todo,\n\t\t\t})\n\t\t});\n\t\t\n\t\tprops.time.skippedSteps.forEach(step => {\n\t\t\t\n\t\t\tsteps.push({\n\t\t\t\t...step,\n\t\t\t\tstatus: Step.Status.skipped,\n\t\t\t})\n\t\t\t\n\t\t});\n\t\t\n\t\t\n\t\treturn steps.sort((stepA, stepB) => {\n\t\t\treturn stepA['order'] < stepB['order'] ? -1 : 1\n\t\t});\n\t}\n\t\n\tcomponentDidMount() {\n\t\tconsole.log(TimeBoard.stepsElems);\n\t}\n\t\n\trender()\n\t{\n\t\tlet className = \"TimeBoard \";\n\t\tclassName += (this.props.className) ? this.props.className : \"\";\n\t\t\n\t\tif (this.state.parentDiv) {\n\t\t\tif (this.state.visible === viewAction.setComponentVisibility.state.hidden) {\n\t\t\t\t\n\t\t\t\tthis.state.parentDiv.classList.add(\"hidden\");\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\tthis.state.parentDiv.classList.remove(\"hidden\");\n\t\t\t}\n\t\t}\n\t\t\n\t\tconst steps = [];\n\t\tTimeBoard.stepsElems.length = 0;\n\t\t\n\t\tthis.state.sortedSteps.forEach(((step, index) => {\n\t\t\t// let ref = React.createRef();\n\t\t\tsteps.push(<Step step={step} key={index}/>);\n\t\t\t// TimeBoard.stepsElems.push(ref)\n\t\t}));\n\t\t\n\t\t// TimeBoard.stepsElems = [...steps];\n\t\t\n\t\tif (steps.length > 0) {\n\t\t\treturn (\n\t\t\t\t<div className={className}>\n\t\t\t\t\t<ComponentTitle>Steps</ComponentTitle>\n\t\t\t\t\t<div id=\"steps\">\n\t\t\t\t\t\t{steps}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t<div className={className + \" hidden\"}/>\n\t\t\t)\n\t\t}\n\t\t\n\t}\n}\n\nexport default connect(\n\tmapStateToProps,\n)(TimeBoard);","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './Icon.css'\r\n\r\nclass Icon extends Component {\r\n\t\r\n\tstatic propTypes = {\r\n\t\timage: PropTypes.node.isRequired,\r\n\t\tdescription: PropTypes.string.isRequired,\r\n\t\tcopyright: PropTypes.string,\r\n\t\tanimation: PropTypes.bool\r\n\t};\r\n\t\r\n\trender() {\r\n\t\t\r\n\t\tlet className = \"Icon\";\r\n\t\tif (this.props.animation) {\r\n\t\t\tclassName += \" animated\"\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<img className={className} src={this.props.image}\r\n\t\t\t     alt={this.props.description}\r\n\t\t\t     title={this.props.copyright}/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nexport default Icon;","import React, {Component} from 'react';\r\nimport {connect} from 'react-redux'\r\nimport Logger from \"../../../dev/Logger\";\r\nimport logConfig from '../../../config/log'\r\nimport Icon from \"../reusableComponent/Icon\";\r\n\r\nimport './Toolbar.css'\r\n\r\nimport internetError from './icons/internetError.svg'\r\nimport muteMicro from './icons/muteMicro.svg'\r\nimport pcProblem from './icons/pcProblem.svg'\r\nimport {toolbarAction} from \"../../../redux/actions/ToolbarAction\";\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\ttoolbar: state.toolbar\r\n\t}\r\n};\r\n\r\n\r\nclass Toolbar extends Component {\r\n\t\r\n\t\r\n\tstatic logger = new Logger(logConfig.Toolbar, \"Toolbar\");\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tinfos: props.toolbar\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\t\r\n\t\tif (nextProps.toolbar !== prevState.infos) {\r\n\t\t\t\r\n\t\t\t\r\n\t\t\treturn {\r\n\t\t\t\t...prevState,\r\n\t\t\t\tinfos: nextProps.toolbar,\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\trender() {\r\n\t\t\r\n\t\tToolbar.logger.log(\"Render\", this.props);\r\n\t\tlet className = \"Toolbar\";\r\n\t\tclassName += (this.props.className) ? this.props.className : \"\";\r\n\t\t\r\n\t\t\r\n\t\tconst icons = [];\r\n\t\t\r\n\t\tif (this.state.infos.internet === toolbarAction.toolbarState.state.error) {\r\n\t\t\ticons.push(<Icon image={internetError}\r\n\t\t\t                 description={\"An error occured with the internet connection\"}\r\n\t\t\t                 animation={false}\r\n\t\t\t                 copyright={\"Icons made by surang from https://www.flaticon.com/\"}\r\n\t\t\t                 key={0}/>)\r\n\t\t}\r\n\t\t\r\n\t\tif (this.state.infos.micro === toolbarAction.toolbarState.state.error) {\r\n\t\t\ticons.push(<Icon image={muteMicro}\r\n\t\t\t                 description={\"Pepper can't hear you\"}\r\n\t\t\t                 animation={true}\r\n\t\t\t                 copyright={\"Icons made by Smashicons from https://www.flaticon.com/\"}\r\n\t\t\t                 key={1}/>)\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tif (this.state.infos.pcConnection === toolbarAction.toolbarState.state.error) {\r\n\t\t\ticons.push(<Icon image={pcProblem}\r\n\t\t\t                 description={\"Pepper can't connect to the laptop\"}\r\n\t\t\t                 animation={false}\r\n\t\t\t                 copyright={\"Icons made by monkik from https://www.flaticon.com/\"}\r\n\t\t\t                 key={2}/>)\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tif (icons.length > 0) {\r\n\t\t\t\r\n\t\t\treturn (\r\n\t\t\t\t<div className={className}>\r\n\t\t\t\t\t<div id={\"icons\"}>{icons}</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps)(Toolbar);","import React, {Component} from 'react';\nimport ConfigWrapper from \"../../../controller/ConfigWrapper\";\nimport Icon from \"../reusableComponent/Icon\";\n\nimport './Logo.css'\n\nconst {images} = ConfigWrapper.get() || [];\n\nclass Logo extends Component {\n\trender() {\n\t\tconst logos = [];\n\t\t\n\t\timages.forEach(logo => {\n\t\t\tlogos.push(<Icon image={logo['pathOnTablet']}\n\t\t\t                 description={logo['obj']}/>);\n\t\t});\n\t\t\n\t\t\n\t\treturn (\n\t\t\t<div className={\"Logo\"}>\n\t\t\t\t{logos.map(x => x)}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Logo;","import React, {Component} from 'react';\nimport ViewManager from \"./view/ViewManager\";\nimport TimeBoard from \"./view/Global/TimeBoard\";\nimport './App.css';\n// import './AppDark.css';\nimport Toolbar from \"./view/Global/Toolbar/Toolbar\";\nimport logConfig from './config/log'\nimport Logger from \"./dev/Logger\";\nimport {connect} from \"react-redux\";\nimport Logo from \"./view/Global/Logo\";\n\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tscenario: state.scenario\n\t}\n};\n\n\nclass App extends Component {\n\t\n\tstatic propTypes = {};\n\t\n\tstatic logger = new Logger(logConfig.App, \"App\");\n\t\n\tnbClickForDebug = 0;\n\tstate = {\n\t\tscenario: this.props.scenario.current\n\t};\n\t\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\n\t\t// Check if it's a new scenario\n\t\tif (nextProps.scenario.current !== prevState.scenario) {\n\t\t\treturn {\n\t\t\t\tscenario: nextProps.scenario.current\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn null;\n\t}\n\t\n\taskForDebug = () => {\n\t\tthis.nbClickForDebug++;\n\t\tif (this.nbClickForDebug > 10) {\n\t\t\t// Allow the scroll on tablet\n\t\t\tdocument.querySelector(\"div.scenarioTitle\").style.color = \"#F00\";\n\t\t\tdocument.ontouchmove = function () {\n\t\t\t}\n\t\t}\n\t};\n\t\n\tcomponentDidMount() {\n\t\tdocument.ontouchmove = (e) => {\n\t\t\t// prevent scroll on tablet\n\t\t\te.preventDefault()\n\t\t}\n\t}\n\t\n\trender() {\n\t\t\n\t\tlet scenarioName;\n\t\t\n\t\tif (this.state.scenario !== undefined) {\n\t\t\tscenarioName = this.state.scenario.name\n\t\t} else {\n\t\t\tscenarioName = \"No scenario loaded\"\n\t\t}\n\t\t\n\t\treturn (\n\t\t\t<div className={\"App\"}>\n\t\t\t\t<div className=\"component leftPart\">\n\t\t\t\t\t{/*List of steps with remaning time for each*/}\n\t\t\t\t\t<TimeBoard/>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div id=\"rightPart\">\n\t\t\t\t\t\n\t\t\t\t\t<div id=\"header\">\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div className=\"component scenarioTitle\"\n\t\t\t\t\t\t     onClick={this.askForDebug}>\n\t\t\t\t\t\t\t{/*On top left, the name of the scenario (receptionist, take out the garbage, etc.)*/}\n\t\t\t\t\t\t\t<h1>{scenarioName}</h1>\n\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div className=\"component\">\n\t\t\t\t\t\t\t{/*On top center, the differents problem that affect Pepper (voice mute, ROS dead, etc.)*/}\n\t\t\t\t\t\t\t<Toolbar/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={\"component logos\"}>\n\t\t\t\t\t\t\t{/*The Logos of organisations that form LyonTech*/}\n\t\t\t\t\t\t\t{/* <Logo/> */}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div className=\"component main\">\n\t\t\t\t\t\t{/*Component that create the view in function of LM orders*/}\n\t\t\t\t\t\t<ViewManager/>\n\t\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\n\t\t\t\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\nexport default connect(mapStateToProps)(App);\n","import React, {Component} from 'react';\r\nimport {getAllViewsKey} from \"../../controller/ViewStepBridge\";\r\nimport './ViewSimulator.css'\r\nimport QiWrapper from \"../../model/QiWrapper\";\r\nimport ConfigWrapper from \"../../controller/ConfigWrapper\";\r\n\r\nconst {apis: {tabletLM}} = ConfigWrapper.get();\r\n\r\nclass ViewSimulator extends Component {\r\n\t\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tcurrentViewSelected: null,\r\n\t\t\t\r\n\t\t\tcurrentJson: JSON.stringify({\r\n\t\t\t\ttextToShow: \"\",\r\n\t\t\t\timagePath: \"\",\r\n\t\t\t\tchoices: [],\r\n\t\t\t\tpeople: {\r\n\t\t\t\t\twho: {\r\n\t\t\t\t\t\tdrinkName: \"\",\r\n\t\t\t\t\t\tname: \"\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tto: {\r\n\t\t\t\t\t\tdrinkName: \"\",\r\n\t\t\t\t\t\tname: \"\"\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t\"location\": \"\",\r\n\t\t\t\tvideo: \"\",\r\n\t\t\t\ttime: 0\r\n\t\t\t}, null, 4),\r\n\t\t\t\r\n\t\t\t\r\n\t\t};\r\n\t}\r\n\t\r\n\thandleSelectChange = evt => {\r\n\t\tevt.persist();\r\n\t\tthis.setState(prev => {\r\n\t\t\treturn {\r\n\t\t\t\t...prev,\r\n\t\t\t\tcurrentViewSelected: evt.target.value\r\n\t\t\t}\r\n\t\t})\r\n\t};\r\n\t\r\n\thandleJsonChange = evt => {\r\n\t\tevt.persist();\r\n\t\tthis.setState(prev => {\r\n\t\t\treturn {\r\n\t\t\t\t...prev,\r\n\t\t\t\tcurrentJson: evt.target.value\r\n\t\t\t}\r\n\t\t})\r\n\t};\r\n\t\r\n\thandleSubmit = e => {\r\n\t\te.preventDefault();\r\n\t\t\r\n\t\tlet json = this.state.currentJson.replaceAll(\"[\\n\\t]\", \"\");\r\n\t\t\r\n\t\tQiWrapper.raise(tabletLM[\"currentView\"][\"ALMemory\"], {\r\n\t\t\tdata: JSON.parse(json),\r\n\t\t\tview: this.state.currentViewSelected\r\n\t\t});\r\n\t};\r\n\t\r\n\trender() {\r\n\t\t\r\n\t\tconst options = [];\r\n\t\tgetAllViewsKey().forEach(view => {\r\n\t\t\toptions.push(<option value={view}>{view}</option>)\r\n\t\t});\r\n\t\t\r\n\t\t\r\n\t\treturn <div id={\"ViewSimulator\"}>\r\n\t\t\t<form action=\"\" onSubmit={e => this.handleSubmit(e)}>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<label htmlFor=\"select\">Select a view</label>\r\n\t\t\t\t\t<select\r\n\t\t\t\t\t\tvalue={this.state.currentViewSelected}\r\n\t\t\t\t\t\tid={\"select\"}\r\n\t\t\t\t\t\tonChange={event => this.handleSelectChange(event)}>{options}</select>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t<div><label htmlFor=\"textArea\">Write Data in JSON</label>\r\n\t\t\t\t\t<textarea id={\"textArea\"}\r\n\t\t\t\t\t          onChange={e => this.handleJsonChange(e)}\r\n\t\t\t\t\t          value={this.state.currentJson}>\r\n\t\t\t\t\t</textarea></div>\r\n\t\t\t\t\r\n\t\t\t\t<button className={\"btn-info\"} type=\"submit\">Change View\r\n\t\t\t\t</button>\r\n\t\t\t</form>\r\n\t\t</div>;\r\n\t}\r\n}\r\n\r\nexport default ViewSimulator;","import React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {toolbarAction} from \"../../redux/actions/ToolbarAction\";\r\nimport {viewAction} from \"../../redux/actions/ViewAction\";\r\nimport {comAction} from \"../../redux/actions/CommunicationAction\";\r\nimport './Debug.css'\r\nimport ConfigWrapper from \"../../controller/ConfigWrapper\";\r\nimport QiWrapper from \"../../model/QiWrapper\";\r\nimport ViewSimulator from \"./ViewSimulator\";\r\nimport ComponentTitle from \"../Global/reusableComponent/ComponentTitle\";\r\n\r\n\r\nconst {apis: {common: apiCommon, tabletLM: apiTabletLM, generalManagerHRI: apiGeneralManagerHRI}, drinks, locations, names, videos} = ConfigWrapper.get();\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\ttoolbar: state.toolbar,\r\n\t\tview: state.view,\r\n\t\tscenario: state.scenario\r\n\t};\r\n}\r\n\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n\t\r\n\t\r\n\treturn {\r\n\t\tchangeView: function (view) {\r\n\t\t\t\r\n\t\t\tQiWrapper.raise(apiTabletLM.currentView.ALMemory, {view: view})\r\n\t\t\t\r\n\t\t\t\r\n\t\t},\r\n\t\ttoggleTimeBoardVisibilty(state) {\r\n\t\t\t\r\n\t\t\tconst componentVisibility = viewAction.setComponentVisibility;\r\n\t\t\tstate = (state === componentVisibility.state.visible) ? componentVisibility.state.hidden : componentVisibility.state.visible;\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: componentVisibility.type,\r\n\t\t\t\tstate: state,\r\n\t\t\t\tcomponent: componentVisibility.component.timeBoard\r\n\t\t\t})\r\n\t\t},\r\n\t\ttoolbarState: function (tool, state) {\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tQiWrapper.raise(apiCommon.toolbarState.ALMemory, {\r\n\t\t\t\tsystem: tool,\r\n\t\t\t\tstate: state\r\n\t\t\t})\r\n\t\t\t\r\n\t\t},\r\n\t\tjsHeartbeat: function () {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: comAction.jsHeartbeat.type,\r\n\t\t\t});\r\n\t\t},\r\n\t\tstepCompleted: function () {\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tQiWrapper.raise(apiGeneralManagerHRI.stepCompleted.ALMemory, {step: null})\r\n\t\t\t\r\n\t\t},\r\n\t\tsetStepRecieved: function () {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: comAction.setStepRecieved.type\r\n\t\t\t})\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\t\r\n\t\ttimeToggleTimer: function (state) {\r\n\t\t\t\r\n\t\t\tQiWrapper.raise(apiGeneralManagerHRI.timerState.ALMemory, {state: state});\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\tgotoMainMenu: function () {\r\n\t\t\tQiWrapper.raise(apiGeneralManagerHRI.currentScenario.ALMemory, {scenario: \"mainMenu\"});\r\n\t\t\t\r\n\t\t\tQiWrapper.raise(apiTabletLM.changeCurrentView.ALMemory, {view: \"mainMenu\"})\r\n\t\t},\r\n\t\t\r\n\t\ttimeStepComplete: function () {\r\n\t\t\t\r\n\t\t\tQiWrapper.raise(apiGeneralManagerHRI.stepCompleted.ALMemory, {step: null})\r\n\t\t},\r\n\t\t\r\n\t\t\r\n\t\ttimeStepSkipped: function (stepId) {\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tQiWrapper.raise(apiGeneralManagerHRI.stepSkipped.ALMemory, {\r\n\t\t\t\tstepId: stepId\r\n\t\t\t})\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\ttimeStepChangeCurrent: function (stepId) {\r\n\t\t\t\r\n\t\t\tQiWrapper.raise(apiGeneralManagerHRI.currentStep.ALMemory, {\r\n\t\t\t\tstepId: stepId\r\n\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t}\r\n}\r\n\r\nclass Debug extends Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tcurrentStep: null,\r\n\t\t\tcurrentScenario: this.props.scenario.current,\r\n\t\t\timagePath: \"\",\r\n\t\t\tvideoPath: \"\"\r\n\t\t}\r\n\t}\r\n\t\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\tif (prevState.currentScenario !== nextProps.currentScenario) {\r\n\t\t\treturn {\r\n\t\t\t\tcurrentScenario: nextProps.currentScenario\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\thandleImageClick = () => {\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\thandleVideoClick = () => {\r\n\t\r\n\t};\r\n\t\r\n\trender() {\r\n\t\t\r\n\t\tlet className = \"Debug\";\r\n\t\t\r\n\t\tlet images = [];\r\n\t\timages.push(drinks, locations);\r\n\t\tlet imagesOptions = [];\r\n\t\timages.forEach(img => {\r\n\t\t\tif (img !== undefined) {\r\n\t\t\t\timagesOptions.push(<option\r\n\t\t\t\t\tvalue={img['pathOnTablet']}>{img['obj']}</option>)\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tlet videosOptions = [];\r\n\t\tnew Array(videos).forEach(video => {\r\n\t\t\tif (video !== undefined) {\r\n\t\t\t\tvideosOptions.push(<option\r\n\t\t\t\t\tvalue={video['pathOnTablet']}>{video['obj']}</option>)\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t\r\n\t\tlet scenarioDebug = null;\r\n\t\t\r\n\t\tconst toolbarState = toolbarAction.toolbarState.state;\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div className={className}>\r\n\t\t\t\t<ComponentTitle>Debug</ComponentTitle>\r\n\t\t\t\t\r\n\t\t\t\t<div id=\"redux\">\r\n\t\t\t\t\t<h2>REDUX</h2>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<div id=\"changeView\">\r\n\t\t\t\t\t\t<h3>View</h3>\r\n\t\t\t\t\t\t<ViewSimulator/>\r\n\t\t\t\t\t\t<h4>changeView</h4>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<h4>Component visibility</h4>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => this.props.toggleTimeBoardVisibilty(this.props.view.componentVisibility.timeBoard)}\r\n\t\t\t\t\t\t\tclassName={\"btn btn-info\"}>Toggle timeBoard\r\n\t\t\t\t\t\t\tVisibility\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<div id=\"toolbar\">\r\n\t\t\t\t\t\t<h3>Toolbar</h3>\r\n\t\t\t\t\t\t<button className={\"btn btn-info\"}\r\n\t\t\t\t\t\t        onClick={() => this.props.toolbarState(toolbarAction.toolbarState.system.canMove,\r\n\t\t\t\t\t\t\t        this.props.toolbar.canMove === toolbarState.ok ? toolbarState.error : toolbarState.ok)}>\r\n\t\t\t\t\t\t\tCan Move\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button className={\"btn btn-info\"}\r\n\t\t\t\t\t\t        onClick={() => this.props.toolbarState(toolbarAction.toolbarState.system.micro,\r\n\t\t\t\t\t\t\t        this.props.toolbar.micro === toolbarState.ok ? toolbarState.error : toolbarState.ok)}>\r\n\t\t\t\t\t\t\tMicro\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button className={\"btn btn-info\"}\r\n\t\t\t\t\t\t        onClick={() => this.props.toolbarState(toolbarAction.toolbarState.system.internet,\r\n\t\t\t\t\t\t\t        this.props.toolbar.internet === toolbarState.ok ? toolbarState.error : toolbarState.ok)}>\r\n\t\t\t\t\t\t\tInternet\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button className={\"btn btn-info\"}\r\n\t\t\t\t\t\t        onClick={() => this.props.toolbarState(toolbarAction.toolbarState.system.pcConnection,\r\n\t\t\t\t\t\t\t        this.props.toolbar.pcConnection === toolbarState.ok ? toolbarState.error : toolbarState.ok)}>\r\n\t\t\t\t\t\t\tPc Connection\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div id=\"communication\">\r\n\t\t\t\t\t\t<h3>Communication</h3>\r\n\t\t\t\t\t\t<button className={\"btn btn-info\"}\r\n\t\t\t\t\t\t        onClick={() => this.props.jsHeartbeat()}>Heartbeats\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<div id=\"taskRecieved\">\r\n\t\t\t\t\t\t\t<button className={\"btn btn-info\"} onClick={() => {\r\n\t\t\t\t\t\t\t\tthis.props.setStepRecieved()\r\n\t\t\t\t\t\t\t}}>Step recieved\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t<div id=\"time\">\r\n\t\t\t\t\t\t<h3>Time</h3>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<button className={\"btn btn-danger\"}\r\n\t\t\t\t\t\t        onClick={() => this.props.timeToggleTimer(apiGeneralManagerHRI.timerState.state.on)}>Start\r\n\t\t\t\t\t\t\ttimer\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button className={\"btn btn-danger\"}\r\n\t\t\t\t\t\t        onClick={() => this.props.timeToggleTimer(apiGeneralManagerHRI.timerState.state.off)}>Stop\r\n\t\t\t\t\t\t\ttimer\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t<div id=\"steps\">\r\n\t\t\t\t\t\r\n\t\t\t\t\t<button className={\"btn btn-info\"}\r\n\t\t\t\t\t        onClick={() => this.props.timeStepSkipped(this.state.currentStep)}>Pass\r\n\t\t\t\t\t\tstep\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button className={\"btn btn-info\"}\r\n\t\t\t\t\t        onClick={() => this.props.timeStepComplete()}>Complete\r\n\t\t\t\t\t\tStep\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button className={\"btn btn-info\"}\r\n\t\t\t\t\t        onClick={() => this.props.timeStepChangeCurrent(this.state.currentStep)}>Change\r\n\t\t\t\t\t\tcurrent\r\n\t\t\t\t\t\tstep\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t<button className={\"btn btn-info\"}\r\n\t\t\t\t        onClick={this.props.gotoMainMenu}>Go to Main Menu\r\n\t\t\t\t</button>\r\n\t\t\t\t<div className=\"Video\">\r\n\t\t\t\t\t<h3>Video</h3>\r\n\t\t\t\t\t<select name=\"\" id=\"\"\r\n\t\t\t\t\t        onChange={this.handleVideoInputChange}>\r\n\t\t\t\t\t\t{videosOptions}\r\n\t\t\t\t\t</select>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<video src={this.state.videoPath}/>\r\n\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t<div className=\"Image\">\r\n\t\t\t\t\t<h3>Image</h3>\r\n\t\t\t\t\t<select name=\"\" id=\"\"\r\n\t\t\t\t\t        onChange={this.handleVideoInputChange}>\r\n\t\t\t\t\t\t{imagesOptions}\r\n\t\t\t\t\t</select>\r\n\t\t\t\t\t<img src={this.state.imagePath} alt=\"\"/>\r\n\t\t\t\t</div>\r\n\t\t\t\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\t\r\n\thandleVideoInputChange = (evt) => {\r\n\t\t\r\n\t\tconsole.log(evt.target.value);\r\n\t\t\r\n\t\tthis.setState(prev => {\r\n\t\t\treturn {\r\n\t\t\t\t...prev,\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t})\r\n\t};\r\n\t\r\n\thandleImageInputChange = (evt) => {\r\n\t\r\n\t};\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(Debug);","import ConfigWrapper from \"../../controller/ConfigWrapper\";\r\n\r\nconst {apis: {generalManagerHRI, common, tabletLM}} = ConfigWrapper.get();\r\n\r\nexport const comAction = {\r\n\tstepReceived: {\r\n\t\ttype: generalManagerHRI.stepReceived.reduxKey,\r\n\t},\r\n\t\r\n\t// Never raise this event, @see dataJs\r\n\tstepCompleted: {\r\n\t\ttype: generalManagerHRI.stepCompleted.reduxKey,\r\n\t},\r\n\tjsHeartbeat: {\r\n\t\ttype: common.jsHeartbeat.reduxKey,\r\n\t\ttime: \"__timestamp\"\r\n\t},\r\n\tdataJs: {\r\n\t\ttype: tabletLM.dataJs.reduxKey,\r\n\t\tdataType: tabletLM.dataJs.dataType,\r\n\t\tdata: \"\"\r\n\t\t\r\n\t},\r\n\t\r\n\textHeartbeat: {\r\n\t\ttype: \"COM/EXT_HEARTBEAT\",\r\n\t\ttime: {\r\n\t\t\tgm: \"_gmTimestamp\",\r\n\t\t\tlm: \"_lmTimestamp\"\r\n\t\t}\r\n\t},\r\n\t\r\n\taskToChangeScenario: {\r\n\t\ttype: generalManagerHRI.askToChangeScenario.reduxKey,\r\n\t\tscenario: [\r\n\t\t\t{\r\n\t\t\t\t\"id\": \"receptionist\",\r\n\t\t\t\t\"name\": \"Receptionist\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"id\": \"take_out_the_garbage\",\r\n\t\t\t\t\"name\": \"Take out the garbage\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"id\": \"inspection\",\r\n\t\t\t\t\"name\": \"Inspection\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t\r\n\t\r\n};\r\n\r\n\r\n"],"sourceRoot":""}